{"version":3,"sources":["lib/kozoom-3d-simulator/src/CaromSimulator/viewSelector.js","lib/kozoom-3d-simulator/src/CaromSimulator/constants.js","lib/kozoom-3d-simulator/src/CaromSimulator/sceneManager/OriginSimulatorEngine/son.js","lib/kozoom-3d-simulator/src/CaromSimulator/sceneManager/OriginSimulatorEngine/evt.js","lib/kozoom-3d-simulator/src/CaromSimulator/sceneManager/OriginSimulatorEngine/simul.js","lib/kozoom-3d-simulator/src/CaromSimulator/sceneManager/OriginSimulatorEngine/parametres.js","lib/kozoom-3d-simulator/src/CaromSimulator/sceneManager/OriginSimulatorEngine/cBillard.js","lib/kozoom-3d-simulator/src/CaromSimulator/sceneManager/index.js","lib/kozoom-3d-simulator/src/CaromSimulator/simulatorEngine.js","lib/kozoom-3d-simulator/src/CaromSimulator/controller/slider.js","lib/kozoom-3d-simulator/src/CaromSimulator/controller/index.js","lib/kozoom-3d-simulator/src/PoolSimulator/viewSelector.js","lib/kozoom-3d-simulator/src/CaromSimulator/index.js","lib/kozoom-3d-simulator/src/PoolSimulator/constants.js","lib/kozoom-3d-simulator/src/PoolSimulator/sceneManager/OriginSimulatorEngine/parametres.js","lib/kozoom-3d-simulator/src/PoolSimulator/sceneManager/OriginSimulatorEngine/son.js","lib/kozoom-3d-simulator/src/PoolSimulator/sceneManager/OriginSimulatorEngine/evt.js","lib/kozoom-3d-simulator/src/PoolSimulator/sceneManager/OriginSimulatorEngine/simul.js","lib/kozoom-3d-simulator/src/PoolSimulator/sceneManager/OriginSimulatorEngine/cBillard.js","lib/kozoom-3d-simulator/src/PoolSimulator/sceneManager/index.js","lib/kozoom-3d-simulator/src/PoolSimulator/simulatorEngine.js","lib/kozoom-3d-simulator/src/PoolSimulator/controller/slider.js","lib/kozoom-3d-simulator/src/PoolSimulator/controller/index.js","lib/kozoom-3d-simulator/src/PoolSimulator/index.js","App.js","serviceWorker.js","index.js"],"names":["ViewSelector","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","viewSelectorItemClicked","bind","assertThisInitialized","item","_self","str2Dclass","str3Dclass","currentView","react_default","a","createElement","className","onClick","Component","fileTableModel","fileBatModel","TABLE_LENGTH","BALL_SIZE","INDEX_WHITE_X","INDEX_WHITE_Y","INDEX_YELLOW_X","INDEX_YELLOW_Y","INDEX_TARGET_X","INDEX_TARGET_Y","INDEX_SPEED","INDEX_CUEANGLE","INDEX_CUELINE","INDEX_SIDEENGLISH","INDEX_TOPSPIN","son","played","evt","Simul","param1","param2","delta_fgpas","RSG","fgpas","EPSILON","frpas","QCQ","Rfppas","f1","f2","Rfp","fbille","pas","fp1","ARRET","TSP","fg","fr","choc_bande","_loc_2","NaN","X","XMIN","XMAX","Y","YMIN","YMAX","Vx","Vy","choc12","choc13","_loc_3","_loc_4","nbandes","nb_b_avant","etat","Rp","Rq","VQy","VQx","init_pars","VMz","VT","VRr","VN0","VN","deltaVN","intens","beta_adh","Math","sqrt","VRq","beta_gliss","abs","alpha_bande","PI","atan","VRp","choc_adh","choc_gliss","recup_pars","fin_parcours","_loc_1","Rr","Calcul","console","log","_loc_5","_loc_6","_loc_8","nb_clefs","nb_max_clefs","evts","nb_sons","nb_max_sons","evts_son","Xinit","Yinit","RAp","RApInit","RAq","RAqInit","RAr","RArInit","add_clef","el","er","alph","alphaQ","beta","betaQ","vqueue","Vqueue","calculs_finis","done","distance13","first_bille_choquee","deltaclef","resolution","date","Vinit","cos","R","_loc_7","sin","Vx0","Vy0","_loc_9","p0","q0","r0","temps","intensite","type_choc","choc_billes","_loc_10","mise_a_jour","X0","Y0","RAp0","deltaclefRot","RAq0","RAr0","Xfin","Yfin","RApfin","RAqfin","RArfin","duree","nb3","d13","effet","sorties","parseInt","tan","e_s","eff_s","time","_loc_11","_loc_12","_loc_13","_loc_14","_loc_15","_loc_16","_loc_17","_loc_18","_loc_19","_loc_20","_loc_21","_loc_22","_loc_23","_loc_25","_loc_26","_loc_27","D","_loc_29","_loc_30","RendementChoc","parametres","HBande","direction_beta","param3","asin","atanjimi","ToucheBandeX","long_billard","Quantite","NBILLES","bille_visee","noba","quant","ToucheBandeZ","larg_billard","AlphaQmin","ToucheBille","CBillard","param4","mode_jeu","ralenti","largeur_bandes","change_billard","arret_son","myTimer","stop","taille","bitmap_Bandes_310","visible","bitmap_Billard_310","bitmap_Bandes_280","bitmap_Billard_280","bitmap_Bandes_260","bitmap_Billard_260","ctrl","XC","Ech","longueur","YC","largeur","Params","xmax","ymax","Simulateur","tracer_grille","tracer_lines","Placer_billes_hasard","init_point","afficher_billes","aff_parametres","placer_queue","dq0","queue","calculs_faits","aff_trajets","trajets","graphics","clear","tracer_ligne_visee","ligne_visee","update_modejeu","Vqmax","Simuler","taille_billard","Rb","type","ombre","tous_trajets","trajet_bille_joueur","trajet_bille_visee","billes","ecl","alphamin","ind_last_clef","ampl_recul_max","SceneManager","size","modelStorePath","ballPositions","controlOptions","drawBallPath","value","res","pathData","length","pathCueWhite","dispose","pathCueYellow","pathTargetBall","whiteBallPoints","i","push","BABYLON","ballRadius","CreateLines","points","scene","yellowBallPoints","colorYellow","colors","redBallPoints","colorRed","configCameras","cameras","arcCam","Zero","attachControl","canvas","upperBetaLimit","wheelPrecision","upperRadiusLimit","lowerRadiusLimit","topCam","lowerBetaLimit","upperAlphaLimit","lowerAlphaLimit","mode","ORTHOGRAPHIC_CAMERA","orthoTop","orthoBottom","orthoLeft","orthoRight","changeView","loadModels","ImportMesh","newMeshes","objects","bat","position","y","z","batLookatPoint","CreateSphere","diameter","visibility","table","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","obj","name","material","bumpTexture","err","return","configCueBalls","updateBat","updateControlOptions","data","cueLine","cueAngle","sideEnglish","topSpin","_this$objects","directionLine","cueBallWhite","deltaSideEnglish","deltaTopSpin","x","rotation","lookAtPoint","assign","lookAt","generateReflectionMaterial","root","others","probe","index","renderList","reflectionTexture","cubeTexture","reflectivityColor","reflectionFresnelParameters","bias","attachToMesh","carpet","rail","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_this$ballPositions","posCueBallWhite","posCueBallYellow","posTargetBall","matCueBallWhite","diffuseTexture","cueBallYellow","matCueBallYellow","targetBall","matTargetBall","ray","rayHelper","localMeshDirection","configGrids","color","gridPoints","grids","toggleGrids","initializeScene","clearColor","Up","getEngine","runRenderLoop","render","animateBalls","addEventListener","onPointerDown","onPointerUp","onPointerMove","getGroundPosition","pickinfo","pick","pointerX","pointerY","mesh","hit","pickedPoint","button","pickInfo","currentMesh","pickedMesh","startingPoint","setTimeout","detachControl","current","moveAndRotateBall","t","tmp","t0","Rx","Ry","Rz","rotate","WORLD","Z","_this$objects2","Date","getTime","res1","res2","res3","playSimulation","initBallPosition","_this$objects3","billard","speed","batContactLine","timerCount","view","activeCamera","SimulatorEngine","meshPicked","board","onSceneMount","e","componentDidMount","state","showPath","simulatorDom","React","createRef","option","react_babylonjs_es5","canvasId","onMeshPicked","InputSlider","componentWillReceiveProps","setState","updateValue","onUpdate","itemKey","onChangeValue","target","onMinusPressed","currentValue","_this$props","min","step","onPlusPressed","_this$props2","max","_this$props3","containerClass","label","unitDom","style","display","index_es","icon","faMinus","flex","textAlign","faPlus","onChange","ControllerCollection","onInputSliderUpdated","key","parseFloat","eventValues","onControlOptionsUpdated","round","_this2","_this$state","showGrid","btnGridClass","btnShowPathClass","faTh","onToggleShowGrid","faCrosshairs","onToggleShowPath","faVolumeMute","slider_InputSlider","faBackward","faStop","faPlay","onPlayPressed","faForward","empocheeInit","simul","b1","b3","RTROU","EPSILON_COIN","XTROU2","angle_poche_coin","YTROU","angle_poche_centrale","EMPOCHEE","XE","XF","XB","XA","YB","YF","YA","YTROU2","YE","XTROU","a3","a1","a2","XD","YD","b2","empochee_fin","time_empochee","immobile","date_arret","_loc_24","_loc_28","_loc_31","traiter_poches","Symetrise_Params","acos","choc_poche","_default","cl","new_seq","seq","seq_id","seq_origine","grille","lineStyle","moveTo","lineTo","titre","String","msg","random","scaleX","nb_points","pt_courant","auteur","seq_auto","aff_auteur","text","setTextFormat","myFormatJauneKozoomCentre","aff_titre","points_b","afficher_trajets","modif_pt_seq","simulation_en_cours","cont_bille","aff_trajet_bille","event","temps_recul","dq","Ampl_queue","t_debut","muet","nb_sons_played","canal_queue","son_queue_plat","play","trans","soundTransform","volume","son_queue_pique","jouer_bille0","canal_bille0","son_bille_bille","canal_bille1","jouer_bande0","canal_bande0","son_bille_bande","canal_bande1","jouer_poche0","canal_poche0","son_poche","canal_poche1","entier","tourner_bille","FS","replacer","updateAfterEvent","afficher_une_bille","couleur","remettre_bille","positionner_texture","pathes","line","ballPoints","mat","diffuseColor","balls","completed","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","controller_slider_InputSlider","PoolSimulator","componentWillMount","updateSimulateInfo","info","simulator","PoolSimulator_viewSelector_ViewSelector","PoolSimulator_simulatorEngine","ref","PoolSimulator_controller_ControllerCollection","App","src_PoolSimulator","Boolean","window","location","hostname","match","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b6a268e7.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './styles.css';\r\nexport default class ViewSelector extends Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.viewSelectorItemClicked = this.viewSelectorItemClicked.bind(this);\r\n    }\r\n\r\n    viewSelectorItemClicked (item) {\r\n        if(typeof this.props.viewSelectorItemClicked === 'function'){\r\n            this.props.viewSelectorItemClicked(item);\r\n        }\r\n    }\r\n\r\n    render () {\r\n        let _self = this;\r\n        let str2Dclass = \"view-selector-item\";\r\n        let str3Dclass = \"view-selector-item\";\r\n\r\n        if (this.props.currentView === '2d') {\r\n            str2Dclass += \" active\";\r\n        } else {\r\n            str3Dclass += \" active\";\r\n        }\r\n        return (\r\n            <div className=\"view-selector\">\r\n                <span\r\n                    className={str2Dclass}\r\n                    onClick={function () { _self.viewSelectorItemClicked('2d') }}\r\n                >2D</span>\r\n                <span\r\n                    className={str3Dclass}\r\n                    onClick={function () { _self.viewSelectorItemClicked('3d') }}\r\n                >3D</span>\r\n            </div>\r\n        )\r\n    }\r\n}","// model files\r\nexport const fileTableModel = \"table.babylon\";\r\nexport const fileBatModel = \"bat.babylon\";\r\nexport const TABLE_LENGTH = 396; //pixel\r\n// end model files\r\n\r\n// for simulator\r\nexport const BALL_SIZE = 5.715; // cm\r\n\r\nexport const ballMass = 0.17;\r\n\r\nexport const linearSpeedDampingRate = 0.9;\r\nexport const angularSpeedDampingRate = 0.9;\r\nexport const rollingRate = 0.5;\r\nexport const perpendicularForceRate = 0.3;\r\nexport const CONSTANTS_SPEED_NORMAL = {\r\n    timeStep: 0.01666,\r\n    gravityRate: 0.16,\r\n    // gravityRate: 0.72,\r\n    forceMagnitude: 0.2,\r\n\r\n    ballFriction: 0.8, //u\r\n    ballRestitution: 0.95, //e\r\n\r\n    ballNativeOptions: {\r\n\r\n    },\r\n\r\n    carpetFriction: 0.9, //u\r\n    carpetRestitution: 0.5, //e\r\n\r\n    carpetRailFriction: 0.2, // u\r\n    carpetRailRestitution: 0.98, //e\r\n}\r\n\r\nexport const maxDelta = 0.5;\r\n// end for simulator\r\n\r\n// get data from server\r\nexport const INDEX_SIZE = 3;\r\nexport const INDEX_WHITE_X = 6;\r\nexport const INDEX_WHITE_Y = 7;\r\nexport const INDEX_YELLOW_X = 8;\r\nexport const INDEX_YELLOW_Y = 9;\r\nexport const INDEX_TARGET_X = 10;\r\nexport const INDEX_TARGET_Y = 11;\r\nexport const INDEX_SPEED = 12;\r\nexport const INDEX_CUEANGLE = 13;\r\nexport const INDEX_CUELINE = 14;\r\nexport const INDEX_SIDEENGLISH = 15;\r\nexport const INDEX_TOPSPIN = 16;\r\n// end get data for server","export default class son {\r\n    played;\r\n    intensite;\r\n    type_choc;\r\n    temps;\r\n\r\n    constructor () {\r\n        this.played = false;\r\n        return;\r\n    }\r\n}","export default class evt {\r\n    RAp;\r\n    RAr;\r\n    RAq;\r\n    time;\r\n    X;\r\n    Y;\r\n\r\n    constructor () {\r\n        return;\r\n    }\r\n}","import son from './son';\r\nimport evt from './evt';\r\n\r\nexport default class Simul {\r\n    delta_fgpas = 0.004375;\r\n    Y0;\r\n    RArfin;\r\n    r0;\r\n    Yfin;\r\n    e_s;\r\n    VQx;\r\n    first_bille_choquee;\r\n    nb_sons;\r\n    RAp;\r\n    RAr;\r\n    VQy;\r\n    RSG = 1;\r\n    etat;\r\n    RAp0;\r\n    RAq;\r\n    VRp;\r\n    VRq;\r\n    VRr;\r\n    YMIN;\r\n    fgpas = 0.00125;\r\n    nb_max_sons;\r\n    EPSILON = 0.86;\r\n    YMAX;\r\n    RApfin;\r\n    R;\r\n    D;\r\n    effet;\r\n    frpas = 3e-005;\r\n    Y;\r\n    vqueue;\r\n    RAq0;\r\n    duree;\r\n    alph;\r\n    X;\r\n    Rq;\r\n    Rr;\r\n    deltaVN;\r\n    RAr0;\r\n    beta_gliss;\r\n    Rp;\r\n    VN0;\r\n    sorties;\r\n    calculs_finis;\r\n    Vinit;\r\n    QCQ = 2;\r\n    nb_max_clefs;\r\n    Rfppas = 7.5e-005;\r\n    f1 = 0.25;\r\n    f2 = 0.42;\r\n    d13;\r\n    Vx0;\r\n    done;\r\n    eff_s;\r\n    deltaclef;\r\n    Rfp = 0.15;\r\n    nb_clefs;\r\n    fbille = 0.05;\r\n    nbandes;\r\n    pas = 0.0005;\r\n    VMz;\r\n    fp1 = 0.2;\r\n    RAqfin;\r\n    intens;\r\n    resolution;\r\n    er;\r\n    alpha_bande;\r\n    ARRET = 0;\r\n    TSP = 3;\r\n    date;\r\n    el;\r\n    VN;\r\n    RendementChoc;\r\n    Vy0;\r\n    VT;\r\n    p0;\r\n    fg = 2.5;\r\n    evts_son;\r\n    Xfin;\r\n    fr = 0.06;\r\n    DateMax;\r\n    beta_adh;\r\n    distance13;\r\n    XMIN;\r\n    choc13;\r\n    X0;\r\n    choc12;\r\n    Vx;\r\n    Vy;\r\n    q0;\r\n    XMAX;\r\n    evts;\r\n    nb_b_avant;\r\n    deltaclefRot;\r\n    beta;\r\n    nb3;\r\n\r\n    constructor (param1, param2)\r\n    {\r\n        var _loc_3 = 0;\r\n        this.XMAX = param1;\r\n        this.YMAX = param2;\r\n        this.XMIN = -param1;\r\n        this.YMIN = -param2;\r\n        this.nb_max_clefs = 10000;\r\n        this.nb_clefs = [];\r\n        var _loc_4 = 0;\r\n        this.nb_clefs[2] = 0;\r\n        this.nb_clefs[1] = _loc_4;\r\n        this.nb_clefs[0] = _loc_4;\r\n        \r\n        this.evts = [];\r\n        this.nb_max_sons = 50;\r\n        this.nb_sons = 0;\r\n        this.evts_son = [];\r\n        this.sorties = [];\r\n        this.eff_s = [];\r\n        this.etat = [];\r\n        this.X0 = [];\r\n        this.Y0 = [];\r\n        this.X = [];\r\n        this.Y = [];\r\n        this.Xfin = [];\r\n        this.Yfin = [];\r\n        this.RAp = [];\r\n        this.RAq = [];\r\n        this.RAr = [];\r\n        this.RAp0 = [];\r\n        this.RAq0 = [];\r\n        this.RAr0 = [];\r\n        this.RApfin = [];\r\n        this.RAqfin = [];\r\n        this.RArfin = [];\r\n        this.Vx = [];\r\n        this.Vy = [];\r\n        this.Rp = [];\r\n        this.Rq = [];\r\n        this.Rr = [];\r\n        this.VQx = [];\r\n        this.VQy = [];\r\n        this.etat = [];\r\n        this.D = 0.06;\r\n        this.R = 0.03;\r\n        this.RendementChoc = 0.8;\r\n        this.deltaclefRot = this.R * Math.PI / 10;\r\n        this.resolution = 0.01;\r\n        this.done = false;\r\n        this.sorties[0] = 0;\r\n        this.sorties[1] = 0;\r\n        this.sorties[2] = 0;\r\n        this.sorties[3] = 7.5;\r\n        this.sorties[4] = 7.5;\r\n        this.sorties[5] = 7.5;\r\n        this.sorties[6] = 16;\r\n        this.sorties[7] = 16;\r\n        this.sorties[8] = 16;\r\n        this.sorties[9] = 33;\r\n        this.sorties[10] = 32;\r\n        this.sorties[11] = 23.5;\r\n        this.sorties[12] = 52;\r\n        this.sorties[13] = 43;\r\n        this.sorties[14] = 31;\r\n        this.sorties[15] = 72;\r\n        this.sorties[16] = 53;\r\n        this.sorties[17] = 35;\r\n        this.sorties[18] = 86;\r\n        this.sorties[19] = 60;\r\n        this.sorties[20] = 38;\r\n        this.sorties[21] = 100;\r\n        this.sorties[22] = 69;\r\n        this.sorties[23] = 44;\r\n        this.sorties[24] = 108;\r\n        this.sorties[25] = 79;\r\n        this.sorties[26] = 53;\r\n        this.sorties[27] = 120;\r\n        this.sorties[28] = 90;\r\n        this.sorties[29] = 60;\r\n        this.eff_s[0] = -1.5;\r\n        this.eff_s[1] = 0;\r\n        this.eff_s[2] = 1.5;\r\n        this.eff_s[3] = -1.5;\r\n        this.eff_s[4] = 0.5;\r\n        this.eff_s[5] = 1.2;\r\n        this.eff_s[6] = -1.3;\r\n        this.eff_s[7] = 0.7;\r\n        this.eff_s[8] = 1.3;\r\n        this.eff_s[9] = -0.5;\r\n        this.eff_s[10] = 1.3;\r\n        this.eff_s[11] = 1.2;\r\n        this.eff_s[12] = -0.5;\r\n        this.eff_s[13] = 1.3;\r\n        this.eff_s[14] = 1.1;\r\n        this.eff_s[15] = -0.3;\r\n        this.eff_s[16] = 0.8;\r\n        this.eff_s[17] = 1.2;\r\n        this.eff_s[18] = 0;\r\n        this.eff_s[19] = 0.7;\r\n        this.eff_s[20] = 1.2;\r\n        this.eff_s[21] = 0;\r\n        this.eff_s[22] = 0.5;\r\n        this.eff_s[23] = 1.5;\r\n        this.eff_s[24] = -0.6;\r\n        this.eff_s[25] = 0.2;\r\n        this.eff_s[26] = 1.5;\r\n        this.eff_s[27] = -0.65;\r\n        this.eff_s[28] = 0;\r\n        this.eff_s[29] = 1.5;\r\n        return;\r\n    }// end function\r\n\r\n    choc_bande = (param1) => {\r\n        var _loc_2 = NaN;\r\n        if (this.X[param1] > this.XMIN && this.X[param1] < this.XMAX && this.Y[param1] > this.YMIN && this.Y[param1] < this.YMAX)\r\n        {\r\n            return false;\r\n        }\r\n        if (this.X[param1] < this.XMIN && this.Vx[param1] > 0)\r\n        {\r\n            return false;\r\n        }\r\n        if (this.X[param1] > this.XMAX && this.Vx[param1] < 0)\r\n        {\r\n            return false;\r\n        }\r\n        if (this.Y[param1] > this.YMAX && this.Vy[param1] < 0)\r\n        {\r\n            return false;\r\n        }\r\n        if (this.Y[param1] < this.YMIN && this.Vy[param1] > 0)\r\n        {\r\n            return false;\r\n        }\r\n        if (param1 == 0)\r\n        {\r\n            if (!this.choc12 || !this.choc13)\r\n            {\r\n                var _loc_3 = this;\r\n                var _loc_4 = this.nbandes + 1;\r\n                _loc_3.nbandes = _loc_4;\r\n                if (!this.choc12 && !this.choc13)\r\n                {\r\n                    var _loc_3 = this;\r\n                    var _loc_4 = this.nb_b_avant + 1;\r\n                    _loc_3.nb_b_avant = _loc_4;\r\n                }\r\n            }\r\n        }\r\n        if (this.etat[param1] == this.RSG)\r\n        {\r\n            this.Rp[param1] = -this.Vy[param1];\r\n            this.Rq[param1] = this.Vx[param1];\r\n        }\r\n        else if (this.etat[param1] == this.QCQ)\r\n        {\r\n            this.Rp[param1] = -this.Vy[param1] + this.VQy[param1];\r\n            this.Rq[param1] = this.Vx[param1] - this.VQx[param1];\r\n        }\r\n        this.init_pars(param1);\r\n        this.VMz = this.VT - this.VRr;\r\n        this.VN0 = -this.VN;\r\n        this.VN = this.VN * (-this.EPSILON);\r\n        this.deltaVN = this.VN0 + this.VN;\r\n        this.intens = this.VN0 / 20;\r\n        if (this.intens > 1)\r\n        {\r\n            this.intens = 1;\r\n        }\r\n        this.beta_adh = 2 / 7 * Math.sqrt(this.VMz * this.VMz + this.VRq * this.VRq);\r\n        this.beta_gliss = this.f1 * this.deltaVN;\r\n        if (Math.abs(this.VMz) < 1e-005)\r\n        {\r\n            this.alpha_bande = Math.PI / 2;\r\n        }\r\n        else\r\n        {\r\n            this.alpha_bande = Math.abs(Math.atan(this.VRq / this.VMz));\r\n        }\r\n        _loc_2 = Math.abs(this.fp1 * this.deltaVN);\r\n        if (Math.abs(this.VRp) < _loc_2)\r\n        {\r\n            this.VRp = 0;\r\n        }\r\n        else if (this.VRp > 0)\r\n        {\r\n            this.VRp = this.VRp - _loc_2;\r\n        }\r\n        else\r\n        {\r\n            this.VRp = this.VRp + _loc_2;\r\n        }\r\n        _loc_2 = Math.abs(this.f2 * this.deltaVN);\r\n        this.VRq = this.VRq + _loc_2;\r\n        if (this.beta_gliss > this.beta_adh)\r\n        {\r\n            this.choc_adh(param1);\r\n        }\r\n        else\r\n        {\r\n            this.choc_gliss(param1);\r\n        }\r\n        this.recup_pars(param1);\r\n        this.VQx[param1] = this.Vx[param1] - this.Rq[param1];\r\n        this.VQy[param1] = this.Vy[param1] + this.Rp[param1];\r\n        this.etat[param1] = this.QCQ;\r\n        return true;\r\n    }// end function\r\n\r\n    fin_parcours = () => {\r\n        var _loc_1 = 0;\r\n        _loc_1 = 0;\r\n        while (_loc_1 < 3)\r\n        {\r\n            if (this.etat[_loc_1] != this.ARRET)\r\n            {\r\n                if (this.Vx[_loc_1] * this.Vx[_loc_1] + this.Vy[_loc_1] * this.Vy[_loc_1] < this.frpas * this.frpas)\r\n                {\r\n                    if (Math.abs(this.Rr[_loc_1]) < this.Rfppas)\r\n                    {\r\n                        this.etat[_loc_1] = this.ARRET;\r\n                        var _loc_2 = 0;\r\n                        this.Vy[_loc_1] = 0;\r\n                        this.Vx[_loc_1] = _loc_2;\r\n                        var _loc_2 = 0;\r\n                        this.Rr[_loc_1] = 0;\r\n                        this.Rq[_loc_1] = _loc_2;\r\n                        this.Rp[_loc_1] = _loc_2;\r\n                    }\r\n                    else\r\n                    {\r\n                        this.etat[_loc_1] = this.TSP;\r\n                        return false;\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    return false;\r\n                }\r\n            }\r\n            _loc_1++;\r\n        }\r\n        return true;\r\n    }// end function\r\n\r\n    Calcul = (param1) => {\r\n        console.log('parameter', param1)\r\n        var _loc_2 = 0;\r\n        var _loc_3 = 0;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_4 = [];\r\n        _loc_2 = 0;\r\n        while (_loc_2 < 3)\r\n        {\r\n            \r\n            this.nb_clefs[_loc_2] = 0;\r\n            _loc_3 = 0;\r\n            while (_loc_3 < this.nb_max_clefs)\r\n            {\r\n                \r\n                this.evts[this.nb_max_clefs * _loc_2 + _loc_3] = null;\r\n                _loc_3++;\r\n            }\r\n            _loc_2++;\r\n        }\r\n        this.nb_sons = 0;\r\n        _loc_2 = 0;\r\n        while (_loc_2 < this.nb_max_sons)\r\n        {\r\n            \r\n            this.evts_son[_loc_2] = null;\r\n            _loc_2++;\r\n        }\r\n        _loc_2 = 0;\r\n        while (_loc_2 < 3)\r\n        {\r\n            \r\n            this.X[_loc_2] = param1.Xinit[_loc_2];\r\n            this.Y[_loc_2] = param1.Yinit[_loc_2];\r\n            this.RAp[_loc_2] = param1.RApInit[_loc_2];\r\n            this.RAq[_loc_2] = param1.RAqInit[_loc_2];\r\n            this.RAr[_loc_2] = param1.RArInit[_loc_2];\r\n            this.add_clef(_loc_2);\r\n            _loc_2++;\r\n        }\r\n        this.el = param1.el;\r\n        this.er = param1.er;\r\n        this.alph = param1.alphaQ;\r\n        this.beta = param1.betaQ;\r\n        this.vqueue = param1.Vqueue;\r\n        this.calculs_finis = false;\r\n        this.nbandes = 0;\r\n        this.done = false;\r\n        this.distance13 = 2;\r\n        this.first_bille_choquee = 0;\r\n        this.choc12 = false;\r\n        this.choc13 = false;\r\n        this.done = false;\r\n        this.deltaclef = this.resolution;\r\n        this.date = 0;\r\n        this.beta = this.beta + Math.PI;\r\n        this.Vinit = 1.4 * this.vqueue * Math.cos(this.alph / 1.2);\r\n        _loc_5 = -2 * this.Vinit / Math.cos(this.alph / 1.1) * this.er / this.R;\r\n\r\n        var _loc_7 = Math.PI / 20;\r\n        if (this.alph > _loc_7)\r\n        {\r\n            _loc_8 = Math.PI / 2 / (Math.PI / 2 - _loc_7) * (this.alph - _loc_7);\r\n        }\r\n        else\r\n        {\r\n            _loc_8 = 0;\r\n        }\r\n        _loc_6 = 4 * this.vqueue * Math.sin(_loc_8) * this.el / this.R;\r\n        \r\n        this.Vx[0] = this.Vinit * Math.cos(this.beta);\r\n        this.Vx0 = this.Vx[0];\r\n        this.Vy[0] = this.Vinit * Math.sin(this.beta);\r\n        this.Vy0 = this.Vy[0];\r\n        var _loc_9 = _loc_5 * Math.sin(this.beta) + _loc_6 * Math.cos(this.beta);\r\n        this.Rp[0] = _loc_5 * Math.sin(this.beta) + _loc_6 * Math.cos(this.beta);\r\n        this.p0 = _loc_9;\r\n        var _loc_9 = (-_loc_5) * Math.cos(this.beta) + _loc_6 * Math.sin(this.beta);\r\n        this.Rq[0] = (-_loc_5) * Math.cos(this.beta) + _loc_6 * Math.sin(this.beta);\r\n        this.q0 = _loc_9;\r\n        var _loc_9 = 2 * this.el / this.R * this.Vinit;\r\n        this.Rr[0] = 2 * this.el / this.R * this.Vinit;\r\n        this.r0 = _loc_9;\r\n\r\n        this.VQx[0] = this.Vx[0] - this.Rq[0];\r\n        this.VQy[0] = this.Vy[0] + this.Rp[0];\r\n        this.etat[0] = this.QCQ;\r\n\r\n        _loc_2 = 1;\r\n        while (_loc_2 < 3)\r\n        {\r\n            \r\n            this.Vx[_loc_2] = 0;\r\n            this.Vy[_loc_2] = 0;\r\n            this.VQx[_loc_2] = 0;\r\n            this.VQy[_loc_2] = 0;\r\n            this.Rp[_loc_2] = 0;\r\n            this.Rq[_loc_2] = 0;\r\n            this.Rr[_loc_2] = 0;\r\n            this.etat[_loc_2] = this.ARRET;\r\n            this.add_clef(_loc_2);\r\n            _loc_2++;\r\n        }\r\n        this.evts_son[this.nb_sons] = new son();\r\n        this.evts_son[this.nb_sons].played = false;\r\n        this.evts_son[this.nb_sons].temps = 0;\r\n        this.evts_son[this.nb_sons].intensite = this.Vinit / 5.4;\r\n        \r\n        if (this.alph > Math.PI / 4)\r\n        {\r\n            this.evts_son[this.nb_sons].type_choc = 0;\r\n        }\r\n        else\r\n        {\r\n            this.evts_son[this.nb_sons].type_choc = 1;\r\n        }\r\n        // this.nb_sons += 1;\r\n        while (!this.fin_parcours())\r\n        {\r\n            this.date += 1;\r\n            if (this.choc_billes(_loc_4))\r\n            {\r\n            }\r\n            _loc_2 = 0;\r\n            while (_loc_2 < 3)\r\n            {\r\n                if (this.etat[_loc_2] != this.ARRET)\r\n                {\r\n                    if (this.choc_bande(_loc_2))\r\n                    {\r\n                        this.add_clef(_loc_2);\r\n                        this.evts_son[this.nb_sons] = new son();\r\n                        this.evts_son[this.nb_sons].played = false;\r\n                        this.evts_son[this.nb_sons].temps = this.date * this.pas;\r\n                        this.evts_son[this.nb_sons].intensite = this.intens;\r\n                        this.evts_son[this.nb_sons].type_choc = 3;\r\n                        var _loc_9 = this;\r\n                        var _loc_10 = this.nb_sons + 1;\r\n                        _loc_9.nb_sons = _loc_10;\r\n                    }\r\n                    if (this.mise_a_jour(_loc_2))\r\n                    {\r\n                        this.add_clef(_loc_2);\r\n                    }\r\n                }\r\n                if (Math.abs(this.X[_loc_2] - this.X0[_loc_2]) > this.deltaclef || Math.abs(this.Y[_loc_2] - this.Y0[_loc_2]) > this.deltaclef || Math.abs(this.RAp[_loc_2] - this.RAp0[_loc_2]) > this.deltaclefRot || Math.abs(this.RAq[_loc_2] - this.RAq0[_loc_2]) > this.deltaclefRot || Math.abs(this.RAr[_loc_2] - this.RAr0[_loc_2]) > this.deltaclefRot)\r\n                {\r\n                    this.add_clef(_loc_2);\r\n                }\r\n                _loc_2++;\r\n            }\r\n        }\r\n        if (this.fin_parcours())\r\n        {\r\n            this.calculs_finis = true;\r\n            for (var _loc_2 = 0; _loc_2 < 3; _loc_2++)\r\n            {\r\n                \r\n                this.Xfin[_loc_2] = this.X[_loc_2];\r\n                this.Yfin[_loc_2] = this.Y[_loc_2];\r\n                this.RApfin[_loc_2] = this.RAp[_loc_2];\r\n                this.RAqfin[_loc_2] = this.RAq[_loc_2];\r\n                this.RArfin[_loc_2] = this.RAr[_loc_2];\r\n                this.add_clef(_loc_2);\r\n            }\r\n            this.duree = this.date * this.pas;\r\n        }\r\n        else\r\n        {\r\n            for (_loc_2 = 0; _loc_2 < 3; _loc_2++)\r\n            {\r\n                this.add_clef(_loc_2);\r\n            }\r\n        }\r\n        \r\n        return this.evts;\r\n    }\r\n\r\n    mise_a_jour = (param1) => {\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = false;\r\n        if (this.first_bille_choquee != 0)\r\n        {\r\n            this.nb3 = 3 - this.first_bille_choquee;\r\n            this.d13 = Math.sqrt((this.X[0] - this.X[this.nb3]) * (this.X[0] - this.X[this.nb3]) + (this.Y[0] - this.Y[this.nb3]) * (this.Y[0] - this.Y[this.nb3]));\r\n            if (this.d13 < this.distance13)\r\n            {\r\n                this.distance13 = this.d13;\r\n            }\r\n        }\r\n        if (this.etat[param1] == this.RSG)\r\n        {\r\n            _loc_2 = Math.sqrt(this.Vx[param1] * this.Vx[param1] + this.Vy[param1] * this.Vy[param1]);\r\n            if (_loc_2 < this.frpas)\r\n            {\r\n                var _loc_8 = 0;\r\n                this.Vy[param1] = 0;\r\n                this.Vx[param1] = _loc_8;\r\n                var _loc_8 = 0;\r\n                this.Rq[param1] = 0;\r\n                this.Rp[param1] = _loc_8;\r\n                if (Math.abs(this.Rr[param1]) < this.Rfppas)\r\n                {\r\n                    this.etat[param1] = this.ARRET;\r\n                    this.Rr[param1] = 0;\r\n                    this.add_clef(param1);\r\n                    return true;\r\n                }\r\n                this.etat[param1] = this.TSP;\r\n            }\r\n            if (this.etat[param1] != this.TSP)\r\n            {\r\n                _loc_3 = 1 - this.frpas / _loc_2;\r\n                this.Vx[param1] = this.Vx[param1] * _loc_3;\r\n                this.Vy[param1] = this.Vy[param1] * _loc_3;\r\n                this.Rp[param1] = -this.Vy[param1];\r\n                this.Rq[param1] = this.Vx[param1];\r\n            }\r\n            if (Math.abs(this.Rr[param1]) < this.Rfppas)\r\n            {\r\n                this.Rr[param1] = 0;\r\n            }\r\n            else if (this.Rr[param1] > 0)\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] - this.Rfppas;\r\n            }\r\n            else\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] + this.Rfppas;\r\n            }\r\n        }\r\n        if (this.etat[param1] == this.QCQ)\r\n        {\r\n            _loc_4 = Math.sqrt(this.VQx[param1] * this.VQx[param1] + this.VQy[param1] * this.VQy[param1]);\r\n            if (_loc_4 < this.delta_fgpas)\r\n            {\r\n                this.etat[param1] = this.RSG;\r\n            }\r\n            else\r\n            {\r\n                _loc_5 = (-this.fgpas) * this.VQx[param1] / _loc_4;\r\n                _loc_6 = (-this.fgpas) * this.VQy[param1] / _loc_4;\r\n                this.Vx[param1] = this.Vx[param1] + _loc_5;\r\n                this.Vy[param1] = this.Vy[param1] + _loc_6;\r\n                _loc_3 = 1 - this.delta_fgpas / _loc_4;\r\n                this.VQx[param1] = this.VQx[param1] * _loc_3;\r\n                this.VQy[param1] = this.VQy[param1] * _loc_3;\r\n            }\r\n            this.Rp[param1] = -this.Vy[param1] + this.VQy[param1];\r\n            this.Rq[param1] = this.Vx[param1] - this.VQx[param1];\r\n            if (Math.abs(this.Rr[param1]) < this.Rfppas)\r\n            {\r\n                this.Rr[param1] = 0;\r\n            }\r\n            else if (this.Rr[param1] > 0)\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] - this.Rfppas;\r\n            }\r\n            else\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] + this.Rfppas;\r\n            }\r\n        }\r\n        if (this.etat[param1] == this.TSP)\r\n        {\r\n            var _loc_8 = 0;\r\n            this.Vy[param1] = 0;\r\n            this.Vx[param1] = _loc_8;\r\n            var _loc_8 = 0;\r\n            this.Rq[param1] = 0;\r\n            this.Rp[param1] = _loc_8;\r\n            if (Math.abs(this.Rr[param1]) < this.Rfppas)\r\n            {\r\n                this.Rr[param1] = 0;\r\n                this.etat[param1] = this.ARRET;\r\n                return true;\r\n            }\r\n            if (this.Rr[param1] > 0)\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] - 2 * this.Rfppas;\r\n            }\r\n            else\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] + 2 * this.Rfppas;\r\n            }\r\n        }\r\n        this.X[param1] = this.X[param1] + this.Vx[param1] * this.pas;\r\n        this.Y[param1] = this.Y[param1] + this.Vy[param1] * this.pas;\r\n        this.RAp[param1] = this.RAp[param1] + this.Rp[param1] * this.pas;\r\n        this.RAq[param1] = this.RAq[param1] + this.Rq[param1] * this.pas;\r\n        this.RAr[param1] = this.RAr[param1] + this.Rr[param1] * this.pas;\r\n        return false;\r\n    }\r\n\r\n    choc_gliss = (param1) => {\r\n        if (this.VMz > 0)\r\n        {\r\n            this.VT = this.VT - this.beta_gliss * Math.cos(this.alpha_bande);\r\n            this.VRr = this.VRr + 2.5 * this.beta_gliss * Math.cos(this.alpha_bande);\r\n        }\r\n        else\r\n        {\r\n            this.VT = this.VT + this.beta_gliss * Math.cos(this.alpha_bande);\r\n            this.VRr = this.VRr - 2.5 * this.beta_gliss * Math.cos(this.alpha_bande);\r\n        }\r\n        return;\r\n    }\r\n\r\n    choc_adh = (param1) => {\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_9 = NaN;\r\n        var _loc_10 = 0;\r\n        if (Math.abs(this.VT) < 1e-005)\r\n        {\r\n            _loc_2 = 90;\r\n        }\r\n        else\r\n        {\r\n            _loc_2 = 180 / Math.PI * Math.atan(this.VN0 / this.VT);\r\n        }\r\n        this.effet = 100 * this.R / 2 * this.VRr / Math.sqrt(this.VN0 * this.VN0 + this.VT * this.VT);\r\n        if (this.effet <= -1.5)\r\n        {\r\n            this.effet = -1.499;\r\n        }\r\n        else if (this.effet > 1.5)\r\n        {\r\n            this.effet = 1.499;\r\n        }\r\n        if (Math.abs(this.VT) < 1e-005)\r\n        {\r\n            if (this.effet > 0)\r\n            {\r\n                _loc_3 = this.sorties[9 * 3 + 1] + (this.sorties[9 * 3 + 2] - this.sorties[9 * 3 + 1]) * (this.effet / 1.5);\r\n            }\r\n            else\r\n            {\r\n                _loc_3 = this.sorties[9 * 3] + (this.sorties[9 * 3 + 1] - this.sorties[9 * 3]) * (this.effet + 1.5) / 1.5;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            _loc_2 = 180 / Math.PI * Math.atan(this.VN0 / this.VT);\r\n            _loc_10 = parseInt(_loc_2 / 10);\r\n            if (this.effet > 0)\r\n            {\r\n                _loc_4 = this.sorties[3 * _loc_10 + 1] + (this.sorties[3 * _loc_10 + 2] - this.sorties[3 * _loc_10 + 1]) * (this.effet / 1.5);\r\n            }\r\n            else\r\n            {\r\n                _loc_4 = this.sorties[3 * _loc_10 + 0] + (this.sorties[3 * _loc_10 + 1] - this.sorties[3 * _loc_10 + 0]) * (this.effet + 1.5) / 1.5;\r\n            }\r\n            if (this.effet > 0)\r\n            {\r\n                _loc_5 = this.sorties[3 * (_loc_10 + 1) + 1] + (this.sorties[3 * (_loc_10 + 1) + 2] - this.sorties[3 * (_loc_10 + 1) + 1]) * (this.effet / 1.5);\r\n            }\r\n            else\r\n            {\r\n                _loc_5 = this.sorties[3 * (_loc_10 + 1) + 0] + (this.sorties[3 * (_loc_10 + 1) + 1] - this.sorties[3 * (_loc_10 + 1) + 0]) * (this.effet + 1.5) / 1.5;\r\n            }\r\n            _loc_3 = _loc_4 + (_loc_5 - _loc_4) / 10 * (_loc_2 - 10 * _loc_10);\r\n        }\r\n        if (Math.abs(_loc_3 - 90) < 1e-005)\r\n        {\r\n            this.VT = 0;\r\n        }\r\n        else if (_loc_3 < 90)\r\n        {\r\n            this.VT = this.VN / Math.tan(_loc_3 / 180 * Math.PI);\r\n        }\r\n        else\r\n        {\r\n            this.VT = (-this.VN) * Math.tan((_loc_3 - 90) / 180 * Math.PI);\r\n        }\r\n        if (Math.abs(this.VT) < 1e-005)\r\n        {\r\n            if (this.effet > 0)\r\n            {\r\n                this.e_s = this.eff_s[9 * 3 + 1] + (this.eff_s[9 * 3 + 2] - this.eff_s[9 * 3 + 1]) * (this.effet / 1.5);\r\n            }\r\n            else\r\n            {\r\n                this.e_s = this.eff_s[9 * 3 + 0] + (this.eff_s[9 * 3 + 1] - this.eff_s[9 * 3 + 0]) * (this.effet + 1.5) / 1.5;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if (this.effet > 0)\r\n            {\r\n                _loc_6 = this.eff_s[3 * _loc_10 + 1] + (this.eff_s[3 * _loc_10 + 2] - this.eff_s[3 * _loc_10 + 1]) * (this.effet / 1.5);\r\n                _loc_7 = this.eff_s[3 * (_loc_10 + 1) + 1] + (this.eff_s[3 * (_loc_10 + 1) + 2] - this.eff_s[3 * (_loc_10 + 1) + 1]) * (this.effet / 1.5);\r\n            }\r\n            else\r\n            {\r\n                _loc_6 = this.eff_s[3 * _loc_10 + 0] + (this.eff_s[3 * _loc_10 + 1] - this.eff_s[3 * _loc_10 + 0]) * (this.effet + 1.5) / 1.5;\r\n                _loc_7 = this.eff_s[3 * (_loc_10 + 1) + 0] + (this.eff_s[3 * (_loc_10 + 1) + 1] - this.eff_s[3 * (_loc_10 + 1) + 0]) * (this.effet + 1.5) / 1.5;\r\n            }\r\n            this.e_s = _loc_6 + (_loc_7 - _loc_6) / 10 * (_loc_2 - 10 * _loc_10);\r\n        }\r\n        _loc_9 = (5 * this.VN + 2 * this.VRq) / 7;\r\n        _loc_8 = (5 * this.VT - 2 * this.VRp) / 7;\r\n        this.VRr = 0.02 * this.e_s / this.R * Math.sqrt(_loc_9 * _loc_9 + _loc_8 * _loc_8);\r\n        return;\r\n    }\r\n\r\n    recup_pars = (param1) => {\r\n        if (this.X[param1] > this.XMAX && this.Vx[param1] > 0)\r\n        {\r\n            this.Vx[param1] = -this.VN;\r\n            this.Rq[param1] = -this.VRq;\r\n            if (this.Vy[param1] > 0)\r\n            {\r\n                this.Vy[param1] = this.VT;\r\n                this.Rp[param1] = this.VRp;\r\n                this.Rr[param1] = -this.VRr;\r\n            }\r\n            else\r\n            {\r\n                this.Vy[param1] = -this.VT;\r\n                this.Rp[param1] = -this.VRp;\r\n                this.Rr[param1] = this.VRr;\r\n            }\r\n        }\r\n        if (this.X[param1] < this.XMIN && this.Vx[param1] < 0)\r\n        {\r\n            this.Vx[param1] = this.VN;\r\n            this.Rq[param1] = this.VRq;\r\n            if (this.Vy[param1] > 0)\r\n            {\r\n                this.Vy[param1] = this.VT;\r\n                this.Rp[param1] = this.VRp;\r\n                this.Rr[param1] = this.VRr;\r\n            }\r\n            else\r\n            {\r\n                this.Vy[param1] = -this.VT;\r\n                this.Rp[param1] = -this.VRp;\r\n                this.Rr[param1] = -this.VRr;\r\n            }\r\n        }\r\n        if (this.Y[param1] < this.YMIN && this.Vy[param1] < 0)\r\n        {\r\n            this.Vy[param1] = this.VN;\r\n            this.Rp[param1] = -this.VRq;\r\n            if (this.Vx[param1] > 0)\r\n            {\r\n                this.Vx[param1] = this.VT;\r\n                this.Rq[param1] = -this.VRp;\r\n                this.Rr[param1] = -this.VRr;\r\n            }\r\n            else\r\n            {\r\n                this.Vx[param1] = -this.VT;\r\n                this.Rq[param1] = this.VRp;\r\n                this.Rr[param1] = this.VRr;\r\n            }\r\n        }\r\n        if (this.Y[param1] > this.YMAX && this.Vy[param1] > 0)\r\n        {\r\n            this.Vy[param1] = -this.VN;\r\n            this.Rp[param1] = this.VRq;\r\n            if (this.Vx[param1] > 0)\r\n            {\r\n                this.Vx[param1] = this.VT;\r\n                this.Rq[param1] = -this.VRp;\r\n                this.Rr[param1] = this.VRr;\r\n            }\r\n            else\r\n            {\r\n                this.Vx[param1] = -this.VT;\r\n                this.Rq[param1] = this.VRp;\r\n                this.Rr[param1] = -this.VRr;\r\n            }\r\n        }\r\n        return;\r\n    }\r\n\r\n    init_pars = (param1) => {\r\n        if (this.X[param1] > this.XMAX && this.Vx[param1] > 0)\r\n        {\r\n            this.VN = -this.Vx[param1];\r\n            this.VRq = -this.Rq[param1];\r\n            if (this.Vy[param1] > 0)\r\n            {\r\n                this.VT = this.Vy[param1];\r\n                this.VRp = this.Rp[param1];\r\n                this.VRr = -this.Rr[param1];\r\n            }\r\n            else\r\n            {\r\n                this.VT = -this.Vy[param1];\r\n                this.VRp = -this.Rp[param1];\r\n                this.VRr = this.Rr[param1];\r\n            }\r\n        }\r\n        if (this.X[param1] < this.XMIN && this.Vx[param1] < 0)\r\n        {\r\n            this.VN = this.Vx[param1];\r\n            this.VRq = this.Rq[param1];\r\n            if (this.Vy[param1] > 0)\r\n            {\r\n                this.VT = this.Vy[param1];\r\n                this.VRp = this.Rp[param1];\r\n                this.VRr = this.Rr[param1];\r\n            }\r\n            else\r\n            {\r\n                this.VT = -this.Vy[param1];\r\n                this.VRp = -this.Rp[param1];\r\n                this.VRr = -this.Rr[param1];\r\n            }\r\n        }\r\n        if (this.Y[param1] < this.YMIN && this.Vy[param1] < 0)\r\n        {\r\n            this.VN = this.Vy[param1];\r\n            this.VRq = -this.Rp[param1];\r\n            if (this.Vx[param1] > 0)\r\n            {\r\n                this.VT = this.Vx[param1];\r\n                this.VRp = -this.Rq[param1];\r\n                this.VRr = -this.Rr[param1];\r\n            }\r\n            else\r\n            {\r\n                this.VT = -this.Vx[param1];\r\n                this.VRp = this.Rq[param1];\r\n                this.VRr = this.Rr[param1];\r\n            }\r\n        }\r\n        if (this.Y[param1] > this.YMAX && this.Vy[param1] > 0)\r\n        {\r\n            this.VN = -this.Vy[param1];\r\n            this.VRq = this.Rp[param1];\r\n            if (this.Vx[param1] > 0)\r\n            {\r\n                this.VT = this.Vx[param1];\r\n                this.VRp = -this.Rq[param1];\r\n                this.VRr = this.Rr[param1];\r\n            }\r\n            else\r\n            {\r\n                this.VT = -this.Vx[param1];\r\n                this.VRp = this.Rq[param1];\r\n                this.VRr = -this.Rr[param1];\r\n            }\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    add_clef = (param1) => {\r\n        var _loc_2 = 0;\r\n        var _loc_3 = this.nb_max_clefs * param1 + this.nb_clefs[param1];\r\n        this.evts[_loc_3] = new evt();\r\n        this.evts[_loc_3].X = this.X[param1];\r\n        this.evts[_loc_3].Y = this.Y[param1];\r\n        this.evts[_loc_3].RAp = this.RAp[param1];\r\n        this.evts[_loc_3].RAq = this.RAq[param1];\r\n        this.evts[_loc_3].RAr = this.RAr[param1];\r\n        this.evts[_loc_3].time = this.date * this.pas;\r\n        var _loc_4 = this.nb_clefs;\r\n        var _loc_5 = param1;\r\n        var _loc_6 = _loc_4[param1] + 1;\r\n        _loc_4[_loc_5] = _loc_6;\r\n        this.X0[param1] = this.X[param1];\r\n        this.Y0[param1] = this.Y[param1];\r\n        this.RAp0[param1] = this.RAp[param1];\r\n        this.RAq0[param1] = this.RAq[param1];\r\n        this.RAr0[param1] = this.RAr[param1];\r\n        return;\r\n    }// end function\r\n\r\n    choc_billes = (param1) => {\r\n        var _loc_3 = 0;\r\n        var _loc_4 = 0;\r\n        var _loc_6 = false;\r\n        var _loc_7 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_9 = NaN;\r\n        var _loc_10 = NaN;\r\n        var _loc_11 = NaN;\r\n        var _loc_12 = NaN;\r\n        var _loc_13 = NaN;\r\n        var _loc_14 = NaN;\r\n        var _loc_15 = NaN;\r\n        var _loc_16 = NaN;\r\n        var _loc_17 = NaN;\r\n        var _loc_18 = NaN;\r\n        var _loc_19 = NaN;\r\n        var _loc_20 = NaN;\r\n        var _loc_21 = NaN;\r\n        var _loc_22 = NaN;\r\n        var _loc_23 = NaN;\r\n        var _loc_24 = NaN;\r\n        var _loc_25 = NaN;\r\n        var _loc_26 = NaN;\r\n        var _loc_27 = NaN;\r\n        var _loc_28 = 0;\r\n        var _loc_2 = false;\r\n        var _loc_5 = [];\r\n        _loc_3 = 0;\r\n        while (_loc_3 < 3)\r\n        {\r\n            \r\n            _loc_5[_loc_3] = false;\r\n            _loc_3++;\r\n        }\r\n        _loc_3 = 0;\r\n        while (_loc_3 < 3)\r\n        {\r\n            \r\n            if (!_loc_5[_loc_3])\r\n            {\r\n                _loc_6 = false;\r\n                _loc_4 = (_loc_3 + 1) % 3;\r\n                _loc_7 = (this.X[_loc_3] - this.X[_loc_4]) * (this.X[_loc_3] - this.X[_loc_4]) + (this.Y[_loc_3] - this.Y[_loc_4]) * (this.Y[_loc_3] - this.Y[_loc_4]);\r\n                if (_loc_7 < this.D * this.D && (this.etat[_loc_3] != this.ARRET || this.etat[_loc_4] != this.ARRET))\r\n                {\r\n                    if ((this.Vx[_loc_3] - this.Vx[_loc_4]) * (this.X[_loc_4] - this.X[_loc_3]) + (this.Vy[_loc_3] - this.Vy[_loc_4]) * (this.Y[_loc_4] - this.Y[_loc_3]) > 0)\r\n                    {\r\n                        _loc_6 = true;\r\n                        _loc_2 = true;\r\n                        if (!this.choc12 && !this.choc13 && _loc_3 == 0)\r\n                        {\r\n                            this.first_bille_choquee = _loc_4;\r\n                        }\r\n                        if (_loc_3 == 0 && _loc_4 == 1)\r\n                        {\r\n                            this.choc12 = true;\r\n                        }\r\n                        if (_loc_3 == 2 && _loc_4 == 0)\r\n                        {\r\n                            this.choc13 = true;\r\n                        }\r\n                        param1[0] = _loc_3;\r\n                        param1[1] = _loc_4;\r\n                    }\r\n                }\r\n                if (!_loc_6)\r\n                {\r\n                    _loc_4 = (_loc_3 + 2) % 3;\r\n                    _loc_7 = (this.X[_loc_3] - this.X[_loc_4]) * (this.X[_loc_3] - this.X[_loc_4]) + (this.Y[_loc_3] - this.Y[_loc_4]) * (this.Y[_loc_3] - this.Y[_loc_4]);\r\n                    if (_loc_7 < this.D * this.D && (this.etat[_loc_3] != this.ARRET || this.etat[_loc_4] != this.ARRET))\r\n                    {\r\n                        if ((this.Vx[_loc_3] - this.Vx[_loc_4]) * (this.X[_loc_4] - this.X[_loc_3]) + (this.Vy[_loc_3] - this.Vy[_loc_4]) * (this.Y[_loc_4] - this.Y[_loc_3]) > 0)\r\n                        {\r\n                            _loc_6 = true;\r\n                            _loc_2 = true;\r\n                            if (!this.choc12 && !this.choc13 && _loc_3 == 0)\r\n                            {\r\n                                this.first_bille_choquee = _loc_4;\r\n                            }\r\n                            if (_loc_3 == 1 && _loc_4 == 0)\r\n                            {\r\n                                this.choc12 = true;\r\n                            }\r\n                            if (_loc_3 == 0 && _loc_4 == 2)\r\n                            {\r\n                                this.choc13 = true;\r\n                            }\r\n                            param1[0] = _loc_3;\r\n                            param1[1] = _loc_4;\r\n                        }\r\n                    }\r\n                }\r\n                if (_loc_6)\r\n                {\r\n                    this.add_clef(_loc_3);\r\n                    this.add_clef(_loc_4);\r\n                    _loc_5[_loc_3] = true;\r\n                    if (this.etat[_loc_3] == this.RSG)\r\n                    {\r\n                        this.Rp[_loc_3] = -this.Vy[_loc_3];\r\n                        this.Rq[_loc_3] = this.Vx[_loc_3];\r\n                    }\r\n                    if (this.etat[_loc_3] == this.QCQ)\r\n                    {\r\n                        this.Rp[_loc_3] = -this.Vy[_loc_3] + this.VQy[_loc_3];\r\n                        this.Rq[_loc_3] = this.Vx[_loc_3] - this.VQx[_loc_3];\r\n                    }\r\n                    if (this.etat[_loc_3] == this.ARRET)\r\n                    {\r\n                        this.Rp[_loc_3] = 0;\r\n                        this.Rq[_loc_3] = 0;\r\n                    }\r\n                    _loc_5[_loc_4] = true;\r\n                    if (this.etat[_loc_4] == this.RSG)\r\n                    {\r\n                        this.Rp[_loc_4] = -this.Vy[_loc_4];\r\n                        this.Rq[_loc_4] = this.Vx[_loc_4];\r\n                    }\r\n                    if (this.etat[_loc_4] == this.QCQ)\r\n                    {\r\n                        this.Rp[_loc_4] = -this.Vy[_loc_4] + this.VQy[_loc_4];\r\n                        this.Rq[_loc_4] = this.Vx[_loc_4] - this.VQx[_loc_4];\r\n                    }\r\n                    if (this.etat[_loc_4] == this.ARRET)\r\n                    {\r\n                        this.Rp[_loc_4] = 0;\r\n                        this.Rq[_loc_4] = 0;\r\n                    }\r\n                    _loc_17 = this.Vx[_loc_3] * (this.X[_loc_4] - this.X[_loc_3]) + this.Vy[_loc_3] * (this.Y[_loc_4] - this.Y[_loc_3]);\r\n                    _loc_9 = _loc_17 * (this.X[_loc_4] - this.X[_loc_3]) / _loc_7;\r\n                    _loc_10 = _loc_17 * (this.Y[_loc_4] - this.Y[_loc_3]) / _loc_7;\r\n                    _loc_11 = this.Vx[_loc_3] - _loc_9;\r\n                    _loc_12 = this.Vy[_loc_3] - _loc_10;\r\n                    _loc_18 = this.Vx[_loc_4] * (this.X[_loc_3] - this.X[_loc_4]) + this.Vy[_loc_4] * (this.Y[_loc_3] - this.Y[_loc_4]);\r\n                    _loc_13 = _loc_18 * (this.X[_loc_3] - this.X[_loc_4]) / _loc_7;\r\n                    _loc_14 = _loc_18 * (this.Y[_loc_3] - this.Y[_loc_4]) / _loc_7;\r\n                    _loc_15 = this.Vx[_loc_4] - _loc_13;\r\n                    _loc_16 = this.Vy[_loc_4] - _loc_14;\r\n                    _loc_20 = _loc_9 - _loc_13;\r\n                    _loc_21 = _loc_10 - _loc_14;\r\n                    this.intens = (_loc_20 * _loc_20 + _loc_21 * _loc_21) / 5;\r\n                    if (this.intens > 1)\r\n                    {\r\n                        this.intens = 1;\r\n                    }\r\n                    this.evts_son[this.nb_sons] = new son();\r\n                    this.evts_son[this.nb_sons].played = false;\r\n                    this.evts_son[this.nb_sons].temps = this.date * this.pas;\r\n                    this.evts_son[this.nb_sons].intensite = this.intens;\r\n                    this.evts_son[this.nb_sons].type_choc = 2;\r\n                    var _loc_29 = this;\r\n                    var _loc_30 = this.nb_sons + 1;\r\n                    _loc_29.nb_sons = _loc_30;\r\n                    _loc_19 = _loc_9;\r\n                    _loc_9 = _loc_13;\r\n                    _loc_13 = _loc_19;\r\n                    _loc_13 = _loc_13 * this.RendementChoc;\r\n                    _loc_9 = _loc_9 * this.RendementChoc;\r\n                    _loc_19 = _loc_10;\r\n                    _loc_10 = _loc_14;\r\n                    _loc_14 = _loc_19;\r\n                    _loc_14 = _loc_14 * this.RendementChoc;\r\n                    _loc_10 = _loc_10 * this.RendementChoc;\r\n                    this.Vx[_loc_3] = _loc_9 + _loc_11;\r\n                    this.Vy[_loc_3] = _loc_10 + _loc_12;\r\n                    this.VQx[_loc_3] = this.Vx[_loc_3] - this.Rq[_loc_3];\r\n                    this.VQy[_loc_3] = this.Vy[_loc_3] + this.Rp[_loc_3];\r\n                    if (this.etat[_loc_4] == this.ARRET)\r\n                    {\r\n                        this.Vx[_loc_4] = this.Vx[_loc_4] * 0.94;\r\n                        this.Vy[_loc_4] = this.Vy[_loc_4] * 0.94;\r\n                        _loc_8 = Math.sqrt(_loc_7);\r\n                        _loc_17 = _loc_17 / _loc_8;\r\n                        _loc_17 = Math.abs(_loc_17);\r\n                        _loc_26 = this.fbille * _loc_17;\r\n                        _loc_22 = Math.abs(this.Rp[_loc_3] * (this.Y[_loc_4] - this.Y[_loc_3]) - this.Rq[_loc_3] * (this.X[_loc_4] - this.X[_loc_3])) / _loc_8;\r\n                        _loc_24 = (this.Vx[_loc_3] * (this.Y[_loc_4] - this.Y[_loc_3]) - this.Vy[_loc_3] * (this.X[_loc_4] - this.X[_loc_3])) / _loc_8;\r\n                        _loc_25 = _loc_24 - this.Rr[_loc_3];\r\n                        if (Math.abs(_loc_25) < 1e-005)\r\n                        {\r\n                            _loc_23 = Math.PI / 2;\r\n                        }\r\n                        else\r\n                        {\r\n                            _loc_23 = Math.abs(Math.atan(_loc_22 / _loc_25));\r\n                        }\r\n                        if (_loc_25 > 0)\r\n                        {\r\n                            _loc_28 = 1;\r\n                        }\r\n                        else\r\n                        {\r\n                            _loc_28 = -1;\r\n                        }\r\n                        _loc_27 = _loc_28 * _loc_26 * Math.cos(_loc_23);\r\n                        this.Rr[_loc_4] = 2.5 * _loc_27;\r\n                        this.Rr[_loc_3] = this.Rr[_loc_3] - 2.5 * _loc_27;\r\n                        _loc_15 = _loc_27 * (this.Y[_loc_4] - this.Y[_loc_3]) / _loc_8;\r\n                        _loc_16 = (-_loc_27) * (this.X[_loc_4] - this.X[_loc_3]) / _loc_8;\r\n                    }\r\n                    this.Vx[_loc_4] = _loc_13 + _loc_15;\r\n                    this.Vy[_loc_4] = _loc_14 + _loc_16;\r\n                    this.VQx[_loc_4] = this.Vx[_loc_4] - this.Rq[_loc_4];\r\n                    this.VQy[_loc_4] = this.Vy[_loc_4] + this.Rp[_loc_4];\r\n                    this.etat[_loc_4] = this.QCQ;\r\n                    this.etat[_loc_3] = this.QCQ;\r\n                }\r\n            }\r\n            _loc_3++;\r\n        }\r\n        return _loc_2;\r\n    }// end function\r\n}","export default class parametres {\r\n    noba;\r\n    NBILLES;\r\n    quant;\r\n    RApInit = [];\r\n    RArInit = [];\r\n    larg_billard;\r\n    RAqInit = [];\r\n    betaQ;\r\n    el;\r\n    Xinit = [];\r\n    Yinit = [];\r\n    er;\r\n    HBande = 0.035;\r\n    long_billard;\r\n    alphaQ;\r\n    Vqueue;\r\n    bille_visee;\r\n\r\n    constructor (param1, param2) {\r\n        var _loc_3 = 0;\r\n        this.NBILLES = 3;\r\n        this.long_billard = param1;\r\n        this.larg_billard = param2;\r\n        this.Xinit = [];\r\n        this.Yinit = [];\r\n        this.RApInit = [];\r\n        this.RAqInit = [];\r\n        this.RArInit = [];\r\n        _loc_3 = 0;\r\n        while (_loc_3 < 3)\r\n        {\r\n            \r\n            this.RApInit[_loc_3] = 0;\r\n            this.RAqInit[_loc_3] = 0;\r\n            this.RArInit[_loc_3] = 0;\r\n            _loc_3++;\r\n        }\r\n        this.Xinit[0] = -0.71;\r\n        this.Yinit[0] = -0.1775;\r\n        this.Xinit[1] = -0.71;\r\n        this.Yinit[1] = 0;\r\n        this.Xinit[2] = 0.71;\r\n        this.Yinit[2] = 0;\r\n        this.Vqueue = 0.08;\r\n        this.el = 0;\r\n        this.er = 0.012;\r\n        this.alphaQ = 0;\r\n        this.betaQ = 0 * Math.PI / 4;\r\n        this.Vqueue = 3.19731;\r\n        this.el = 0.0056;\r\n        this.er = 0.004;\r\n        this.alphaQ = 0.033916;\r\n        this.betaQ = 3.28339;\r\n        this.Xinit[0] = 0;\r\n        this.Yinit[0] = 0;\r\n        this.Xinit[1] = -0.051;\r\n        this.Yinit[1] = 0.05;\r\n        this.Xinit[2] = 0.05;\r\n        this.Yinit[2] = 0.05;\r\n        this.Vqueue = 0.4;\r\n        this.el = 0;\r\n        this.er = 0;\r\n        this.alphaQ = 0.033916;\r\n        this.betaQ = -7 * Math.PI / 8;\r\n        return;\r\n    }// end function\r\n\r\n    direction_beta = (param1, param2, param3) => {\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = 0.03;\r\n        _loc_6 = Math.sqrt((this.Xinit[0] - param2) * (this.Xinit[0] - param2) + (this.Yinit[0] - param3) * (this.Yinit[0] - param3));\r\n        param1 = param1 * (2 * _loc_7);\r\n        _loc_4 = Math.asin(param1 / _loc_6);\r\n        _loc_5 = this.atanjimi(param3 - this.Yinit[0], param2 - this.Xinit[0]);\r\n        if (_loc_5 - _loc_4 > Math.PI)\r\n        {\r\n            return _loc_5 - _loc_4 - 2 * Math.PI;\r\n        }\r\n        if (_loc_5 - _loc_4 < -Math.PI)\r\n        {\r\n            return _loc_5 - _loc_4 + 2 * Math.PI;\r\n        }\r\n        return _loc_5 - _loc_4;\r\n    }// end function\r\n\r\n    ToucheBandeX = (param1) => {\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_9 = NaN;\r\n        var _loc_10 = NaN;\r\n        var _loc_11 = NaN;\r\n        var _loc_12 = NaN;\r\n        var _loc_13 = NaN;\r\n        var _loc_14 = NaN;\r\n        var _loc_15 = NaN;\r\n        var _loc_16 = NaN;\r\n        var _loc_17 = NaN;\r\n        var _loc_18 = NaN;\r\n        var _loc_7 = 0.03;\r\n        var _loc_19 = 1e-005;\r\n        var _loc_20 = 1.4;\r\n        var _loc_21 = 0.006;\r\n        var _loc_22 = 0.015;\r\n        while (this.betaQ < 0)\r\n        {\r\n            \r\n            this.betaQ = this.betaQ + 2 * Math.PI;\r\n        }\r\n        while (this.betaQ >= 2 * Math.PI)\r\n        {\r\n            \r\n            this.betaQ = this.betaQ - 2 * Math.PI;\r\n        }\r\n        _loc_14 = this.betaQ;\r\n        _loc_13 = param1;\r\n        _loc_17 = Math.cos(_loc_14);\r\n        _loc_18 = Math.sin(_loc_14);\r\n        _loc_15 = Math.cos(_loc_13);\r\n        _loc_16 = Math.sin(_loc_13);\r\n        _loc_12 = Math.sqrt(_loc_7 * _loc_7 - this.er * this.er - this.el * this.el);\r\n        _loc_9 = (_loc_12 * _loc_15 - this.er * _loc_16) * _loc_17 - this.el * _loc_18;\r\n        _loc_10 = _loc_12 * _loc_16 + this.er * _loc_15;\r\n        _loc_11 = (_loc_12 * _loc_15 - this.er * _loc_16) * _loc_18 + this.el * _loc_17;\r\n        _loc_2 = this.Xinit[0] + _loc_9;\r\n        _loc_3 = _loc_7 + _loc_10;\r\n        _loc_4 = this.Yinit[0] + _loc_11;\r\n        _loc_6 = this.long_billard / 2;\r\n        if (Math.abs(_loc_17) < _loc_19)\r\n        {\r\n            return false;\r\n        }\r\n        if (_loc_14 > Math.PI / 2 && _loc_14 < 3 * Math.PI / 2)\r\n        {\r\n            _loc_17 = -_loc_17;\r\n            _loc_2 = -_loc_2;\r\n        }\r\n        _loc_8 = (_loc_6 - _loc_2) / _loc_17;\r\n        if (_loc_8 > _loc_20)\r\n        {\r\n            return false;\r\n        }\r\n        _loc_5 = _loc_21 + (_loc_22 - _loc_21) / _loc_20 * _loc_8 / _loc_15;\r\n        if (_loc_8 * _loc_16 / _loc_15 + _loc_3 > this.HBande + _loc_5 / _loc_15)\r\n        {\r\n            return false;\r\n        }\r\n        return true;\r\n    }// end function\r\n\r\n    atanjimi = (param1, param2) => {\r\n        var _loc_3 = NaN;\r\n        if (Math.abs(param2) < 1e-006)\r\n        {\r\n            if (param1 > 0)\r\n            {\r\n                return Math.PI / 2;\r\n            }\r\n            return (-Math.PI) / 2;\r\n        }\r\n        _loc_3 = Math.atan(param1 / param2);\r\n        if (param2 > 0)\r\n        {\r\n            return _loc_3;\r\n        }\r\n        if (param1 < 0)\r\n        {\r\n            return _loc_3 - Math.PI;\r\n        }\r\n        return _loc_3 + Math.PI;\r\n    }// end function\r\n\r\n    Quantite = () => {\r\n        var _loc_1 = 0;\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = [];\r\n        var _loc_4 = [];\r\n        var _loc_5 = 0.03;\r\n        _loc_2 = this.betaQ + Math.PI;\r\n        _loc_1 = 1;\r\n        while (_loc_1 < this.NBILLES)\r\n        {\r\n            \r\n            _loc_3[_loc_1] = false;\r\n            if ((this.Xinit[_loc_1] - this.Xinit[0]) * Math.cos(_loc_2) + (this.Yinit[_loc_1] - this.Yinit[0]) * Math.sin(_loc_2) > 0)\r\n            {\r\n                _loc_4[_loc_1] = (this.Yinit[_loc_1] - this.Yinit[0]) * Math.cos(_loc_2) - (this.Xinit[_loc_1] - this.Xinit[0]) * Math.sin(_loc_2);\r\n                if (_loc_4[_loc_1] < 2 * _loc_5 && _loc_4[_loc_1] > -2 * _loc_5)\r\n                {\r\n                    _loc_3[_loc_1] = true;\r\n                }\r\n            }\r\n            _loc_1++;\r\n        }\r\n        this.bille_visee = -1;\r\n        var _loc_6 = 100;\r\n        _loc_1 = 1;\r\n        while (_loc_1 < this.NBILLES)\r\n        {\r\n            \r\n            if (_loc_3[_loc_1])\r\n            {\r\n                if ((this.Xinit[_loc_1] - this.Xinit[0]) * (this.Xinit[_loc_1] - this.Xinit[0]) + (this.Yinit[_loc_1] - this.Yinit[0]) * (this.Yinit[_loc_1] - this.Yinit[0]) < _loc_6)\r\n                {\r\n                    this.bille_visee = _loc_1;\r\n                    _loc_6 = (this.Xinit[_loc_1] - this.Xinit[0]) * (this.Xinit[_loc_1] - this.Xinit[0]) + (this.Yinit[_loc_1] - this.Yinit[0]) * (this.Yinit[_loc_1] - this.Yinit[0]);\r\n                }\r\n            }\r\n            _loc_1++;\r\n        }\r\n        if (this.bille_visee != -1)\r\n        {\r\n            this.noba = true;\r\n            this.quant = _loc_4[this.bille_visee] / 2 / _loc_5;\r\n        }\r\n        else\r\n        {\r\n            this.noba = false;\r\n            this.quant = 0;\r\n        }\r\n        return this.quant;\r\n    }// end function\r\n\r\n    ToucheBandeZ = (param1) => {\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = NaN;\r\n        var _loc_9 = NaN;\r\n        var _loc_10 = NaN;\r\n        var _loc_11 = NaN;\r\n        var _loc_12 = NaN;\r\n        var _loc_13 = NaN;\r\n        var _loc_14 = NaN;\r\n        var _loc_15 = NaN;\r\n        var _loc_16 = NaN;\r\n        var _loc_17 = NaN;\r\n        var _loc_18 = NaN;\r\n        var _loc_19 = NaN;\r\n        var _loc_8 = 0.03;\r\n        var _loc_20 = 1e-005;\r\n        var _loc_21 = 1.4;\r\n        var _loc_22 = 0.006;\r\n        var _loc_23 = 0.015;\r\n        while (this.betaQ < 0)\r\n        {\r\n            \r\n            this.betaQ = this.betaQ + 2 * Math.PI;\r\n        }\r\n        while (this.betaQ >= 2 * Math.PI)\r\n        {\r\n            \r\n            this.betaQ = this.betaQ - 2 * Math.PI;\r\n        }\r\n        _loc_15 = this.betaQ;\r\n        _loc_14 = param1;\r\n        _loc_18 = Math.cos(_loc_15);\r\n        _loc_19 = Math.sin(_loc_15);\r\n        _loc_16 = Math.cos(_loc_14);\r\n        _loc_17 = Math.sin(_loc_14);\r\n        _loc_13 = Math.sqrt(_loc_8 * _loc_8 - this.er * this.er - this.el * this.el);\r\n        _loc_10 = (_loc_13 * _loc_16 - this.er * _loc_17) * _loc_18 - this.el * _loc_19;\r\n        _loc_11 = _loc_13 * _loc_17 + this.er * _loc_16;\r\n        _loc_12 = (_loc_13 * _loc_16 - this.er * _loc_17) * _loc_19 + this.el * _loc_18;\r\n        _loc_2 = this.Xinit[0] + _loc_10;\r\n        _loc_3 = _loc_8 + _loc_11;\r\n        _loc_4 = this.Yinit[0] + _loc_12;\r\n        _loc_7 = this.larg_billard / 2;\r\n        if (Math.abs(_loc_19) < _loc_20)\r\n        {\r\n            return false;\r\n        }\r\n        if (_loc_15 > Math.PI)\r\n        {\r\n            _loc_19 = -_loc_19;\r\n            _loc_4 = -_loc_4;\r\n        }\r\n        _loc_9 = (_loc_7 - _loc_4) / _loc_19;\r\n        if (_loc_9 > _loc_21)\r\n        {\r\n            return false;\r\n        }\r\n        _loc_5 = _loc_22 + (_loc_23 - _loc_22) / _loc_21 * _loc_9 / _loc_16;\r\n        if (_loc_9 * _loc_17 / _loc_16 + _loc_3 > this.HBande + _loc_5 / _loc_16)\r\n        {\r\n            return false;\r\n        }\r\n        return true;\r\n    }// end function\r\n\r\n    AlphaQmin = () => {\r\n        var _loc_1 = 0;\r\n        while (this.ToucheBandeZ(_loc_1) || this.ToucheBandeX(_loc_1) || this.ToucheBille(_loc_1))\r\n        {\r\n            \r\n            _loc_1 = _loc_1 + Math.PI / 90;\r\n        }\r\n        return _loc_1;\r\n    }// end function\r\n\r\n    ToucheBille = (param1) => {\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_9 = NaN;\r\n        var _loc_10 = NaN;\r\n        var _loc_11 = NaN;\r\n        var _loc_14 = NaN;\r\n        var _loc_15 = NaN;\r\n        var _loc_16 = NaN;\r\n        var _loc_22 = 0;\r\n        var _loc_7 = 0.03;\r\n        var _loc_12 = 0.002;\r\n        var _loc_13 = 0.032;\r\n        var _loc_17 = 1.4;\r\n        var _loc_18 = 0.006;\r\n        var _loc_19 = 0.015;\r\n        var _loc_20 = param1;\r\n        var _loc_21 = this.betaQ;\r\n        _loc_22 = 1;\r\n        while (_loc_22 < this.NBILLES)\r\n        {\r\n            \r\n            _loc_2 = this.Xinit[0] + _loc_13 * Math.cos(_loc_21) * Math.cos(_loc_20) - this.el * Math.sin(_loc_21) - this.er * Math.sin(_loc_20) * Math.cos(_loc_21);\r\n            _loc_3 = 0.03 + _loc_13 * Math.sin(_loc_20) + this.er * Math.cos(_loc_20);\r\n            _loc_4 = this.Yinit[0] + _loc_13 * Math.sin(_loc_21) * Math.cos(_loc_20) + this.el * Math.cos(_loc_21) - this.er * Math.sin(_loc_20) * Math.sin(_loc_21);\r\n            _loc_8 = this.Xinit[_loc_22];\r\n            _loc_9 = 0.03;\r\n            _loc_10 = this.Yinit[_loc_22];\r\n            _loc_6 = 0;\r\n            while (_loc_6 < _loc_17)\r\n            {\r\n                \r\n                _loc_5 = _loc_18 + (_loc_19 - _loc_18) / _loc_17 * _loc_6;\r\n                _loc_14 = _loc_2 + _loc_6 * Math.cos(_loc_20) * Math.cos(_loc_21);\r\n                _loc_15 = _loc_3 + _loc_6 * Math.sin(_loc_20);\r\n                _loc_16 = _loc_4 + _loc_6 * Math.cos(_loc_20) * Math.sin(_loc_21);\r\n                _loc_11 = (_loc_14 - _loc_8) * (_loc_14 - _loc_8) + (_loc_15 - _loc_9) * (_loc_15 - _loc_9) + (_loc_16 - _loc_10) * (_loc_16 - _loc_10);\r\n                if (_loc_11 < (_loc_7 + _loc_5 + _loc_12) * (_loc_7 + _loc_5 + _loc_12))\r\n                {\r\n                    return true;\r\n                }\r\n                _loc_6 = _loc_6 + 0.01;\r\n            }\r\n            _loc_22++;\r\n        }\r\n        return false;\r\n    }\r\n}","import Simul from './simul';\r\nimport parametres from './parametres';\r\nimport sequence from './sequence';\r\n\r\nexport default class CBillard {\r\n    bitmap_Bandes_260;\r\n    ampl_recul_max;\r\n    mode_jeu = 2;\r\n    temps_recul;\r\n    queue;\r\n    calculs_faits;\r\n    largeur;\r\n    trajets;\r\n    seq_origine;\r\n    canal_bande0;\r\n    canal_bande1;\r\n    bitmap_Bandes_310;\r\n    RAp0;\r\n    alphamin;\r\n    tous_trajets;\r\n    type;\r\n    t0;\r\n    bitmap_Bandes_280;\r\n    new_seq;\r\n    dq0;\r\n    grille;\r\n    ymax;\r\n    son_queue_pique;\r\n    RAq0;\r\n    lines_cadre47;\r\n    Rb;\r\n    R;\r\n    Ampl_queue;\r\n    seq;\r\n    son_bille_bande;\r\n    muet;\r\n    bitmap_Billard_260;\r\n    Ech;\r\n    ctrl;\r\n    RAr0;\r\n    son_queue_plat;\r\n    ind_last_clef;\r\n    taille_billard;\r\n    ombre;\r\n    jouer_bande0;\r\n    ralenti = 1;\r\n    canal_bille0;\r\n    bille_visee;\r\n    dq;\r\n    bitmap_Billard_310;\r\n    ecl;\r\n    canal_bille1;\r\n    trajet_bille_joueur;\r\n    Params;\r\n    bitmap_Billard_280;\r\n    trans;\r\n    longueur;\r\n    lines_cadre71;\r\n    date;\r\n    Vqmax;\r\n    largeur_bandes = 0.28;\r\n    nb_sons_played;\r\n    jouer_bille0;\r\n    aff_trajets;\r\n    ligne_visee;\r\n    lines_free;\r\n    canal_queue;\r\n    son_bille_bille;\r\n    t_debut;\r\n    trajet_bille_visee;\r\n    cont_billard;\r\n    Simulateur;\r\n    xmax;\r\n    billes;\r\n    myTimer;\r\n\r\n    constructor (param1, param2, param3, param4) {\r\n        var _loc_5 = 0;\r\n        this.Ech = param3;\r\n        this.R = 0.03;\r\n        this.Rb = 36;\r\n        this.type = 0;\r\n        this.taille(param1);\r\n        this.Params = new parametres((this.xmax + this.R) * 2, (this.ymax + this.R) * 2);\r\n\r\n        var _loc_17 = 0;\r\n        this.ombre = [];\r\n        this.aff_trajets = false;\r\n        this.tous_trajets = true;\r\n        this.trajet_bille_joueur = false;\r\n        this.trajet_bille_visee = false;\r\n        // this.trajets = new Shape();\r\n        // this.cont_billard.addChild(this.trajets);\r\n        this.billes = [];\r\n\r\n        this.bille_visee = 1;\r\n        this.ecl = [];\r\n        // var _loc_15 = new Cecl(0, 0);\r\n        this.dq0 = 1.5 * this.R * this.Ech;\r\n        this.alphamin = true;\r\n        this.Vqmax = 3.5;\r\n        this.Simulateur = new Simul(this.xmax, this.ymax);\r\n        this.ind_last_clef = [];\r\n        _loc_5 = 0;\r\n        while (_loc_5 < 3)\r\n        {\r\n            \r\n            this.ind_last_clef[_loc_5] = this.Simulateur.nb_max_clefs * _loc_5;\r\n            _loc_5++;\r\n        }\r\n        this.calculs_faits = false;\r\n        // this.myTimer = new Timer(5);\r\n        // this.myTimer.addEventListener(\"timer\", this.timerHandler);\r\n        this.ampl_recul_max = 0.1;\r\n        this.RAp0 = [];\r\n        this.RAq0 = [];\r\n        this.RAr0 = [];\r\n        _loc_5 = 0;\r\n        while (_loc_5 < 3)\r\n        {\r\n            \r\n            this.RAp0[_loc_5] = 0;\r\n            this.RAq0[_loc_5] = 0;\r\n            this.RAr0[_loc_5] = 0;\r\n            _loc_5++;\r\n        }\r\n        this.alphamin = false;\r\n        console.log(this)\r\n        return;\r\n    }// end function\r\n\r\n    change_billard = (param1) => {\r\n        this.arret_son();\r\n        this.myTimer.stop();\r\n        if (param1 == 1)\r\n        {\r\n            this.taille(280);\r\n            var _loc_2 = false;\r\n            this.bitmap_Bandes_310.visible = false;\r\n            this.bitmap_Billard_310.visible = _loc_2;\r\n            var _loc_2 = true;\r\n            this.bitmap_Bandes_280.visible = true;\r\n            this.bitmap_Billard_280.visible = _loc_2;\r\n            var _loc_2 = false;\r\n            this.bitmap_Bandes_260.visible = false;\r\n            this.bitmap_Billard_260.visible = _loc_2;\r\n        }\r\n        else if (param1 == 2)\r\n        {\r\n            this.taille(260);\r\n            var _loc_2 = false;\r\n            this.bitmap_Bandes_310.visible = false;\r\n            this.bitmap_Billard_310.visible = _loc_2;\r\n            var _loc_2 = false;\r\n            this.bitmap_Bandes_280.visible = false;\r\n            this.bitmap_Billard_280.visible = _loc_2;\r\n            var _loc_2 = true;\r\n            this.bitmap_Bandes_260.visible = true;\r\n            this.bitmap_Billard_260.visible = _loc_2;\r\n        }\r\n        else if (param1 == 0)\r\n        {\r\n            this.taille(310);\r\n            var _loc_2 = true;\r\n            this.bitmap_Bandes_310.visible = true;\r\n            this.bitmap_Billard_310.visible = _loc_2;\r\n            var _loc_2 = false;\r\n            this.bitmap_Bandes_280.visible = false;\r\n            this.bitmap_Billard_280.visible = _loc_2;\r\n            var _loc_2 = false;\r\n            this.bitmap_Bandes_260.visible = false;\r\n            this.bitmap_Billard_260.visible = _loc_2;\r\n        }\r\n        this.ctrl.XC = this.Ech * this.longueur / 2;\r\n        this.ctrl.YC = this.Ech * this.largeur / 2;\r\n        this.Params.long_billard = (this.xmax + this.R) * 2;\r\n        this.Params.larg_billard = (this.ymax + this.R) * 2;\r\n        if (this.Simulateur != null)\r\n        {\r\n            this.Simulateur.XMAX = this.xmax;\r\n            this.Simulateur.YMAX = this.ymax;\r\n            this.Simulateur.XMIN = -this.xmax;\r\n            this.Simulateur.YMIN = -this.ymax;\r\n        }\r\n        this.tracer_grille();\r\n        this.tracer_lines();\r\n        this.Placer_billes_hasard();\r\n        this.Params.Vqueue = 1;\r\n        this.init_point();\r\n        return;\r\n    }// end function\r\n\r\n    arret_son = () => {}\r\n\r\n    init_point = () => {\r\n        this.arret_son();\r\n        this.myTimer.stop();\r\n        this.afficher_billes();\r\n        this.ctrl.aff_parametres();\r\n        this.placer_queue(this.dq0);\r\n        this.queue.visible = true;\r\n        this.calculs_faits = false;\r\n        this.aff_trajets = false;\r\n        this.trajets.graphics.clear();\r\n        this.tracer_ligne_visee();\r\n        this.ligne_visee.visible = true;\r\n        return;\r\n    }// end function\r\n\r\n    update_modejeu = (param1) => {\r\n        this.mode_jeu = param1;\r\n        this.arret_son();\r\n        // this.myTimer.stop();\r\n        if (param1 == 0)\r\n        {\r\n            this.Vqmax = 3.5;\r\n        }\r\n        if (param1 == 1)\r\n        {\r\n            this.Vqmax = 3.5;\r\n        }\r\n        if (param1 == 2)\r\n        {\r\n            this.Vqmax = 4.2;\r\n        }\r\n        if (param1 == 3)\r\n        {\r\n            this.Vqmax = 3.5;\r\n        }\r\n        if (param1 == 4)\r\n        {\r\n            this.Vqmax = 3.5;\r\n        }\r\n        if (param1 == 5)\r\n        {\r\n            this.Vqmax = 5.4;\r\n        }\r\n        return;\r\n    }// end function\r\n    Simuler = (param1, param2) => {\r\n        var _loc_2 = 0;\r\n        this.ralenti = param1;\r\n        // this.ligne_visee.visible = false;\r\n        this.arret_son();\r\n        return this.Simulateur.Calcul(param2);\r\n    }\r\n\r\n    taille = (param1) => {\r\n        this.taille_billard = param1;\r\n        if (param1 == 310)\r\n        {\r\n            this.longueur = 3.12;\r\n        }\r\n        if (param1 == 280)\r\n        {\r\n            this.longueur = 2.82;\r\n        }\r\n        if (param1 == 260)\r\n        {\r\n            this.longueur = 2.62;\r\n        }\r\n        this.xmax = (this.longueur - this.largeur_bandes) / 2 - 0.03;\r\n        this.ymax = (this.longueur - this.largeur_bandes) / 4 - 0.03;\r\n        this.largeur = 2 * (this.ymax + 0.03) + this.largeur_bandes;\r\n        return;\r\n    }// end function\r\n}","import * as BABYLON from 'babylonjs';\r\nimport {\r\n    TABLE_LENGTH,\r\n    BALL_SIZE,\r\n\r\n    fileTableModel,\r\n    fileBatModel,\r\n\r\n} from '../constants';\r\n\r\nimport CBillard from './OriginSimulatorEngine/cBillard';\r\n\r\nexport default class SceneManager {\r\n    constructor (\r\n        size,\r\n        modelStorePath,\r\n        currentView,\r\n        ballPositions,\r\n        controlOptions\r\n    ) {\r\n        this.scene = undefined;\r\n        this.canvas = undefined;\r\n\r\n        this.size = size;\r\n\r\n        this.ballRadius = 400 * BALL_SIZE / (this.size * 100);\r\n\r\n        this.modelStorePath = modelStorePath;\r\n\r\n        this.initBallPosition = ballPositions;\r\n        this.ballPositions = {\r\n            posCueBallWhite: {\r\n                x: TABLE_LENGTH * ballPositions.posCueBallWhite.x / size,\r\n                z: TABLE_LENGTH * ballPositions.posCueBallWhite.z / size\r\n            },\r\n            posCueBallYellow: {\r\n                x: TABLE_LENGTH * ballPositions.posCueBallYellow.x / size,\r\n                z: TABLE_LENGTH * ballPositions.posCueBallYellow.z / size\r\n            },\r\n            posTargetBall: {\r\n                x: TABLE_LENGTH * ballPositions.posTargetBall.x / size,\r\n                z: TABLE_LENGTH * ballPositions.posTargetBall.z / size\r\n            }\r\n        };\r\n\r\n        this.currentView = currentView;\r\n\r\n        this.cameras = {\r\n            arcCam: undefined,\r\n            topCam: undefined\r\n        };\r\n\r\n        this.objects = {\r\n            table: undefined,\r\n            bat: undefined,\r\n            cueBallWhite: undefined,\r\n            cueBallYellow: undefined,\r\n            targetBall: undefined,\r\n            batContactLine: undefined,\r\n            batLookatPoint: undefined,\r\n            directionLine: undefined,\r\n        };\r\n\r\n        this.controlOptions = controlOptions;\r\n\r\n        this.grids = [];\r\n\r\n        this.pathCueWhite = undefined;\r\n        this.pathCueYellow = undefined;\r\n        this.pathTargetBall = undefined;\r\n\r\n        this.billard = new CBillard(\r\n            310,\r\n            undefined,\r\n            300,\r\n        );\r\n        \r\n        this.timerCount = 0;\r\n\r\n        this.RAp0 = [0, 0, 0]\r\n        this.RAq0 = [0, 0, 0]\r\n        this.RAr0 = [0, 0, 0]\r\n    }\r\n\r\n    drawBallPath = (value) => {\r\n        let res = this.pathData\r\n\r\n        if(!res || res.length == 0) return;\r\n        if(this.pathCueWhite){\r\n            this.pathCueWhite.dispose()\r\n        } \r\n        \r\n        if(this.pathCueYellow){\r\n            this.pathCueYellow.dispose()\r\n        }\r\n\r\n        if(this.pathTargetBall){\r\n            this.pathTargetBall.dispose()\r\n        } \r\n        \r\n        if (value) {\r\n            var whiteBallPoints = [];\r\n            for (var i = 0; i < 10000; i++) {\r\n                if (res[i]) {\r\n                    whiteBallPoints.push(new BABYLON.Vector3(\r\n                        TABLE_LENGTH * res[i].X / this.size,\r\n                        this.ballRadius / 2,\r\n                        TABLE_LENGTH * res[i].Y / this.size\r\n                    ))\r\n                }\r\n            }\r\n            this.pathCueWhite = BABYLON.MeshBuilder.CreateLines(\r\n                'lines',\r\n                {\r\n                    points: whiteBallPoints\r\n                }, \r\n                this.scene\r\n            );\r\n\r\n            var yellowBallPoints = [];\r\n            var colorYellow = [];\r\n            for (i = 10000; i < 20000; i++) {\r\n                if (res[i]) {\r\n                    yellowBallPoints.push(new BABYLON.Vector3(\r\n                        TABLE_LENGTH * res[i].X / this.size,\r\n                        this.ballRadius / 2,\r\n                        TABLE_LENGTH * res[i].Y / this.size\r\n                    ));\r\n                    colorYellow.push(new BABYLON.Color4(0.8, 0.8, 0, 1));\r\n                }\r\n            }\r\n\r\n            this.pathCueYellow = BABYLON.MeshBuilder.CreateLines(\r\n                'lines',\r\n                {\r\n                    points: yellowBallPoints,\r\n                    colors: colorYellow\r\n                }, \r\n                this.scene\r\n            );\r\n\r\n            var redBallPoints = [];\r\n            var colorRed = [];\r\n\r\n            for (i = 20000; i < 30000; i++) {\r\n                if (res[i]) {\r\n                    redBallPoints.push(new BABYLON.Vector3(\r\n                        TABLE_LENGTH * res[i].X / this.size,\r\n                        this.ballRadius / 2,\r\n                        TABLE_LENGTH * res[i].Y / this.size\r\n                    ));\r\n                    colorRed.push(new BABYLON.Color4(0.8, 0, 0, 1));\r\n                }\r\n            }\r\n\r\n            this.pathTargetBall = BABYLON.MeshBuilder.CreateLines(\r\n                'lines',\r\n                {\r\n                    points: redBallPoints,\r\n                    colors: colorRed\r\n                }, \r\n                this.scene\r\n            );\r\n        }        \r\n    }\r\n\r\n    configCameras = () => {\r\n        const _self = this;\r\n        _self.cameras.arcCam = new BABYLON.ArcRotateCamera(\"Camera-Arc\", 4.44, 1.05, 300, BABYLON.Vector3.Zero(), _self.scene);\r\n        _self.cameras.arcCam.attachControl(_self.canvas);\r\n        _self.cameras.arcCam.upperBetaLimit = 1.5;\r\n        _self.cameras.arcCam.wheelPrecision = 0.2;\r\n        \r\n        _self.cameras.arcCam.upperRadiusLimit = 500;\r\n        _self.cameras.arcCam.lowerRadiusLimit = 100;\r\n        \r\n        _self.cameras.topCam = new BABYLON.ArcRotateCamera(\"Camera-Top\", -Math.PI/2, 0, 330, BABYLON.Vector3.Zero(), _self.scene);\r\n\r\n        _self.cameras.topCam.upperBetaLimit = 0;\r\n        _self.cameras.topCam.lowerBetaLimit = 0;\r\n\r\n        _self.cameras.topCam.upperAlphaLimit = -Math.PI/2;\r\n        _self.cameras.topCam.lowerAlphaLimit = -Math.PI/2;\r\n\r\n        _self.cameras.topCam.upperRadiusLimit = 330;\r\n        _self.cameras.topCam.lowerRadiusLimit = 330;\r\n\r\n        _self.cameras.topCam.mode = BABYLON.Camera.ORTHOGRAPHIC_CAMERA;\r\n        _self.cameras.topCam.orthoTop = 130;\r\n        _self.cameras.topCam.orthoBottom = -130;\r\n        _self.cameras.topCam.orthoLeft = -240;\r\n        _self.cameras.topCam.orthoRight = 240;\r\n\r\n        _self.changeView(_self.currentView);\r\n    }\r\n\r\n    loadModels = () => {\r\n        const _self = this;\r\n        const { modelStorePath } = this;\r\n\r\n        BABYLON.SceneLoader.ImportMesh(\"\", modelStorePath, fileBatModel, _self.scene, function (newMeshes) {\r\n            _self.objects.bat = newMeshes[0];\r\n            _self.objects.bat.position.y = 50;\r\n            _self.objects.bat.position.z = 90;\r\n\r\n            _self.objects.batLookatPoint = new BABYLON.MeshBuilder.CreateSphere(\r\n                'look-at',\r\n                {\r\n                    diameter: 4\r\n                },\r\n                _self.scene\r\n            )\r\n            \r\n            // _self.objects.batLookatPoint.parent = _self.objects.bat;\r\n            _self.objects.batLookatPoint.position.y = 30;\r\n            _self.objects.batLookatPoint.visibility = false;\r\n            \r\n            BABYLON.SceneLoader.ImportMesh(\"\", modelStorePath, fileTableModel, _self.scene, function (newMeshes) {\r\n                _self.objects.table = newMeshes;\r\n                for(var obj of newMeshes){\r\n                    if(obj.name === 'carpet'){\r\n                        // assign bump\r\n                        obj.material.bumpTexture = new BABYLON.Texture(modelStorePath+'carpet-bump.png', _self.scene);\r\n                        // end assign bump\r\n                    }\r\n                }\r\n                \r\n                _self.configCueBalls();\r\n                _self.updateBat(_self.controlOptions);\r\n            });\r\n        });\r\n    }\r\n\r\n    updateControlOptions = (data) => {\r\n        this.controlOptions = data;\r\n        this.updateBat(data);\r\n    }\r\n\r\n    updateBat = (data) => {\r\n        const {\r\n            cueLine,\r\n            cueAngle,\r\n            sideEnglish,\r\n            topSpin,\r\n        } = data;\r\n        const {size, ballRadius} = this;\r\n        const {bat, batLookatPoint, directionLine, cueBallWhite} = this.objects;\r\n\r\n        let deltaSideEnglish = TABLE_LENGTH * sideEnglish / size;\r\n        let deltaTopSpin = TABLE_LENGTH * topSpin / size;\r\n\r\n        bat.position.x = cueBallWhite.position.x\r\n                         - deltaSideEnglish * Math.sin(cueLine)\r\n                         - deltaTopSpin * Math.sin(cueAngle) * Math.cos(cueLine);\r\n        bat.position.z = cueBallWhite.position.z\r\n                         + deltaSideEnglish * Math.cos(cueLine)\r\n                         - deltaTopSpin * Math.sin(cueAngle) * Math.sin(cueLine);\r\n        bat.position.y = ballRadius/2\r\n                         + deltaTopSpin * Math.cos(cueAngle);\r\n        \r\n        bat.rotation = new BABYLON.Vector3(\r\n            0,\r\n            -cueLine,\r\n            Math.PI/2 + cueAngle\r\n        );\r\n\r\n        // update look at point\r\n        var lookAtPoint = Object.assign({}, bat.position);\r\n        lookAtPoint.y += 40 * Math.sin(cueAngle);\r\n        lookAtPoint.x += 40 * Math.cos(cueAngle) * Math.cos(cueLine);\r\n        lookAtPoint.z += 40 * Math.cos(cueAngle) * Math.sin(cueLine);\r\n        batLookatPoint.position = lookAtPoint;\r\n        batLookatPoint.lookAt(bat.position);\r\n        // end update look at point\r\n\r\n        // update direction line\r\n        directionLine.position.x = cueBallWhite.position.x;\r\n        directionLine.position.z = cueBallWhite.position.z;\r\n        directionLine.position.y = ballRadius/2;\r\n\r\n        directionLine.rotation.y = Math.PI - cueLine;\r\n        // end update direction line\r\n    }\r\n\r\n    generateReflectionMaterial = (root, others) => {\r\n        let {scene} = this;\r\n\t\t\r\n\t\tvar probe = new BABYLON.ReflectionProbe(\"satelliteProbe\" + root.name, 512, scene);\r\n\t\tfor (var index = 0; index < others.length; index++) {\r\n\t\t\tprobe.renderList.push(others[index]);\t\t\t\r\n\t\t}\r\n\t\t\r\n        root.material.reflectionTexture = probe.cubeTexture;\r\n        root.material.reflectivityColor = new BABYLON.Color3(0.2, 0.2, 0.2);\r\n\t\t\r\n\t\troot.material.reflectionFresnelParameters = new BABYLON.FresnelParameters();\r\n        root.material.reflectionFresnelParameters.bias = 0;\r\n\t\tprobe.attachToMesh(root);\r\n    }\r\n    \r\n    configCueBalls = () => {\r\n        const _self = this;\r\n        const {\r\n            modelStorePath,\r\n            ballRadius\r\n        } = this;\r\n\r\n        const { table } = this.objects;\r\n        const {arcCam} = this.cameras;\r\n        let carpet, rail;\r\n        for(var obj of table) {\r\n            if (obj.name === 'carpet') {\r\n                carpet = obj;\r\n            } else if (obj.name === 'carpet-side') {\r\n                rail = obj;\r\n            }\r\n        }\r\n        let {\r\n            posCueBallWhite,\r\n            posCueBallYellow,\r\n            posTargetBall\r\n        } = this.ballPositions;\r\n\r\n        _self.objects.cueBallWhite = BABYLON.Mesh.CreateSphere(\"cue-ball-white\", 16, ballRadius, _self.scene);\r\n        _self.objects.cueBallWhite.position.y = ballRadius/2;\r\n        _self.objects.cueBallWhite.position.x = posCueBallWhite.x;\r\n        _self.objects.cueBallWhite.position.z = posCueBallWhite.z;\r\n        // arcCam.setTarget(_self.objects.cueBallWhite);\r\n\r\n        var matCueBallWhite = new BABYLON.StandardMaterial(\"redMat\", _self.scene);\r\n        matCueBallWhite.diffuseTexture = new BABYLON.Texture(modelStorePath + \"cueball-white.jpg\", _self.scene);\r\n        _self.objects.cueBallWhite.material = matCueBallWhite;\r\n\r\n        _self.objects.cueBallYellow = BABYLON.Mesh.CreateSphere(\"cue-ball-yellow\", 16, ballRadius, _self.scene);\r\n        _self.objects.cueBallYellow.position.y = ballRadius/2;\r\n        _self.objects.cueBallYellow.position.x = posCueBallYellow.x;\r\n        _self.objects.cueBallYellow.position.z = posCueBallYellow.z;\r\n\r\n        var matCueBallYellow = new BABYLON.StandardMaterial(\"redMat\", _self.scene);\r\n        matCueBallYellow.diffuseTexture = new BABYLON.Texture(modelStorePath + \"cueball-yellow.jpg\", _self.scene);\r\n        _self.objects.cueBallYellow.material = matCueBallYellow;\r\n\r\n        _self.objects.targetBall = BABYLON.Mesh.CreateSphere(\"cue-ball-red\", 16, ballRadius, _self.scene);\r\n        _self.objects.targetBall.position.y = ballRadius/2;\r\n        _self.objects.targetBall.position.x = posTargetBall.x;\r\n        _self.objects.targetBall.position.z = posTargetBall.z;\r\n\r\n        var matTargetBall = new BABYLON.StandardMaterial(\"redMat\", _self.scene);\r\n        matTargetBall.diffuseTexture = new BABYLON.Texture(modelStorePath + \"targetball.jpg\", _self.scene);\r\n        _self.objects.targetBall.material = matTargetBall;\r\n\r\n        _self.generateReflectionMaterial(_self.objects.cueBallWhite, [_self.objects.cueBallYellow, _self.objects.targetBall, _self.objects.bat, carpet, rail]);\r\n        _self.generateReflectionMaterial(_self.objects.cueBallYellow, [_self.objects.cueBallWhite, _self.objects.targetBall, _self.objects.bat, carpet, rail]);\r\n        _self.generateReflectionMaterial(_self.objects.targetBall, [_self.objects.cueBallWhite, _self.objects.cueBallYellow, _self.objects.bat, carpet, rail]);\r\n\r\n        //contact points\r\n        _self.objects.ray = new BABYLON.Ray();\r\n        _self.objects.rayHelper = new BABYLON.RayHelper(_self.objects.ray);\r\n        var localMeshDirection = new BABYLON.Vector3(0, 0, 1);\r\n        // _self.cameras.arcCam.setTarget(_self.objects.batLookatPoint)\r\n        \r\n        _self.objects.rayHelper.attachToMesh(_self.objects.batLookatPoint, localMeshDirection);\r\n        // _self.objects.rayHelper.show(_self.scene);\r\n    }\r\n\r\n    configGrids = () => {\r\n        const _self = this;\r\n        const grayRate = 0.7;\r\n        const color = [new BABYLON.Color4(grayRate,grayRate,grayRate,1), new BABYLON.Color4(grayRate,grayRate,grayRate,1)];\r\n        for (var i = 0; i < 15; i++) {\r\n            let gridPoints = [\r\n                new BABYLON.Vector3(-TABLE_LENGTH*7/16 + i * TABLE_LENGTH/16, 2, -TABLE_LENGTH/4),\r\n                new BABYLON.Vector3(-TABLE_LENGTH*7/16 + i * TABLE_LENGTH/16, 2, TABLE_LENGTH/4)\r\n            ];\r\n            _self.grids.push(BABYLON.MeshBuilder.CreateLines(\"lines\", {points: gridPoints, colors: color}, _self.scene));\r\n        }\r\n        for (i = 0; i < 7; i++) {\r\n            let gridPoints = [\r\n                new BABYLON.Vector3(-TABLE_LENGTH/2, 2, -TABLE_LENGTH*3/16 + i * TABLE_LENGTH/16),\r\n                new BABYLON.Vector3(TABLE_LENGTH/2, 2, -TABLE_LENGTH*3/16 + i * TABLE_LENGTH/16)\r\n            ];\r\n            _self.grids.push(BABYLON.MeshBuilder.CreateLines(\"lines\", {points: gridPoints, colors: color}, _self.scene));\r\n        }\r\n    }\r\n\r\n    toggleGrids = (visible) => {\r\n        const {grids} = this;\r\n        for (var i = 0; i < grids.length; i++) {\r\n            grids[i].visibility = visible;\r\n        }\r\n    }\r\n\r\n    initializeScene = (scene, canvas) => {\r\n        let _self = this;\r\n        _self.scene = scene;\r\n        _self.canvas = canvas;\r\n\r\n        _self.scene.clearColor = new BABYLON.Color3(0.05, 0.05, 0.05);\r\n        _self.objects.directionLine = new BABYLON.MeshBuilder.CreateLines(\r\n            'direction-line',\r\n            {\r\n                points: [\r\n                    new BABYLON.Vector3(0, 0, 0),\r\n                    new BABYLON.Vector3(600, 0, 0)\r\n                ],\r\n                colors: [\r\n                    new BABYLON.Color4(0, 0, 0.8, 1),\r\n                    new BABYLON.Color4(0, 0, 0.8, 1),\r\n                ]\r\n            }\r\n        )\r\n\r\n        new BABYLON.HemisphericLight('light', BABYLON.Vector3.Up(), scene);\r\n\r\n        _self.configCameras();\r\n        _self.loadModels();\r\n        _self.configGrids();\r\n\r\n        _self.scene.getEngine().runRenderLoop(() => {\r\n            if (scene) {\r\n                scene.render();\r\n                _self.animateBalls();\r\n            }\r\n        });\r\n\r\n        canvas.addEventListener(\"pointerdown\", _self.onPointerDown, false);\r\n        canvas.addEventListener(\"pointerup\", _self.onPointerUp, false);\r\n        canvas.addEventListener(\"pointermove\", _self.onPointerMove, false);\r\n    }\r\n\r\n    getGroundPosition = () => {\r\n        let {scene} = this;\r\n        var pickinfo = scene.pick(scene.pointerX, scene.pointerY, function (mesh) { return mesh.name == 'carpet'; });\r\n        if (pickinfo.hit) {\r\n            return pickinfo.pickedPoint;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    onPointerDown = (evt) => {\r\n        let _self = this;\r\n        let {scene, canvas} = this;\r\n        if (evt.button !== 0) {\r\n            return;\r\n        }\r\n\r\n        // check if we are under a mesh\r\n        var pickInfo = scene.pick(scene.pointerX, scene.pointerY, function (mesh) {return (mesh.name === 'cue-ball-white' || mesh.name === 'cue-ball-yellow' || mesh.name === 'cue-ball-red')});\r\n        if (pickInfo.hit) {\r\n            _self.currentMesh = pickInfo.pickedMesh;\r\n            _self.startingPoint = _self.getGroundPosition(evt);\r\n\r\n            if (_self.startingPoint) {\r\n                setTimeout(function () {\r\n                    _self.cameras.arcCam.detachControl(canvas);\r\n                }, 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    onPointerUp = () => {\r\n        let _self = this;\r\n        let {startingPoint, canvas} = this;\r\n        if (startingPoint) {\r\n            _self.cameras.arcCam.attachControl(canvas, true);\r\n            _self.startingPoint = null;\r\n            _self.currentMesh = null;\r\n            return;\r\n        }\r\n    }\r\n\r\n    onPointerMove = (evt) => {\r\n        let _self = this;\r\n        let {startingPoint, currentMesh} = this;\r\n        if (!startingPoint) {\r\n            return;\r\n        }\r\n\r\n        var current = _self.getGroundPosition(evt);\r\n\r\n        if (!current) {\r\n            return;\r\n        }\r\n        \r\n        currentMesh.position = current;\r\n        currentMesh.position.y = _self.ballRadius/2\r\n\r\n        startingPoint = current;\r\n        _self.updateBat(_self.controlOptions);\r\n    }\r\n\r\n    changeView (view) {\r\n        const _self = this;\r\n        \r\n        if (view === '2d') {\r\n            _self.scene.activeCamera = _self.cameras.topCam;\r\n            _self.cameras.arcCam.detachControl(_self.canvas);\r\n            _self.cameras.topCam.attachControl(_self.canvas);\r\n        } else {\r\n            _self.scene.activeCamera = _self.cameras.arcCam;\r\n            _self.cameras.arcCam.attachControl(_self.canvas);\r\n            _self.cameras.topCam.detachControl(_self.canvas);\r\n        }\r\n    }\r\n\r\n    moveAndRotateBall = (obj, t, tmp, ) => {\r\n        let range = 10000;\r\n        let index = -1;\r\n        let _self = this;\r\n        let i;\r\n        for(i = tmp * range ; i < (tmp + 1) * range; i++){\r\n            if(_self.pathData[i])\r\n            {\r\n                if(_self.pathData[i].time < (t - _self.t0)){\r\n                    index = i;\r\n                }\r\n            } else { break;}\r\n        }\r\n        if(index >= 0){\r\n            if (index == i-1) {\r\n                return false;\r\n            }\r\n            let data = _self.pathData[index];\r\n            obj.position.x = TABLE_LENGTH * data.X / _self.size;\r\n            obj.position.z = TABLE_LENGTH * data.Y / _self.size;\r\n\r\n            let RAp = _self.pathData[index].RAp;\r\n            let RAq = _self.pathData[index].RAq;\r\n            let RAr = _self.pathData[index].RAr;\r\n\r\n            const R = 0.03;\r\n            let Rx = (RAp - _self.RAp0[tmp]) / R\r\n            let Ry = (RAq - _self.RAq0[tmp]) / R\r\n            let Rz = (RAr - _self.RAr0[tmp]) / R\r\n\r\n            _self.RAp0[tmp] = RAp\r\n            _self.RAq0[tmp] = RAq\r\n            _self.RAr0[tmp] = RAr\r\n\r\n            obj.rotate(BABYLON.Axis.X, -Rx, BABYLON.Space.WORLD);\r\n            obj.rotate(BABYLON.Axis.Y, -Rz, BABYLON.Space.WORLD);\r\n            obj.rotate(BABYLON.Axis.Z, -Ry, BABYLON.Space.WORLD);\r\n            return true;\r\n        }\r\n    }\r\n    \r\n    animateBalls = () => {\r\n        let _self = this;\r\n        let { cueBallWhite, cueBallYellow, targetBall } = this.objects;\r\n        if(!_self.pathData || _self.pathData.length == 0) return;\r\n        if (_self.t0 == undefined) return;\r\n        let t = new Date().getTime() / 1000;\r\n\r\n        var res1 = this.moveAndRotateBall(cueBallWhite, t, 0);\r\n        var res2 = this.moveAndRotateBall(cueBallYellow, t, 1);\r\n        var res3 = this.moveAndRotateBall(targetBall, t, 2);\r\n        console.log(res1, res2, res3);\r\n        if (res1 == false && res2 == false && res3 == false) _self.pathData = [];\r\n    }\r\n\r\n    playSimulation = () => {\r\n        var _self = this;\r\n        const ballPositions = this.initBallPosition;\r\n        const {controlOptions} = this;\r\n        const {\r\n            cueBallWhite,\r\n            cueBallYellow,\r\n            targetBall\r\n        } = this.objects;\r\n        var res = this.billard.Simuler(\r\n            1,\r\n            {\r\n                Xinit: [\r\n                    _self.size * cueBallWhite.position.x / TABLE_LENGTH,\r\n                    _self.size * cueBallYellow.position.x / TABLE_LENGTH,\r\n                    _self.size * targetBall.position.x / TABLE_LENGTH\r\n                ],\r\n                Yinit: [\r\n                    _self.size * cueBallWhite.position.z / TABLE_LENGTH,\r\n                    _self.size * cueBallYellow.position.z / TABLE_LENGTH,\r\n                    _self.size * targetBall.position.z / TABLE_LENGTH\r\n                ],\r\n                RApInit: [0, 0, 0],\r\n                RAqInit: [0, 0, 0],\r\n                RArInit: [0, 0, 0],\r\n                el: controlOptions.sideEnglish,\r\n                er: controlOptions.topSpin,\r\n                alphaQ: controlOptions.cueAngle,\r\n                betaQ: controlOptions.cueLine,\r\n                Vqueue:controlOptions.speed,\r\n            }\r\n        );\r\n        console.log(res)\r\n\r\n        if(!res || res.length == 0) return;\r\n        \r\n        this.pathData = res;\r\n\r\n        this.t0 = new Date().getTime() / 1000;\r\n    }\r\n}","import React from 'react';\r\n\r\nimport { Engine, Scene } from 'react-babylonjs';\r\n\r\nimport './styles.css';\r\n\r\nimport SceneManager from './sceneManager';\r\n\r\nclass SimulatorEngine extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            showPath: false,\r\n        }\r\n\r\n        this.board = new SceneManager(\r\n            this.props.size,\r\n            this.props.modelStorePath,\r\n            this.props.currentView,\r\n            {\r\n                posCueBallWhite: {\r\n                    x: this.props.posCueBallWhite.x,\r\n                    z: this.props.posCueBallWhite.z\r\n                },\r\n                posCueBallYellow: {\r\n                    x: this.props.posCueBallYellow.x,\r\n                    z: this.props.posCueBallYellow.z\r\n                },\r\n                posTargetBall: {\r\n                    x: this.props.posTargetBall.x,\r\n                    z: this.props.posTargetBall.z\r\n                }\r\n            },\r\n            {\r\n                cueLine: this.props.cueLine,\r\n                cueAngle: this.props.cueAngle,\r\n                sideEnglish: this.props.sideEnglish,\r\n                topSpin: this.props.topSpin,\r\n                speed: this.props.speed,\r\n            }\r\n        );\r\n\r\n        this.simulatorDom = new React.createRef();\r\n    }\r\n\r\n    meshPicked = ( mesh ) => {\r\n        // console.log('mesh picked', mesh);\r\n    }\r\n\r\n    drawBallPath = (value) => {\r\n        this.board.drawBallPath(value);\r\n    }\r\n\r\n    onSceneMount = ( e ) => {\r\n        const { canvas, scene } = e;\r\n        this.board.initializeScene(scene, canvas);\r\n    }\r\n\r\n    changeView (option) {\r\n        this.board.changeView(option);\r\n    }\r\n\r\n    toggleGrids = (visible) => {\r\n        this.board.toggleGrids(visible);\r\n    }\r\n\r\n    playSimulation = () => {\r\n        this.board.playSimulation();\r\n    }\r\n\r\n    updateControlOptions = (data) => {\r\n        this.board.updateControlOptions(data);\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        // console.log(this.simulatorDom.current);\r\n        // var controller1 = new Container(\r\n        //     this.simulatorDom.current,\r\n        //     text => {})\r\n\r\n        // controller1.eventQueue.push(new BeginEvent())\r\n\r\n        // var keyboard = new Keyboard()\r\n\r\n        // var lastTime = performance.now()\r\n\r\n        // function sampleInputs() {\r\n        //     var t = performance.now() - lastTime\r\n        //     lastTime = performance.now()\r\n        //     var inputs = keyboard.getEvents(t)\r\n        //     inputs.forEach(i => controller1.inputQueue.push(i))\r\n        //     requestAnimationFrame(t => {\r\n        //         sampleInputs()\r\n        //     })\r\n        // }\r\n        // sampleInputs()\r\n        // controller1.animate(performance.now())\r\n    }\r\n    render () {\r\n        return (\r\n            // <div ref={this.simulatorDom} style={{height:'600px'}}></div>\r\n            <Engine canvasId=\"carom-simulator-canvas\">\r\n                <Scene\r\n                    onMeshPicked={this.meshPicked}\r\n                    onSceneMount={this.onSceneMount}\r\n                />\r\n            </Engine>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SimulatorEngine;","import React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faMinus, faPlus } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport './slider.css';\r\n\r\nexport default class InputSlider extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n            value: this.props.value?this.props.value:0\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps = (props) => {\r\n        const {value} = props;\r\n        this.setState({value:value});\r\n    }\r\n\r\n    updateValue = (value) => {\r\n        this.setState({value:value})\r\n        this.props.onUpdate(this.props.itemKey, value);\r\n    }\r\n\r\n    onChangeValue = (evt) => {\r\n        const value = evt.target.value;\r\n        this.updateValue(value);\r\n    }\r\n\r\n    onMinusPressed = () => {\r\n        var currentValue = this.state.value;\r\n        let { min, step } = this.props;\r\n        if (step === undefined) step = 0.1;\r\n        step *= 10;\r\n        currentValue = (currentValue*10 - step)/10;\r\n        if (currentValue <  min) currentValue = min;\r\n        this.updateValue(currentValue);\r\n    }\r\n\r\n    onPlusPressed = () => {\r\n        var currentValue = this.state.value;\r\n        let { max, step } = this.props;\r\n        if (step === undefined) step = 0.1;\r\n        step *= 10;\r\n        currentValue = (currentValue*10 + step)/10;\r\n        if (currentValue > max) currentValue = max;\r\n        this.updateValue(currentValue);\r\n    }\r\n\r\n    render () {\r\n        const {\r\n            value,\r\n        } = this.state;\r\n\r\n        let {\r\n            containerClass,\r\n            label,\r\n            min,\r\n            max,\r\n            unitDom,\r\n            step\r\n        } = this.props\r\n        if (step === undefined) step = 0.1;\r\n        return (\r\n            <div className={containerClass}>\r\n                <div style={{display:'flex'}}>\r\n                    <FontAwesomeIcon\r\n                        icon={faMinus}\r\n                        className=\"btn-change-value\"\r\n                        onClick={this.onMinusPressed}\r\n                    />\r\n                    <span style={{flex:1, textAlign:'center'}}>\r\n                        {label}\r\n                        <span> : {value}{unitDom}</span>\r\n                    </span>\r\n                    <FontAwesomeIcon\r\n                        icon={faPlus}\r\n                        className=\"btn-change-value\"\r\n                        onClick={this.onPlusPressed}\r\n                    />\r\n                </div>\r\n                <input\r\n                    type=\"range\"\r\n                    min={min}\r\n                    max={max}\r\n                    value={value}\r\n                    className=\"slider\"\r\n                    step={step}\r\n                    onChange={this.onChangeValue}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {\r\n    faTh,\r\n    faCrosshairs,\r\n    faVolumeMute,\r\n    faBackward,\r\n    faForward,\r\n    faStop,\r\n    faPlay\r\n} from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport InputSlider from './slider';\r\nimport './style.css';\r\n\r\nexport default class ControllerCollection extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n            cueLine: Math.round(1800 * this.props.cueLine / Math.PI) / 10,\r\n            cueAngle: Math.round(1800 * this.props.cueAngle / Math.PI) / 10,\r\n            sideEnglish: Math.round(this.props.sideEnglish * 10000) / 10,\r\n            topSpin: Math.round(this.props.topSpin * 10000) / 10,\r\n            speed: Math.round(this.props.speed * 100)\r\n        }\r\n    }\r\n\r\n    onInputSliderUpdated = (key, value) => {\r\n        let tmp = Object.assign({}, this.state);\r\n        tmp[key] = parseFloat(value);\r\n        this.setState(tmp);\r\n        let eventValues = Object.assign({}, tmp);\r\n\r\n        eventValues.cueLine = Math.PI * tmp.cueLine / 180;\r\n        eventValues.cueAngle = Math.PI * tmp.cueAngle / 180;\r\n        eventValues.sideEnglish /= 1000;\r\n        eventValues.topSpin /= 1000;\r\n        eventValues.speed /= 100;\r\n        this.props.onControlOptionsUpdated(eventValues);\r\n    }\r\n\r\n    render () {\r\n        const {cueLine, cueAngle, sideEnglish, topSpin, speed} = this.state;\r\n        const {showGrid, showPath} = this.props;\r\n        var btnGridClass = \"toggle-btn\";\r\n        var btnShowPathClass = \"toggle-btn\";\r\n        var btnMuteClass = \"toggle-btn\";\r\n\r\n        if (showGrid === true) btnGridClass += \" active\";\r\n        if (showPath === true) btnShowPathClass += \" active\";\r\n        return (\r\n            <div>\r\n                <div className=\"common-controller-container\">\r\n                    <FontAwesomeIcon\r\n                        className={btnGridClass}\r\n                        icon={faTh}\r\n                        onClick={() => {this.props.onToggleShowGrid(!showGrid)}}\r\n                    />\r\n\r\n                    <FontAwesomeIcon\r\n                        className={btnShowPathClass}\r\n                        icon={faCrosshairs}\r\n                        onClick={() => {this.props.onToggleShowPath(!showPath)}}\r\n                    />\r\n\r\n                    <FontAwesomeIcon\r\n                        className={btnMuteClass}\r\n                        icon={faVolumeMute}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <InputSlider\r\n                        label=\"Cue Line\"\r\n                        containerClass=\"slider-container\"\r\n                        min={0}\r\n                        max={360}\r\n                        value={cueLine}\r\n                        unitDom={<sup>o</sup>}\r\n                        itemKey=\"cueLine\"\r\n                        onUpdate={this.onInputSliderUpdated}\r\n                    />\r\n                    <InputSlider\r\n                        label=\"Cue Angle\"\r\n                        containerClass=\"slider-container\"\r\n                        min={2}\r\n                        max={89}\r\n                        value={cueAngle}\r\n                        unitDom={<sup>o</sup>}\r\n                        itemKey=\"cueAngle\"\r\n                        onUpdate={this.onInputSliderUpdated}\r\n                    />\r\n                    <br/>\r\n                    <InputSlider\r\n                        label=\"Side English\"\r\n                        containerClass=\"slider-container\"\r\n                        min={-15.1}\r\n                        max={15.1}\r\n                        value={sideEnglish}\r\n                        unitDom={<span>mm</span>}\r\n                        itemKey=\"sideEnglish\"\r\n                        onUpdate={this.onInputSliderUpdated}\r\n                    />\r\n                    <InputSlider\r\n                        label=\"Top Spin\"\r\n                        containerClass=\"slider-container\"\r\n                        min={-15.1}\r\n                        max={15.1}\r\n                        value={topSpin}\r\n                        unitDom={<span>mm</span>}\r\n                        itemKey=\"topSpin\"\r\n                        onUpdate={this.onInputSliderUpdated}\r\n                    />\r\n                    <InputSlider\r\n                        label=\"Speed\"\r\n                        containerClass=\"slider-container\"\r\n                        min={0}\r\n                        max={450}\r\n                        value={speed}\r\n                        step={1}\r\n                        unitDom={<span>cm/s</span>}\r\n                        itemKey=\"speed\"\r\n                        onUpdate={this.onInputSliderUpdated}\r\n                    />\r\n                </div>\r\n                <div className=\"play-controller-container\">\r\n                    <FontAwesomeIcon\r\n                        className=\"play-controller\"\r\n                        icon={faBackward}\r\n                    />\r\n                    <FontAwesomeIcon\r\n                        className=\"play-controller\"\r\n                        icon={faStop}\r\n                    />\r\n                    <FontAwesomeIcon\r\n                        className=\"play-controller\"\r\n                        icon={faPlay}\r\n                        onClick={this.props.onPlayPressed}\r\n                    />\r\n                    <FontAwesomeIcon\r\n                        className=\"play-controller\"\r\n                        icon={faForward}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport './styles.css';\r\nexport default class ViewSelector extends Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.viewSelectorItemClicked = this.viewSelectorItemClicked.bind(this);\r\n    }\r\n\r\n    viewSelectorItemClicked (item) {\r\n        if(typeof this.props.viewSelectorItemClicked === 'function'){\r\n            this.props.viewSelectorItemClicked(item);\r\n        }\r\n    }\r\n\r\n    render () {\r\n        let _self = this;\r\n        let str2Dclass = \"view-selector-item\";\r\n        let str3Dclass = \"view-selector-item\";\r\n\r\n        if (this.props.currentView === '2d') {\r\n            str2Dclass += \" active\";\r\n        } else {\r\n            str3Dclass += \" active\";\r\n        }\r\n        return (\r\n            <div className=\"view-selector\">\r\n                <span\r\n                    className={str2Dclass}\r\n                    onClick={function () { _self.viewSelectorItemClicked('2d') }}\r\n                >2D</span>\r\n                <span\r\n                    className={str3Dclass}\r\n                    onClick={function () { _self.viewSelectorItemClicked('3d') }}\r\n                >3D</span>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nimport ViewSelector from './viewSelector';\r\nimport SimulatorEngine from './simulatorEngine';\r\nimport ControllerCollection from './controller';\r\n\r\nimport './styles.css';\r\n\r\nimport {\r\n    INDEX_SIZE,\r\n    INDEX_WHITE_X,\r\n    INDEX_WHITE_Y,\r\n    INDEX_YELLOW_X,\r\n    INDEX_YELLOW_Y,\r\n    INDEX_TARGET_X,\r\n    INDEX_TARGET_Y,\r\n    INDEX_CUELINE,\r\n    INDEX_CUEANGLE,\r\n    INDEX_SIDEENGLISH,\r\n    INDEX_TOPSPIN,\r\n    INDEX_SPEED\r\n} from './constants';\r\n\r\nclass CaromSimulator extends React.Component {\r\n    constructor () {\r\n        super();\r\n\r\n        this.state = {\r\n            currentView : '2d',\r\n            showGrid : true,\r\n            showPath: false,\r\n            size: 310,\r\n            cueLine: 30,\r\n            cueAngle: 5,\r\n            sideEnglish: -8.7,\r\n            topSpin: 7.5,\r\n            speed: 380,\r\n            posCueBallWhite: {},\r\n            posCueBallYellow: {},\r\n            posTargetBall: {}\r\n        }\r\n        this.simulator = React.createRef();\r\n    }\r\n    componentWillMount = () => {\r\n        this.updateSimulateInfo();\r\n    }\r\n    updateSimulateInfo = () => {\r\n        var info = [\r\n            'Santiago  Soto Sanchez',\r\n            '...',\r\n            '0',\r\n            '310',\r\n            '2',\r\n            '1',\r\n            '1.1661666666666661',\r\n            '0.6288333333333332',\r\n            '0.8181666666666672',\r\n            '0.5041666666666665',\r\n            '-0.6036666666666667',\r\n            '-0.003833333333333161',\r\n            '4.015999999999998',\r\n            '0.520497057626843',\r\n            '0.21066799020683835',\r\n            '-0.0013500000000002585',\r\n            '-0.0146999999999997',\r\n        ];\r\n        let size = 2.8;\r\n\r\n        let cueLine = parseFloat(info[INDEX_CUELINE]);\r\n\r\n        let cueAngle = parseFloat(info[INDEX_CUEANGLE]);\r\n\r\n        let sideEnglish = parseFloat(info[INDEX_SIDEENGLISH]);\r\n\r\n        let topSpin = parseFloat(info[INDEX_TOPSPIN]);\r\n\r\n        let speed = parseFloat(info[INDEX_SPEED]);\r\n\r\n        let posCueBallWhite = {\r\n            x: parseFloat(info[INDEX_WHITE_X]),\r\n            z: parseFloat(info[INDEX_WHITE_Y])\r\n        }\r\n\r\n        let posCueBallYellow = {\r\n            x: parseFloat(info[INDEX_YELLOW_X]),\r\n            z: parseFloat(info[INDEX_YELLOW_Y])\r\n        }\r\n\r\n        let posTargetBall = {\r\n            x: parseFloat(info[INDEX_TARGET_X]),\r\n            z: parseFloat(info[INDEX_TARGET_Y])\r\n        }\r\n\r\n        let tmp = {\r\n            size: size,\r\n            cueLine: cueLine,\r\n            cueAngle: cueAngle,\r\n            sideEnglish: sideEnglish,\r\n            topSpin: topSpin,\r\n            speed: speed,\r\n            posCueBallWhite: posCueBallWhite,\r\n            posCueBallYellow: posCueBallYellow,\r\n            posTargetBall: posTargetBall\r\n        }\r\n\r\n        this.setState(tmp)\r\n    }\r\n\r\n    viewSelectorItemClicked = (item) => {\r\n        this.setState({currentView: item});\r\n        this.simulator.current.changeView(item);\r\n    }\r\n\r\n    onToggleShowGrid = (value) => {\r\n        this.setState({showGrid: value})\r\n        this.simulator.current.toggleGrids(value);\r\n    }\r\n\r\n    onToggleShowPath = (value) => {\r\n        this.setState({showPath: value})\r\n        this.simulator.current.drawBallPath(value);\r\n    }\r\n\r\n    onPlayPressed = () => {\r\n        this.simulator.current.playSimulation();\r\n    }\r\n\r\n    onControlOptionsUpdated = (data) => {\r\n        this.simulator.current.updateControlOptions(data);\r\n    }\r\n\r\n    componentDidMount = () => {\r\n    }\r\n\r\n    render () {\r\n        const {\r\n            currentView,\r\n\r\n            showGrid,\r\n            showPath,\r\n\r\n            size,\r\n            cueLine,\r\n            cueAngle,\r\n            sideEnglish,\r\n            topSpin,\r\n            speed,\r\n\r\n            posCueBallWhite,\r\n            posCueBallYellow,\r\n            posTargetBall,\r\n        } = this.state;\r\n        return (\r\n            <div className=\"simulator-container\">\r\n                <ViewSelector\r\n                    currentView={currentView}\r\n                    viewSelectorItemClicked={this.viewSelectorItemClicked}\r\n                />\r\n                <SimulatorEngine\r\n                    modelStorePath={this.props.modelStorePath}\r\n                    ref={this.simulator}\r\n\r\n                    size={size}\r\n                    currentView={currentView}\r\n                    cueLine = {cueLine}\r\n                    cueAngle = {cueAngle}\r\n                    sideEnglish = {sideEnglish}\r\n                    topSpin = {topSpin}\r\n                    speed = {speed}\r\n\r\n                    posCueBallWhite = {posCueBallWhite}\r\n                    posCueBallYellow = {posCueBallYellow}\r\n                    posTargetBall = {posTargetBall}\r\n                />\r\n                <ControllerCollection\r\n                    showGrid={showGrid}\r\n                    showPath={showPath}\r\n                    cueLine = {cueLine}\r\n                    cueAngle = {cueAngle}\r\n                    sideEnglish = {sideEnglish}\r\n                    topSpin = {topSpin}\r\n                    speed = {speed}\r\n\r\n                    onControlOptionsUpdated={this.onControlOptionsUpdated}\r\n\r\n                    onToggleShowGrid={this.onToggleShowGrid}\r\n                    onToggleShowPath = {this.onToggleShowPath}\r\n                    onPlayPressed = {this.onPlayPressed}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CaromSimulator;","// model files\r\nexport const fileTableModel = \"pooltable.babylon\";\r\nexport const fileBatModel = \"bat.babylon\";\r\nexport const TABLE_LENGTH = 404; //pixel\r\n// end model files\r\n\r\n// for simulator\r\nexport const BALL_SIZE = 5.715; // cm\r\n\r\nexport const ballMass = 0.17;\r\n\r\nexport const linearSpeedDampingRate = 0.9;\r\nexport const angularSpeedDampingRate = 0.9;\r\nexport const rollingRate = 0.5;\r\nexport const perpendicularForceRate = 0.3;\r\nexport const CONSTANTS_SPEED_NORMAL = {\r\n    timeStep: 0.01666,\r\n    gravityRate: 0.16,\r\n    // gravityRate: 0.72,\r\n    forceMagnitude: 0.2,\r\n\r\n    ballFriction: 0.8, //u\r\n    ballRestitution: 0.95, //e\r\n\r\n    ballNativeOptions: {\r\n\r\n    },\r\n\r\n    carpetFriction: 0.9, //u\r\n    carpetRestitution: 0.5, //e\r\n\r\n    carpetRailFriction: 0.2, // u\r\n    carpetRailRestitution: 0.98, //e\r\n}\r\n\r\nexport const maxDelta = 0.5;\r\n// end for simulator\r\n\r\n// get data from server\r\nexport const INDEX_SIZE = 3;\r\nexport const INDEX_WHITE_X = 6;\r\nexport const INDEX_WHITE_Y = 7;\r\nexport const INDEX_YELLOW_X = 8;\r\nexport const INDEX_YELLOW_Y = 9;\r\nexport const INDEX_TARGET_X = 10;\r\nexport const INDEX_TARGET_Y = 11;\r\nexport const INDEX_SPEED = 12;\r\nexport const INDEX_CUEANGLE = 13;\r\nexport const INDEX_CUELINE = 14;\r\nexport const INDEX_SIDEENGLISH = 15;\r\nexport const INDEX_TOPSPIN = 16;\r\n// end get data for server","export default class parametres {\r\n    noba;\r\n    NBILLES;\r\n    quant;\r\n    RApInit;\r\n    RArInit;\r\n    larg_billard;\r\n    RAqInit;\r\n    empocheeInit;\r\n    betaQ;\r\n    el;\r\n    Xinit;\r\n    Yinit;\r\n    er;\r\n    HBande = 0.035;\r\n    long_billard;\r\n    alphaQ;\r\n    Vqueue;\r\n    bille_visee;\r\n\r\n    constructor(param1, param2)\r\n    {\r\n        var _loc_3 = 0;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = 0;\r\n        var _loc_6 = false;\r\n        this.NBILLES = 16;\r\n        this.long_billard = param1;\r\n        this.larg_billard = param2;\r\n        this.Xinit = [];\r\n        this.Yinit = [];\r\n        this.RApInit = [];\r\n        this.RAqInit = [];\r\n        this.RArInit = [];\r\n        this.empocheeInit = [];\r\n        _loc_3 = 0;\r\n        while (_loc_3 < this.NBILLES)\r\n        {\r\n            \r\n            this.RApInit[_loc_3] = 0;\r\n            this.RAqInit[_loc_3] = 0;\r\n            this.RArInit[_loc_3] = 0;\r\n            _loc_3++;\r\n        }\r\n        var _loc_7 = 0.03;\r\n        this.Xinit[0] = 0;\r\n        this.Yinit[0] = (-param2) / 4;\r\n        this.empocheeInit[0] = false;\r\n        _loc_3 = 1;\r\n        while (_loc_3 < 16)\r\n        {\r\n            \r\n            do\r\n            {\r\n                \r\n                this.Xinit[_loc_3] = (_loc_3 - 8) * 0.1;\r\n                this.Yinit[_loc_3] = 0;\r\n                _loc_6 = true;\r\n                _loc_5 = 0;\r\n                while (_loc_5 < _loc_3 && _loc_6)\r\n                {\r\n                    \r\n                    _loc_4 = (this.Xinit[_loc_3] - this.Xinit[_loc_5]) * (this.Xinit[_loc_3] - this.Xinit[_loc_5]) + (this.Yinit[_loc_3] - this.Yinit[_loc_5]) * (this.Yinit[_loc_3] - this.Yinit[_loc_5]);\r\n                    if (_loc_4 < 0.004)\r\n                    {\r\n                        _loc_6 = false;\r\n                    }\r\n                    _loc_5++;\r\n                }\r\n                this.empocheeInit[_loc_3] = false;\r\n            }while (!_loc_6)\r\n            _loc_3++;\r\n        }\r\n        this.Vqueue = 1.5;\r\n        this.el = 0;\r\n        this.er = 0;\r\n        this.alphaQ = 0.033916;\r\n        this.betaQ = -7 * Math.PI / 8;\r\n        return;\r\n    }// end function\r\n\r\n    direction_beta(param1, param2, param3) {\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = 0.03;\r\n        _loc_6 = Math.sqrt((this.Xinit[0] - param2) * (this.Xinit[0] - param2) + (this.Yinit[0] - param3) * (this.Yinit[0] - param3));\r\n        param1 = param1 * (2 * _loc_7);\r\n        _loc_4 = Math.asin(param1 / _loc_6);\r\n        _loc_5 = this.atanjimi(param3 - this.Yinit[0], param2 - this.Xinit[0]);\r\n        if (_loc_5 - _loc_4 > Math.PI)\r\n        {\r\n            return _loc_5 - _loc_4 - 2 * Math.PI;\r\n        }\r\n        if (_loc_5 - _loc_4 < -Math.PI)\r\n        {\r\n            return _loc_5 - _loc_4 + 2 * Math.PI;\r\n        }\r\n        return _loc_5 - _loc_4;\r\n    }// end function\r\n\r\n    ToucheBandeX(param1) {\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_9 = NaN;\r\n        var _loc_10 = NaN;\r\n        var _loc_11 = NaN;\r\n        var _loc_12 = NaN;\r\n        var _loc_13 = NaN;\r\n        var _loc_14 = NaN;\r\n        var _loc_15 = NaN;\r\n        var _loc_16 = NaN;\r\n        var _loc_17 = NaN;\r\n        var _loc_18 = NaN;\r\n        var _loc_7 = 0.03;\r\n        var _loc_19 = 1e-005;\r\n        var _loc_20 = 1.4;\r\n        var _loc_21 = 0.006;\r\n        var _loc_22 = 0.015;\r\n        while (this.betaQ < 0)\r\n        {\r\n            \r\n            this.betaQ = this.betaQ + 2 * Math.PI;\r\n        }\r\n        while (this.betaQ >= 2 * Math.PI)\r\n        {\r\n            \r\n            this.betaQ = this.betaQ - 2 * Math.PI;\r\n        }\r\n        _loc_14 = this.betaQ;\r\n        _loc_13 = param1;\r\n        _loc_17 = Math.cos(_loc_14);\r\n        _loc_18 = Math.sin(_loc_14);\r\n        _loc_15 = Math.cos(_loc_13);\r\n        _loc_16 = Math.sin(_loc_13);\r\n        _loc_12 = Math.sqrt(_loc_7 * _loc_7 - this.er * this.er - this.el * this.el);\r\n        _loc_9 = (_loc_12 * _loc_15 - this.er * _loc_16) * _loc_17 - this.el * _loc_18;\r\n        _loc_10 = _loc_12 * _loc_16 + this.er * _loc_15;\r\n        _loc_11 = (_loc_12 * _loc_15 - this.er * _loc_16) * _loc_18 + this.el * _loc_17;\r\n        _loc_2 = this.Xinit[0] + _loc_9;\r\n        _loc_3 = _loc_7 + _loc_10;\r\n        _loc_4 = this.Yinit[0] + _loc_11;\r\n        _loc_6 = this.long_billard / 2;\r\n        if (Math.abs(_loc_17) < _loc_19)\r\n        {\r\n            return false;\r\n        }\r\n        if (_loc_14 > Math.PI / 2 && _loc_14 < 3 * Math.PI / 2)\r\n        {\r\n            _loc_17 = -_loc_17;\r\n            _loc_2 = -_loc_2;\r\n        }\r\n        _loc_8 = (_loc_6 - _loc_2) / _loc_17;\r\n        if (_loc_8 > _loc_20)\r\n        {\r\n            return false;\r\n        }\r\n        _loc_5 = _loc_21 + (_loc_22 - _loc_21) / _loc_20 * _loc_8 / _loc_15;\r\n        if (_loc_8 * _loc_16 / _loc_15 + _loc_3 > this.HBande + _loc_5 / _loc_15)\r\n        {\r\n            return false;\r\n        }\r\n        return true;\r\n    }// end function\r\n\r\n    atanjimi(param1, param2) {\r\n        var _loc_3 = NaN;\r\n        if (Math.abs(param2) < 1e-006)\r\n        {\r\n            if (param1 > 0)\r\n            {\r\n                return Math.PI / 2;\r\n            }\r\n            return (-Math.PI) / 2;\r\n        }\r\n        _loc_3 = Math.atan(param1 / param2);\r\n        if (param2 > 0)\r\n        {\r\n            return _loc_3;\r\n        }\r\n        if (param1 < 0)\r\n        {\r\n            return _loc_3 - Math.PI;\r\n        }\r\n        return _loc_3 + Math.PI;\r\n    }// end function\r\n\r\n    Quantite() {\r\n        var _loc_1 = 0;\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = [];\r\n        var _loc_4 = [];\r\n        var _loc_5 = 0.03;\r\n        _loc_2 = this.betaQ + Math.PI;\r\n        _loc_1 = 1;\r\n        while (_loc_1 < this.NBILLES)\r\n        {\r\n            \r\n            _loc_3[_loc_1] = false;\r\n            if (!this.empocheeInit[_loc_1])\r\n            {\r\n                if ((this.Xinit[_loc_1] - this.Xinit[0]) * Math.cos(_loc_2) + (this.Yinit[_loc_1] - this.Yinit[0]) * Math.sin(_loc_2) > 0)\r\n                {\r\n                    _loc_4[_loc_1] = (this.Yinit[_loc_1] - this.Yinit[0]) * Math.cos(_loc_2) - (this.Xinit[_loc_1] - this.Xinit[0]) * Math.sin(_loc_2);\r\n                    if (_loc_4[_loc_1] < 2 * _loc_5 && _loc_4[_loc_1] > -2 * _loc_5)\r\n                    {\r\n                        _loc_3[_loc_1] = true;\r\n                    }\r\n                }\r\n            }\r\n            _loc_1++;\r\n        }\r\n        this.bille_visee = -1;\r\n        var _loc_6 = 100;\r\n        _loc_1 = 1;\r\n        while (_loc_1 < this.NBILLES)\r\n        {\r\n            \r\n            if (_loc_3[_loc_1])\r\n            {\r\n                if ((this.Xinit[_loc_1] - this.Xinit[0]) * (this.Xinit[_loc_1] - this.Xinit[0]) + (this.Yinit[_loc_1] - this.Yinit[0]) * (this.Yinit[_loc_1] - this.Yinit[0]) < _loc_6)\r\n                {\r\n                    this.bille_visee = _loc_1;\r\n                    _loc_6 = (this.Xinit[_loc_1] - this.Xinit[0]) * (this.Xinit[_loc_1] - this.Xinit[0]) + (this.Yinit[_loc_1] - this.Yinit[0]) * (this.Yinit[_loc_1] - this.Yinit[0]);\r\n                }\r\n            }\r\n            _loc_1++;\r\n        }\r\n        if (this.bille_visee != -1)\r\n        {\r\n            this.noba = true;\r\n            this.quant = _loc_4[this.bille_visee] / 2 / _loc_5;\r\n        }\r\n        else\r\n        {\r\n            this.noba = false;\r\n            this.quant = 0;\r\n        }\r\n        return this.quant;\r\n    }// end function\r\n\r\n    ToucheBille(param1) {\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_9 = NaN;\r\n        var _loc_10 = NaN;\r\n        var _loc_11 = NaN;\r\n        var _loc_14 = NaN;\r\n        var _loc_15 = NaN;\r\n        var _loc_16 = NaN;\r\n        var _loc_22 = 0;\r\n        var _loc_7 = 0.03;\r\n        var _loc_12 = 0.002;\r\n        var _loc_13 = 0.032;\r\n        var _loc_17 = 1.4;\r\n        var _loc_18 = 0.006;\r\n        var _loc_19 = 0.015;\r\n        var _loc_20 = param1;\r\n        var _loc_21 = this.betaQ;\r\n        _loc_22 = 1;\r\n        while (_loc_22 < this.NBILLES)\r\n        {\r\n            \r\n            _loc_2 = this.Xinit[0] + _loc_13 * Math.cos(_loc_21) * Math.cos(_loc_20) - this.el * Math.sin(_loc_21) - this.er * Math.sin(_loc_20) * Math.cos(_loc_21);\r\n            _loc_3 = 0.03 + _loc_13 * Math.sin(_loc_20) + this.er * Math.cos(_loc_20);\r\n            _loc_4 = this.Yinit[0] + _loc_13 * Math.sin(_loc_21) * Math.cos(_loc_20) + this.el * Math.cos(_loc_21) - this.er * Math.sin(_loc_20) * Math.sin(_loc_21);\r\n            _loc_8 = this.Xinit[_loc_22];\r\n            _loc_9 = 0.03;\r\n            _loc_10 = this.Yinit[_loc_22];\r\n            _loc_6 = 0;\r\n            while (_loc_6 < _loc_17)\r\n            {\r\n                \r\n                _loc_5 = _loc_18 + (_loc_19 - _loc_18) / _loc_17 * _loc_6;\r\n                _loc_14 = _loc_2 + _loc_6 * Math.cos(_loc_20) * Math.cos(_loc_21);\r\n                _loc_15 = _loc_3 + _loc_6 * Math.sin(_loc_20);\r\n                _loc_16 = _loc_4 + _loc_6 * Math.cos(_loc_20) * Math.sin(_loc_21);\r\n                _loc_11 = (_loc_14 - _loc_8) * (_loc_14 - _loc_8) + (_loc_15 - _loc_9) * (_loc_15 - _loc_9) + (_loc_16 - _loc_10) * (_loc_16 - _loc_10);\r\n                if (_loc_11 < (_loc_7 + _loc_5 + _loc_12) * (_loc_7 + _loc_5 + _loc_12))\r\n                {\r\n                    return true;\r\n                }\r\n                _loc_6 = _loc_6 + 0.01;\r\n            }\r\n            _loc_22++;\r\n        }\r\n        return false;\r\n    }// end function\r\n\r\n    ToucheBandeZ(param1) {\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = NaN;\r\n        var _loc_9 = NaN;\r\n        var _loc_10 = NaN;\r\n        var _loc_11 = NaN;\r\n        var _loc_12 = NaN;\r\n        var _loc_13 = NaN;\r\n        var _loc_14 = NaN;\r\n        var _loc_15 = NaN;\r\n        var _loc_16 = NaN;\r\n        var _loc_17 = NaN;\r\n        var _loc_18 = NaN;\r\n        var _loc_19 = NaN;\r\n        var _loc_8 = 0.03;\r\n        var _loc_20 = 1e-005;\r\n        var _loc_21 = 1.4;\r\n        var _loc_22 = 0.006;\r\n        var _loc_23 = 0.015;\r\n        while (this.betaQ < 0)\r\n        {\r\n            \r\n            this.betaQ = this.betaQ + 2 * Math.PI;\r\n        }\r\n        while (this.betaQ >= 2 * Math.PI)\r\n        {\r\n            \r\n            this.betaQ = this.betaQ - 2 * Math.PI;\r\n        }\r\n        _loc_15 = this.betaQ;\r\n        _loc_14 = param1;\r\n        _loc_18 = Math.cos(_loc_15);\r\n        _loc_19 = Math.sin(_loc_15);\r\n        _loc_16 = Math.cos(_loc_14);\r\n        _loc_17 = Math.sin(_loc_14);\r\n        _loc_13 = Math.sqrt(_loc_8 * _loc_8 - this.er * this.er - this.el * this.el);\r\n        _loc_10 = (_loc_13 * _loc_16 - this.er * _loc_17) * _loc_18 - this.el * _loc_19;\r\n        _loc_11 = _loc_13 * _loc_17 + this.er * _loc_16;\r\n        _loc_12 = (_loc_13 * _loc_16 - this.er * _loc_17) * _loc_19 + this.el * _loc_18;\r\n        _loc_2 = this.Xinit[0] + _loc_10;\r\n        _loc_3 = _loc_8 + _loc_11;\r\n        _loc_4 = this.Yinit[0] + _loc_12;\r\n        _loc_7 = this.larg_billard / 2;\r\n        if (Math.abs(_loc_19) < _loc_20)\r\n        {\r\n            return false;\r\n        }\r\n        if (_loc_15 > Math.PI)\r\n        {\r\n            _loc_19 = -_loc_19;\r\n            _loc_4 = -_loc_4;\r\n        }\r\n        _loc_9 = (_loc_7 - _loc_4) / _loc_19;\r\n        if (_loc_9 > _loc_21)\r\n        {\r\n            return false;\r\n        }\r\n        _loc_5 = _loc_22 + (_loc_23 - _loc_22) / _loc_21 * _loc_9 / _loc_16;\r\n        if (_loc_9 * _loc_17 / _loc_16 + _loc_3 > this.HBande + _loc_5 / _loc_16)\r\n        {\r\n            return false;\r\n        }\r\n        return true;\r\n    }// end function\r\n\r\n    AlphaQmin() {\r\n        var _loc_1 = 0;\r\n        while (this.ToucheBandeZ(_loc_1) || this.ToucheBandeX(_loc_1) || this.ToucheBille(_loc_1))\r\n        {\r\n            \r\n            _loc_1 = _loc_1 + Math.PI / 90;\r\n        }\r\n        return _loc_1;\r\n    }// end function\r\n}","export default class son {\r\n    played;\r\n    intensite;\r\n    type_choc;\r\n    temps;\r\n\r\n    constructor () {\r\n        this.played = false;\r\n        return;\r\n    }\r\n}","export default class evt {\r\n    RAp;\r\n    RAr;\r\n    RAq;\r\n    time;\r\n    X;\r\n    Y;\r\n\r\n    constructor () {\r\n        return;\r\n    }\r\n}","import son from './son';\r\nimport evt from './evt';\r\nexport default class simul {\r\n    r0;\r\n    b1 = -0.96912;\r\n    b3 = 0.76856;\r\n    first_bille_choquee;\r\n    b2;\r\n    RAp;\r\n    RAq;\r\n    RAr;\r\n    time_empochee;\r\n    RSG = 1;\r\n    RAp0;\r\n    RTROU = 0.0533;\r\n    empochee_fin;\r\n    fgpas = 0.00225;\r\n    D;\r\n    RApfin;\r\n    YMAX;\r\n    RAq0;\r\n    R;\r\n    frpas = 6.3e-005;\r\n    X;\r\n    Y;\r\n    vqueue;\r\n    Rq;\r\n    Rr;\r\n    duree;\r\n    Rp;\r\n    EPSILON_COIN = 0.8;\r\n    RAr0;\r\n    deltaVN;\r\n    beta_gliss;\r\n    XTROU2 = 0;\r\n    VN0;\r\n    sorties;\r\n    calculs_finis;\r\n    Vinit;\r\n    QCQ = 2;\r\n    Rfppas = 0.000135;\r\n    deltaclef;\r\n    f1 = 0.375;\r\n    f2 = 0.61;\r\n    fbille = 0.075;\r\n    eff_s;\r\n    Rfp = 0.225;\r\n    nb_clefs;\r\n    pas = 0.0005;\r\n    VMz;\r\n    fp1 = 0.3;\r\n    RAqfin;\r\n    intens;\r\n    resolution;\r\n    er;\r\n    el;\r\n    alpha_bande;\r\n    ARRET = 0;\r\n    VN;\r\n    Xfin;\r\n    angle_poche_coin = 0.890118;\r\n    DateMax;\r\n    fg = 3.75;\r\n    YTROU = 0.652;\r\n    VT;\r\n    angle_poche_centrale = -0.244346;\r\n    nb_sons;\r\n    immobile;\r\n    fr = 0.09;\r\n    distance13;\r\n    X0;\r\n    XMIN;\r\n    choc12;\r\n    choc13;\r\n    Vy;\r\n    Vx;\r\n    XC = -1.1867;\r\n    EMPOCHEE = 4;\r\n    XE = -0.0633;\r\n    XF = -0.03333;\r\n    evts;\r\n    XB = -1.2467;\r\n    Y0;\r\n    XA = -1.27;\r\n    delta_fgpas = 0.00786;\r\n    XD;\r\n    date_arret;\r\n    RArfin;\r\n    YB = 0.57055;\r\n    YC = 0.635;\r\n    YF = 0.635;\r\n    nb3;\r\n    YA = 0.55167;\r\n    Yfin;\r\n    YTROU2 = 0.6883;\r\n    e_s;\r\n    YD;\r\n    YE = 0.635;\r\n    VQx;\r\n    VQy;\r\n    etat;\r\n    VRp;\r\n    VRq;\r\n    VRr;\r\n    YMIN;\r\n    XTROU = -1.2867;\r\n    nb_max_sons;\r\n    EPSILON = 0.86;\r\n    effet;\r\n    alph;\r\n    nb_max_clefs;\r\n    d13;\r\n    done;\r\n    Vx0;\r\n    nbandes;\r\n    Vy0;\r\n    TSP = 3;\r\n    RendementChoc;\r\n    date;\r\n    p0;\r\n    evts_son;\r\n    beta_adh;\r\n    q0;\r\n    nb_b_avant;\r\n    XMAX;\r\n    beta;\r\n    a3 = 4.0108;\r\n    deltaclefRot;\r\n    a1 = -1.235;\r\n    a2 = -0.80978;\r\n\r\n    constructor(param1, param2)\r\n    {\r\n        var _loc_3 = 0;\r\n        this.XD = this.XC - 0.03 * Math.sin(39 * Math.PI / 180);\r\n        this.YD = this.YC - 0.03 * Math.cos(39 * Math.PI / 180);\r\n        this.b2 = this.YD - this.a2 * this.XD;\r\n        this.XMAX = param1;\r\n        this.YMAX = param2;\r\n        this.XMIN = -param1;\r\n        this.YMIN = -param2;\r\n        this.nb_max_clefs = 10000;\r\n        this.nb_clefs = [];\r\n        _loc_3 = 0;\r\n        while (_loc_3 < 16)\r\n        {\r\n            \r\n            this.nb_clefs[_loc_3] = 0;\r\n            _loc_3++;\r\n        }\r\n        this.evts = [];\r\n        this.nb_max_sons = 100;\r\n        this.nb_sons = 0;\r\n        this.evts_son = [];\r\n        this.sorties = [];\r\n        this.eff_s = [];\r\n        this.etat = [];\r\n        this.X0 = [];\r\n        this.Y0 = [];\r\n        this.X = [];\r\n        this.Y = [];\r\n        this.Xfin = [];\r\n        this.Yfin = [];\r\n        this.RAp = [];\r\n        this.RAq = [];\r\n        this.RAr = [];\r\n        this.RAp0 = [];\r\n        this.RAq0 = [];\r\n        this.RAr0 = [];\r\n        this.RApfin = [];\r\n        this.RAqfin = [];\r\n        this.RArfin = [];\r\n        this.empochee_fin = [];\r\n        this.Vx = [];\r\n        this.Vy = [];\r\n        this.Rp = [];\r\n        this.Rq = [];\r\n        this.Rr = [];\r\n        this.VQx = [];\r\n        this.VQy = [];\r\n        this.etat = [];\r\n        this.time_empochee = [];\r\n        this.immobile = [];\r\n        this.date_arret = [];\r\n        this.D = 0.06;\r\n        this.R = 0.03;\r\n        this.RendementChoc = 0.8;\r\n        this.deltaclefRot = this.R * Math.PI / 10;\r\n        this.resolution = 0.01;\r\n        this.done = false;\r\n        this.sorties[0] = 0;\r\n        this.sorties[1] = 0;\r\n        this.sorties[2] = 0;\r\n        this.sorties[3] = 7.5;\r\n        this.sorties[4] = 7.5;\r\n        this.sorties[5] = 7.5;\r\n        this.sorties[6] = 16;\r\n        this.sorties[7] = 16;\r\n        this.sorties[8] = 16;\r\n        this.sorties[9] = 33;\r\n        this.sorties[10] = 32;\r\n        this.sorties[11] = 23.5;\r\n        this.sorties[12] = 52;\r\n        this.sorties[13] = 43;\r\n        this.sorties[14] = 31;\r\n        this.sorties[15] = 72;\r\n        this.sorties[16] = 53;\r\n        this.sorties[17] = 35;\r\n        this.sorties[18] = 86;\r\n        this.sorties[19] = 60;\r\n        this.sorties[20] = 38;\r\n        this.sorties[21] = 100;\r\n        this.sorties[22] = 69;\r\n        this.sorties[23] = 44;\r\n        this.sorties[24] = 108;\r\n        this.sorties[25] = 79;\r\n        this.sorties[26] = 53;\r\n        this.sorties[27] = 120;\r\n        this.sorties[28] = 90;\r\n        this.sorties[29] = 60;\r\n        this.eff_s[0] = -1.5;\r\n        this.eff_s[1] = 0;\r\n        this.eff_s[2] = 1.5;\r\n        this.eff_s[3] = -1.5;\r\n        this.eff_s[4] = 0.5;\r\n        this.eff_s[5] = 1.2;\r\n        this.eff_s[6] = -1.3;\r\n        this.eff_s[7] = 0.7;\r\n        this.eff_s[8] = 1.3;\r\n        this.eff_s[9] = -0.5;\r\n        this.eff_s[10] = 1.3;\r\n        this.eff_s[11] = 1.2;\r\n        this.eff_s[12] = -0.5;\r\n        this.eff_s[13] = 1.3;\r\n        this.eff_s[14] = 1.1;\r\n        this.eff_s[15] = -0.3;\r\n        this.eff_s[16] = 0.8;\r\n        this.eff_s[17] = 1.2;\r\n        this.eff_s[18] = 0;\r\n        this.eff_s[19] = 0.7;\r\n        this.eff_s[20] = 1.2;\r\n        this.eff_s[21] = 0;\r\n        this.eff_s[22] = 0.5;\r\n        this.eff_s[23] = 1.5;\r\n        this.eff_s[24] = -0.6;\r\n        this.eff_s[25] = 0.2;\r\n        this.eff_s[26] = 1.5;\r\n        this.eff_s[27] = -0.65;\r\n        this.eff_s[28] = 0;\r\n        this.eff_s[29] = 1.5;\r\n        return;\r\n    }// end function\r\n\r\n    choc_bande(param1) {\r\n        var _loc_2 = NaN;\r\n        if (this.X[param1] > this.XMIN && this.X[param1] < this.XMAX && this.Y[param1] > this.YMIN && this.Y[param1] < this.YMAX)\r\n        {\r\n            return false;\r\n        }\r\n        if (this.X[param1] < this.XMIN && this.Vx[param1] > 0)\r\n        {\r\n            return false;\r\n        }\r\n        if (this.X[param1] > this.XMAX && this.Vx[param1] < 0)\r\n        {\r\n            return false;\r\n        }\r\n        if (this.Y[param1] > this.YMAX && this.Vy[param1] < 0)\r\n        {\r\n            return false;\r\n        }\r\n        if (this.Y[param1] < this.YMIN && this.Vy[param1] > 0)\r\n        {\r\n            return false;\r\n        }\r\n        if (this.etat[param1] == this.RSG)\r\n        {\r\n            this.Rp[param1] = -this.Vy[param1];\r\n            this.Rq[param1] = this.Vx[param1];\r\n        }\r\n        else if (this.etat[param1] == this.QCQ)\r\n        {\r\n            this.Rp[param1] = -this.Vy[param1] + this.VQy[param1];\r\n            this.Rq[param1] = this.Vx[param1] - this.VQx[param1];\r\n        }\r\n        this.init_pars(param1);\r\n        this.VMz = this.VT - this.VRr;\r\n        this.VN0 = -this.VN;\r\n        this.VN = this.VN * (-this.EPSILON);\r\n        this.deltaVN = this.VN0 + this.VN;\r\n        this.intens = this.VN0 / 20;\r\n        if (this.intens > 1)\r\n        {\r\n            this.intens = 1;\r\n        }\r\n        this.beta_adh = 2 / 7 * Math.sqrt(this.VMz * this.VMz + this.VRq * this.VRq);\r\n        this.beta_gliss = this.f1 * this.deltaVN;\r\n        if (Math.abs(this.VMz) < 1e-005)\r\n        {\r\n            this.alpha_bande = Math.PI / 2;\r\n        }\r\n        else\r\n        {\r\n            this.alpha_bande = Math.abs(Math.atan(this.VRq / this.VMz));\r\n        }\r\n        _loc_2 = Math.abs(this.fp1 * this.deltaVN);\r\n        if (Math.abs(this.VRp) < _loc_2)\r\n        {\r\n            this.VRp = 0;\r\n        }\r\n        else if (this.VRp > 0)\r\n        {\r\n            this.VRp = this.VRp - _loc_2;\r\n        }\r\n        else\r\n        {\r\n            this.VRp = this.VRp + _loc_2;\r\n        }\r\n        _loc_2 = Math.abs(this.f2 * this.deltaVN);\r\n        this.VRq = this.VRq + _loc_2;\r\n        this.choc_adh(param1);\r\n        this.recup_pars(param1);\r\n        this.VQx[param1] = this.Vx[param1] - this.Rq[param1];\r\n        this.VQy[param1] = this.Vy[param1] + this.Rp[param1];\r\n        this.etat[param1] = this.QCQ;\r\n        return true;\r\n    }// end function\r\n\r\n    mise_a_jour(param1) {\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = false;\r\n        if (this.etat[param1] == this.RSG)\r\n        {\r\n            _loc_2 = Math.sqrt(this.Vx[param1] * this.Vx[param1] + this.Vy[param1] * this.Vy[param1]);\r\n            if (_loc_2 < this.frpas)\r\n            {\r\n                var _loc_8 = 0;\r\n                this.Vy[param1] = 0;\r\n                this.Vx[param1] = _loc_8;\r\n                var _loc_8 = 0;\r\n                this.Rq[param1] = 0;\r\n                this.Rp[param1] = _loc_8;\r\n                if (Math.abs(this.Rr[param1]) < this.Rfppas)\r\n                {\r\n                    this.date_arret[param1] = this.date * this.pas;\r\n                    this.etat[param1] = this.ARRET;\r\n                    this.Rr[param1] = 0;\r\n                    this.add_clef(param1);\r\n                    return true;\r\n                }\r\n                this.etat[param1] = this.TSP;\r\n            }\r\n            if (this.etat[param1] != this.TSP)\r\n            {\r\n                _loc_3 = 1 - this.frpas / _loc_2;\r\n                this.Vx[param1] = this.Vx[param1] * _loc_3;\r\n                this.Vy[param1] = this.Vy[param1] * _loc_3;\r\n                this.Rp[param1] = -this.Vy[param1];\r\n                this.Rq[param1] = this.Vx[param1];\r\n            }\r\n            if (Math.abs(this.Rr[param1]) < this.Rfppas)\r\n            {\r\n                this.Rr[param1] = 0;\r\n            }\r\n            else if (this.Rr[param1] > 0)\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] - this.Rfppas;\r\n            }\r\n            else\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] + this.Rfppas;\r\n            }\r\n        }\r\n        if (this.etat[param1] == this.QCQ)\r\n        {\r\n            _loc_4 = Math.sqrt(this.VQx[param1] * this.VQx[param1] + this.VQy[param1] * this.VQy[param1]);\r\n            if (_loc_4 < this.delta_fgpas)\r\n            {\r\n                this.etat[param1] = this.RSG;\r\n            }\r\n            else\r\n            {\r\n                _loc_5 = (-this.fgpas) * this.VQx[param1] / _loc_4;\r\n                _loc_6 = (-this.fgpas) * this.VQy[param1] / _loc_4;\r\n                this.Vx[param1] = this.Vx[param1] + _loc_5;\r\n                this.Vy[param1] = this.Vy[param1] + _loc_6;\r\n                _loc_3 = 1 - this.delta_fgpas / _loc_4;\r\n                this.VQx[param1] = this.VQx[param1] * _loc_3;\r\n                this.VQy[param1] = this.VQy[param1] * _loc_3;\r\n            }\r\n            this.Rp[param1] = -this.Vy[param1] + this.VQy[param1];\r\n            this.Rq[param1] = this.Vx[param1] - this.VQx[param1];\r\n            if (Math.abs(this.Rr[param1]) < this.Rfppas)\r\n            {\r\n                this.Rr[param1] = 0;\r\n            }\r\n            else if (this.Rr[param1] > 0)\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] - this.Rfppas;\r\n            }\r\n            else\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] + this.Rfppas;\r\n            }\r\n        }\r\n        if (this.etat[param1] == this.TSP)\r\n        {\r\n            var _loc_8 = 0;\r\n            this.Vy[param1] = 0;\r\n            this.Vx[param1] = _loc_8;\r\n            var _loc_8 = 0;\r\n            this.Rq[param1] = 0;\r\n            this.Rp[param1] = _loc_8;\r\n            if (Math.abs(this.Rr[param1]) < this.Rfppas)\r\n            {\r\n                this.Rr[param1] = 0;\r\n                this.date_arret[param1] = this.date * this.pas;\r\n                this.etat[param1] = this.ARRET;\r\n                return true;\r\n            }\r\n            if (this.Rr[param1] > 0)\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] - 2 * this.Rfppas;\r\n            }\r\n            else\r\n            {\r\n                this.Rr[param1] = this.Rr[param1] + 2 * this.Rfppas;\r\n            }\r\n        }\r\n        this.X[param1] = this.X[param1] + this.Vx[param1] * this.pas;\r\n        this.Y[param1] = this.Y[param1] + this.Vy[param1] * this.pas;\r\n        this.RAp[param1] = this.RAp[param1] + this.Rp[param1] * this.pas;\r\n        this.RAq[param1] = this.RAq[param1] + this.Rq[param1] * this.pas;\r\n        this.RAr[param1] = this.RAr[param1] + this.Rr[param1] * this.pas;\r\n        return false;\r\n    }// end function\r\n\r\n    choc_adh(param1) {\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_9 = NaN;\r\n        var _loc_10 = 0;\r\n        if (Math.abs(this.VT) < 1e-005)\r\n        {\r\n            _loc_2 = 90;\r\n        }\r\n        else\r\n        {\r\n            _loc_2 = 180 / Math.PI * Math.atan(this.VN0 / this.VT);\r\n        }\r\n        this.effet = 100 * this.R / 2 * this.VRr / Math.sqrt(this.VN0 * this.VN0 + this.VT * this.VT);\r\n        if (this.effet <= -1.5)\r\n        {\r\n            this.effet = -1.499;\r\n        }\r\n        else if (this.effet > 1.5)\r\n        {\r\n            this.effet = 1.499;\r\n        }\r\n        if (Math.abs(this.VT) < 1e-005)\r\n        {\r\n            if (this.effet > 0)\r\n            {\r\n                _loc_3 = this.sorties[9 * 3 + 1] + (this.sorties[9 * 3 + 2] - this.sorties[9 * 3 + 1]) * (this.effet / 1.5);\r\n            }\r\n            else\r\n            {\r\n                _loc_3 = this.sorties[9 * 3] + (this.sorties[9 * 3 + 1] - this.sorties[9 * 3]) * (this.effet + 1.5) / 1.5;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            _loc_2 = 180 / Math.PI * Math.atan(this.VN0 / this.VT);\r\n            _loc_10 = parseInt(_loc_2 / 10);\r\n            if (this.effet > 0)\r\n            {\r\n                _loc_4 = this.sorties[3 * _loc_10 + 1] + (this.sorties[3 * _loc_10 + 2] - this.sorties[3 * _loc_10 + 1]) * (this.effet / 1.5);\r\n            }\r\n            else\r\n            {\r\n                _loc_4 = this.sorties[3 * _loc_10 + 0] + (this.sorties[3 * _loc_10 + 1] - this.sorties[3 * _loc_10 + 0]) * (this.effet + 1.5) / 1.5;\r\n            }\r\n            if (this.effet > 0)\r\n            {\r\n                _loc_5 = this.sorties[3 * (_loc_10 + 1) + 1] + (this.sorties[3 * (_loc_10 + 1) + 2] - this.sorties[3 * (_loc_10 + 1) + 1]) * (this.effet / 1.5);\r\n            }\r\n            else\r\n            {\r\n                _loc_5 = this.sorties[3 * (_loc_10 + 1) + 0] + (this.sorties[3 * (_loc_10 + 1) + 1] - this.sorties[3 * (_loc_10 + 1) + 0]) * (this.effet + 1.5) / 1.5;\r\n            }\r\n            _loc_3 = _loc_4 + (_loc_5 - _loc_4) / 10 * (_loc_2 - 10 * _loc_10);\r\n        }\r\n        if (Math.abs(_loc_3 - 90) < 1e-005)\r\n        {\r\n            this.VT = 0;\r\n        }\r\n        else if (_loc_3 < 90)\r\n        {\r\n            this.VT = this.VN / Math.tan(_loc_3 / 180 * Math.PI);\r\n        }\r\n        else\r\n        {\r\n            this.VT = (-this.VN) * Math.tan((_loc_3 - 90) / 180 * Math.PI);\r\n        }\r\n        if (Math.abs(this.VT) < 1e-005)\r\n        {\r\n            if (this.effet > 0)\r\n            {\r\n                this.e_s = this.eff_s[9 * 3 + 1] + (this.eff_s[9 * 3 + 2] - this.eff_s[9 * 3 + 1]) * (this.effet / 1.5);\r\n            }\r\n            else\r\n            {\r\n                this.e_s = this.eff_s[9 * 3 + 0] + (this.eff_s[9 * 3 + 1] - this.eff_s[9 * 3 + 0]) * (this.effet + 1.5) / 1.5;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if (this.effet > 0)\r\n            {\r\n                _loc_6 = this.eff_s[3 * _loc_10 + 1] + (this.eff_s[3 * _loc_10 + 2] - this.eff_s[3 * _loc_10 + 1]) * (this.effet / 1.5);\r\n                _loc_7 = this.eff_s[3 * (_loc_10 + 1) + 1] + (this.eff_s[3 * (_loc_10 + 1) + 2] - this.eff_s[3 * (_loc_10 + 1) + 1]) * (this.effet / 1.5);\r\n            }\r\n            else\r\n            {\r\n                _loc_6 = this.eff_s[3 * _loc_10 + 0] + (this.eff_s[3 * _loc_10 + 1] - this.eff_s[3 * _loc_10 + 0]) * (this.effet + 1.5) / 1.5;\r\n                _loc_7 = this.eff_s[3 * (_loc_10 + 1) + 0] + (this.eff_s[3 * (_loc_10 + 1) + 1] - this.eff_s[3 * (_loc_10 + 1) + 0]) * (this.effet + 1.5) / 1.5;\r\n            }\r\n            this.e_s = _loc_6 + (_loc_7 - _loc_6) / 10 * (_loc_2 - 10 * _loc_10);\r\n        }\r\n        _loc_9 = (5 * this.VN + 2 * this.VRq) / 7;\r\n        _loc_8 = (5 * this.VT - 2 * this.VRp) / 7;\r\n        this.VRr = 0.02 * this.e_s / this.R * Math.sqrt(_loc_9 * _loc_9 + _loc_8 * _loc_8);\r\n        return;\r\n    }// end function\r\n\r\n    recup_pars(param1) {\r\n        if (this.X[param1] > this.XMAX && this.Vx[param1] > 0)\r\n        {\r\n            this.Vx[param1] = -this.VN;\r\n            this.Rq[param1] = -this.VRq;\r\n            if (this.Vy[param1] > 0)\r\n            {\r\n                this.Vy[param1] = this.VT;\r\n                this.Rp[param1] = this.VRp;\r\n                this.Rr[param1] = -this.VRr;\r\n            }\r\n            else\r\n            {\r\n                this.Vy[param1] = -this.VT;\r\n                this.Rp[param1] = -this.VRp;\r\n                this.Rr[param1] = this.VRr;\r\n            }\r\n        }\r\n        if (this.X[param1] < this.XMIN && this.Vx[param1] < 0)\r\n        {\r\n            this.Vx[param1] = this.VN;\r\n            this.Rq[param1] = this.VRq;\r\n            if (this.Vy[param1] > 0)\r\n            {\r\n                this.Vy[param1] = this.VT;\r\n                this.Rp[param1] = this.VRp;\r\n                this.Rr[param1] = this.VRr;\r\n            }\r\n            else\r\n            {\r\n                this.Vy[param1] = -this.VT;\r\n                this.Rp[param1] = -this.VRp;\r\n                this.Rr[param1] = -this.VRr;\r\n            }\r\n        }\r\n        if (this.Y[param1] < this.YMIN && this.Vy[param1] < 0)\r\n        {\r\n            this.Vy[param1] = this.VN;\r\n            this.Rp[param1] = -this.VRq;\r\n            if (this.Vx[param1] > 0)\r\n            {\r\n                this.Vx[param1] = this.VT;\r\n                this.Rq[param1] = -this.VRp;\r\n                this.Rr[param1] = -this.VRr;\r\n            }\r\n            else\r\n            {\r\n                this.Vx[param1] = -this.VT;\r\n                this.Rq[param1] = this.VRp;\r\n                this.Rr[param1] = this.VRr;\r\n            }\r\n        }\r\n        if (this.Y[param1] > this.YMAX && this.Vy[param1] > 0)\r\n        {\r\n            this.Vy[param1] = -this.VN;\r\n            this.Rp[param1] = this.VRq;\r\n            if (this.Vx[param1] > 0)\r\n            {\r\n                this.Vx[param1] = this.VT;\r\n                this.Rq[param1] = -this.VRp;\r\n                this.Rr[param1] = this.VRr;\r\n            }\r\n            else\r\n            {\r\n                this.Vx[param1] = -this.VT;\r\n                this.Rq[param1] = this.VRp;\r\n                this.Rr[param1] = -this.VRr;\r\n            }\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    Symetrise_Params(param1, param2) {\r\n        if (param2 == 1 || param2 == 4)\r\n        {\r\n            this.X[param1] = -this.X[param1];\r\n            this.Vx[param1] = -this.Vx[param1];\r\n            this.VQx[param1] = -this.VQx[param1];\r\n        }\r\n        if (param2 == 3 || param2 == 4)\r\n        {\r\n            this.Y[param1] = -this.Y[param1];\r\n            this.Vy[param1] = -this.Vy[param1];\r\n            this.VQy[param1] = -this.VQy[param1];\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    choc_gliss(param1) {\r\n        if (this.VMz > 0)\r\n        {\r\n            this.VT = this.VT - this.beta_gliss * Math.cos(this.alpha_bande);\r\n            this.VRr = this.VRr + 2.5 * this.beta_gliss * Math.cos(this.alpha_bande);\r\n        }\r\n        else\r\n        {\r\n            this.VT = this.VT + this.beta_gliss * Math.cos(this.alpha_bande);\r\n            this.VRr = this.VRr - 2.5 * this.beta_gliss * Math.cos(this.alpha_bande);\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    choc_billes(param1) {\r\n        var _loc_3 = 0;\r\n        var _loc_4 = 0;\r\n        var _loc_6 = false;\r\n        var _loc_7 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_9 = 0;\r\n        var _loc_10 = NaN;\r\n        var _loc_11 = NaN;\r\n        var _loc_12 = NaN;\r\n        var _loc_13 = NaN;\r\n        var _loc_14 = NaN;\r\n        var _loc_15 = NaN;\r\n        var _loc_16 = NaN;\r\n        var _loc_17 = NaN;\r\n        var _loc_18 = NaN;\r\n        var _loc_19 = NaN;\r\n        var _loc_20 = NaN;\r\n        var _loc_21 = NaN;\r\n        var _loc_22 = NaN;\r\n        var _loc_23 = NaN;\r\n        var _loc_24 = NaN;\r\n        var _loc_25 = NaN;\r\n        var _loc_26 = NaN;\r\n        var _loc_27 = NaN;\r\n        var _loc_28 = NaN;\r\n        var _loc_29 = 0;\r\n        var _loc_2 = false;\r\n        var _loc_5 = [];\r\n        _loc_3 = 0;\r\n        while (_loc_3 < 16)\r\n        {\r\n            \r\n            _loc_5[_loc_3] = false;\r\n            _loc_3++;\r\n        }\r\n        _loc_3 = 0;\r\n        while (_loc_3 < 16)\r\n        {\r\n            \r\n            if (this.etat[_loc_3] != this.EMPOCHEE && !_loc_5[_loc_3])\r\n            {\r\n                _loc_6 = false;\r\n                _loc_9 = _loc_3 + 1;\r\n                while (_loc_9 < 16 && !_loc_6)\r\n                {\r\n                    \r\n                    if (this.etat[_loc_9] != this.EMPOCHEE)\r\n                    {\r\n                        _loc_7 = (this.X[_loc_3] - this.X[_loc_9]) * (this.X[_loc_3] - this.X[_loc_9]) + (this.Y[_loc_3] - this.Y[_loc_9]) * (this.Y[_loc_3] - this.Y[_loc_9]);\r\n                        if (_loc_7 < this.D * this.D && (this.etat[_loc_3] != this.ARRET || this.etat[_loc_9] != this.ARRET))\r\n                        {\r\n                            if ((this.Vx[_loc_3] - this.Vx[_loc_9]) * (this.X[_loc_9] - this.X[_loc_3]) + (this.Vy[_loc_3] - this.Vy[_loc_9]) * (this.Y[_loc_9] - this.Y[_loc_3]) > 0)\r\n                            {\r\n                                _loc_6 = true;\r\n                                var _loc_30 = true;\r\n                                _loc_5[_loc_9] = true;\r\n                                _loc_5[_loc_3] = _loc_30;\r\n                                _loc_4 = _loc_9;\r\n                                _loc_2 = true;\r\n                                param1[0] = _loc_3;\r\n                                param1[1] = _loc_4;\r\n                            }\r\n                        }\r\n                    }\r\n                    _loc_9++;\r\n                }\r\n                if (_loc_6)\r\n                {\r\n                    var _loc_30 = false;\r\n                    this.immobile[_loc_4] = false;\r\n                    this.immobile[_loc_3] = _loc_30;\r\n                    this.add_clef(_loc_3);\r\n                    this.add_clef(_loc_4);\r\n                    _loc_5[_loc_3] = true;\r\n                    if (this.etat[_loc_3] == this.RSG)\r\n                    {\r\n                        this.Rp[_loc_3] = -this.Vy[_loc_3];\r\n                        this.Rq[_loc_3] = this.Vx[_loc_3];\r\n                    }\r\n                    if (this.etat[_loc_3] == this.QCQ)\r\n                    {\r\n                        this.Rp[_loc_3] = -this.Vy[_loc_3] + this.VQy[_loc_3];\r\n                        this.Rq[_loc_3] = this.Vx[_loc_3] - this.VQx[_loc_3];\r\n                    }\r\n                    if (this.etat[_loc_3] == this.ARRET)\r\n                    {\r\n                        this.Rp[_loc_3] = 0;\r\n                        this.Rq[_loc_3] = 0;\r\n                    }\r\n                    _loc_5[_loc_4] = true;\r\n                    if (this.etat[_loc_4] == this.RSG)\r\n                    {\r\n                        this.Rp[_loc_4] = -this.Vy[_loc_4];\r\n                        this.Rq[_loc_4] = this.Vx[_loc_4];\r\n                    }\r\n                    if (this.etat[_loc_4] == this.QCQ)\r\n                    {\r\n                        this.Rp[_loc_4] = -this.Vy[_loc_4] + this.VQy[_loc_4];\r\n                        this.Rq[_loc_4] = this.Vx[_loc_4] - this.VQx[_loc_4];\r\n                    }\r\n                    if (this.etat[_loc_4] == this.ARRET)\r\n                    {\r\n                        this.Rp[_loc_4] = 0;\r\n                        this.Rq[_loc_4] = 0;\r\n                    }\r\n                    _loc_18 = this.Vx[_loc_3] * (this.X[_loc_4] - this.X[_loc_3]) + this.Vy[_loc_3] * (this.Y[_loc_4] - this.Y[_loc_3]);\r\n                    _loc_10 = _loc_18 * (this.X[_loc_4] - this.X[_loc_3]) / _loc_7;\r\n                    _loc_11 = _loc_18 * (this.Y[_loc_4] - this.Y[_loc_3]) / _loc_7;\r\n                    _loc_12 = this.Vx[_loc_3] - _loc_10;\r\n                    _loc_13 = this.Vy[_loc_3] - _loc_11;\r\n                    _loc_19 = this.Vx[_loc_4] * (this.X[_loc_3] - this.X[_loc_4]) + this.Vy[_loc_4] * (this.Y[_loc_3] - this.Y[_loc_4]);\r\n                    _loc_14 = _loc_19 * (this.X[_loc_3] - this.X[_loc_4]) / _loc_7;\r\n                    _loc_15 = _loc_19 * (this.Y[_loc_3] - this.Y[_loc_4]) / _loc_7;\r\n                    _loc_16 = this.Vx[_loc_4] - _loc_14;\r\n                    _loc_17 = this.Vy[_loc_4] - _loc_15;\r\n                    _loc_21 = _loc_10 - _loc_14;\r\n                    _loc_22 = _loc_11 - _loc_15;\r\n                    this.intens = (_loc_21 * _loc_21 + _loc_22 * _loc_22) / 5;\r\n                    if (this.intens > 1)\r\n                    {\r\n                        this.intens = 1;\r\n                    }\r\n                    this.evts_son[this.nb_sons] = new son();\r\n                    this.evts_son[this.nb_sons].played = false;\r\n                    this.evts_son[this.nb_sons].temps = this.date * this.pas;\r\n                    this.evts_son[this.nb_sons].intensite = this.intens;\r\n                    this.evts_son[this.nb_sons].type_choc = 2;\r\n                    var _loc_30 = this;\r\n                    var _loc_31 = this.nb_sons + 1;\r\n                    _loc_30.nb_sons = _loc_31;\r\n                    _loc_20 = _loc_10;\r\n                    _loc_10 = _loc_14;\r\n                    _loc_14 = _loc_20;\r\n                    _loc_14 = _loc_14 * this.RendementChoc;\r\n                    _loc_10 = _loc_10 * this.RendementChoc;\r\n                    _loc_20 = _loc_11;\r\n                    _loc_11 = _loc_15;\r\n                    _loc_15 = _loc_20;\r\n                    _loc_15 = _loc_15 * this.RendementChoc;\r\n                    _loc_11 = _loc_11 * this.RendementChoc;\r\n                    this.Vx[_loc_3] = _loc_10 + _loc_12;\r\n                    this.Vy[_loc_3] = _loc_11 + _loc_13;\r\n                    this.VQx[_loc_3] = this.Vx[_loc_3] - this.Rq[_loc_3];\r\n                    this.VQy[_loc_3] = this.Vy[_loc_3] + this.Rp[_loc_3];\r\n                    if (this.etat[_loc_4] == this.ARRET)\r\n                    {\r\n                        this.Vx[_loc_4] = this.Vx[_loc_4] * 0.94;\r\n                        this.Vy[_loc_4] = this.Vy[_loc_4] * 0.94;\r\n                        _loc_8 = Math.sqrt(_loc_7);\r\n                        _loc_18 = _loc_18 / _loc_8;\r\n                        _loc_18 = Math.abs(_loc_18);\r\n                        _loc_27 = this.fbille * _loc_18;\r\n                        _loc_23 = Math.abs(this.Rp[_loc_3] * (this.Y[_loc_4] - this.Y[_loc_3]) - this.Rq[_loc_3] * (this.X[_loc_4] - this.X[_loc_3])) / _loc_8;\r\n                        _loc_25 = (this.Vx[_loc_3] * (this.Y[_loc_4] - this.Y[_loc_3]) - this.Vy[_loc_3] * (this.X[_loc_4] - this.X[_loc_3])) / _loc_8;\r\n                        _loc_26 = _loc_25 - this.Rr[_loc_3];\r\n                        if (Math.abs(_loc_26) < 1e-005)\r\n                        {\r\n                            _loc_24 = Math.PI / 2;\r\n                        }\r\n                        else\r\n                        {\r\n                            _loc_24 = Math.abs(Math.atan(_loc_23 / _loc_26));\r\n                        }\r\n                        if (_loc_26 > 0)\r\n                        {\r\n                            _loc_29 = 1;\r\n                        }\r\n                        else\r\n                        {\r\n                            _loc_29 = -1;\r\n                        }\r\n                        _loc_28 = _loc_29 * _loc_27 * Math.cos(_loc_24);\r\n                        this.Rr[_loc_4] = 2.5 * _loc_28;\r\n                        this.Rr[_loc_3] = this.Rr[_loc_3] - 2.5 * _loc_28;\r\n                        _loc_16 = _loc_28 * (this.Y[_loc_4] - this.Y[_loc_3]) / _loc_8;\r\n                        _loc_17 = (-_loc_28) * (this.X[_loc_4] - this.X[_loc_3]) / _loc_8;\r\n                    }\r\n                    this.Vx[_loc_4] = _loc_14 + _loc_16;\r\n                    this.Vy[_loc_4] = _loc_15 + _loc_17;\r\n                    this.VQx[_loc_4] = this.Vx[_loc_4] - this.Rq[_loc_4];\r\n                    this.VQy[_loc_4] = this.Vy[_loc_4] + this.Rp[_loc_4];\r\n                    this.etat[_loc_4] = this.QCQ;\r\n                    this.etat[_loc_3] = this.QCQ;\r\n                }\r\n            }\r\n            _loc_3++;\r\n        }\r\n        return _loc_2;\r\n    }// end function\r\n\r\n    fin_parcours() {\r\n        var _loc_1 = 0;\r\n        _loc_1 = 0;\r\n        while (_loc_1 < 16)\r\n        {\r\n            \r\n            if (this.etat[_loc_1] != this.ARRET && this.etat[_loc_1] != this.EMPOCHEE)\r\n            {\r\n                if (this.Vx[_loc_1] * this.Vx[_loc_1] + this.Vy[_loc_1] * this.Vy[_loc_1] < this.frpas * this.frpas)\r\n                {\r\n                    if (Math.abs(this.Rr[_loc_1]) < this.Rfppas)\r\n                    {\r\n                        this.date_arret[_loc_1] = this.date * this.pas;\r\n                        this.etat[_loc_1] = this.ARRET;\r\n                        var _loc_2 = 0;\r\n                        this.Vy[_loc_1] = 0;\r\n                        this.Vx[_loc_1] = _loc_2;\r\n                        var _loc_2 = 0;\r\n                        this.Rr[_loc_1] = 0;\r\n                        this.Rq[_loc_1] = _loc_2;\r\n                        this.Rp[_loc_1] = _loc_2;\r\n                    }\r\n                    else\r\n                    {\r\n                        this.etat[_loc_1] = this.TSP;\r\n                        return false;\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    return false;\r\n                }\r\n            }\r\n            _loc_1++;\r\n        }\r\n        return true;\r\n    }// end function\r\n\r\n    choc_poche(param1, param2) {\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = NaN;\r\n        if (this.etat[param1] == this.RSG)\r\n        {\r\n            this.Rp[param1] = -this.Vy[param1];\r\n            this.Rq[param1] = this.Vx[param1];\r\n        }\r\n        else if (this.etat[param1] == this.QCQ)\r\n        {\r\n            this.Rp[param1] = -this.Vy[param1] + this.VQy[param1];\r\n            this.Rq[param1] = this.Vx[param1] - this.VQx[param1];\r\n        }\r\n        _loc_3 = this.Vx[param1] * Math.cos(param2) + this.Vy[param1] * Math.sin(param2);\r\n        _loc_4 = (-this.Vx[param1]) * Math.sin(param2) + this.Vy[param1] * Math.cos(param2);\r\n        _loc_3 = _loc_3 * (-this.EPSILON_COIN);\r\n        this.Vx[param1] = _loc_3 * Math.cos(param2) - _loc_4 * Math.sin(param2);\r\n        this.Vy[param1] = _loc_3 * Math.sin(param2) + _loc_4 * Math.cos(param2);\r\n        this.VQx[param1] = this.Vx[param1] - this.Rq[param1];\r\n        this.VQy[param1] = this.Vy[param1] + this.Rp[param1];\r\n        this.etat[param1] = this.QCQ;\r\n        return;\r\n    }// end function\r\n\r\n    add_clef(param1) {\r\n        var _loc_2 = 0;\r\n        var _loc_3 = this.nb_max_clefs * param1 + this.nb_clefs[param1];\r\n        this.evts[_loc_3] = new evt();\r\n        this.evts[_loc_3].X = this.X[param1];\r\n        this.evts[_loc_3].Y = this.Y[param1];\r\n        this.evts[_loc_3].RAp = this.RAp[param1];\r\n        this.evts[_loc_3].RAq = this.RAq[param1];\r\n        this.evts[_loc_3].RAr = this.RAr[param1];\r\n        this.evts[_loc_3].time = this.date * this.pas;\r\n        var _loc_4 = this.nb_clefs;\r\n        var _loc_5 = param1;\r\n        var _loc_6 = _loc_4[param1] + 1;\r\n        _loc_4[_loc_5] = _loc_6;\r\n        this.X0[param1] = this.X[param1];\r\n        this.Y0[param1] = this.Y[param1];\r\n        this.RAp0[param1] = this.RAp[param1];\r\n        this.RAq0[param1] = this.RAq[param1];\r\n        this.RAr0[param1] = this.RAr[param1];\r\n        return;\r\n    }// end function\r\n\r\n    init_pars(param1) {\r\n        if (this.X[param1] > this.XMAX && this.Vx[param1] > 0)\r\n        {\r\n            this.VN = -this.Vx[param1];\r\n            this.VRq = -this.Rq[param1];\r\n            if (this.Vy[param1] > 0)\r\n            {\r\n                this.VT = this.Vy[param1];\r\n                this.VRp = this.Rp[param1];\r\n                this.VRr = -this.Rr[param1];\r\n            }\r\n            else\r\n            {\r\n                this.VT = -this.Vy[param1];\r\n                this.VRp = -this.Rp[param1];\r\n                this.VRr = this.Rr[param1];\r\n            }\r\n        }\r\n        if (this.X[param1] < this.XMIN && this.Vx[param1] < 0)\r\n        {\r\n            this.VN = this.Vx[param1];\r\n            this.VRq = this.Rq[param1];\r\n            if (this.Vy[param1] > 0)\r\n            {\r\n                this.VT = this.Vy[param1];\r\n                this.VRp = this.Rp[param1];\r\n                this.VRr = this.Rr[param1];\r\n            }\r\n            else\r\n            {\r\n                this.VT = -this.Vy[param1];\r\n                this.VRp = -this.Rp[param1];\r\n                this.VRr = -this.Rr[param1];\r\n            }\r\n        }\r\n        if (this.Y[param1] < this.YMIN && this.Vy[param1] < 0)\r\n        {\r\n            this.VN = this.Vy[param1];\r\n            this.VRq = -this.Rp[param1];\r\n            if (this.Vx[param1] > 0)\r\n            {\r\n                this.VT = this.Vx[param1];\r\n                this.VRp = -this.Rq[param1];\r\n                this.VRr = -this.Rr[param1];\r\n            }\r\n            else\r\n            {\r\n                this.VT = -this.Vx[param1];\r\n                this.VRp = this.Rq[param1];\r\n                this.VRr = this.Rr[param1];\r\n            }\r\n        }\r\n        if (this.Y[param1] > this.YMAX && this.Vy[param1] > 0)\r\n        {\r\n            this.VN = -this.Vy[param1];\r\n            this.VRq = this.Rp[param1];\r\n            if (this.Vx[param1] > 0)\r\n            {\r\n                this.VT = this.Vx[param1];\r\n                this.VRp = -this.Rq[param1];\r\n                this.VRr = this.Rr[param1];\r\n            }\r\n            else\r\n            {\r\n                this.VT = -this.Vx[param1];\r\n                this.VRp = this.Rq[param1];\r\n                this.VRr = -this.Rr[param1];\r\n            }\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    Calcul(param1) {\r\n        var _loc_2 = 0;\r\n        var _loc_3 = 0;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = 0;\r\n        var _loc_9 = NaN;\r\n        var _loc_4 = [0, 0];\r\n        _loc_2 = 0;\r\n        while (_loc_2 < 16)\r\n        {\r\n            \r\n            this.nb_clefs[_loc_2] = 0;\r\n            _loc_3 = 0;\r\n            while (_loc_3 < this.nb_max_clefs)\r\n            {\r\n                \r\n                this.evts[this.nb_max_clefs * _loc_2 + _loc_3] = null;\r\n                _loc_3++;\r\n            }\r\n            _loc_2++;\r\n        }\r\n        this.nb_sons = 0;\r\n        _loc_2 = 0;\r\n        while (_loc_2 < this.nb_max_sons)\r\n        {\r\n            \r\n            this.evts_son[_loc_2] = null;\r\n            _loc_2++;\r\n        }\r\n        _loc_2 = 0;\r\n        while (_loc_2 < 16)\r\n        {\r\n            \r\n            this.X[_loc_2] = param1.Xinit[_loc_2];\r\n            this.Y[_loc_2] = param1.Yinit[_loc_2];\r\n            this.RAp[_loc_2] = param1.RApInit[_loc_2];\r\n            this.RAq[_loc_2] = param1.RAqInit[_loc_2];\r\n            this.RAr[_loc_2] = param1.RArInit[_loc_2];\r\n            this.add_clef(_loc_2);\r\n            _loc_2++;\r\n        }\r\n        this.el = param1.el;\r\n        this.er = param1.er;\r\n        this.alph = param1.alphaQ;\r\n        this.beta = param1.betaQ;\r\n        this.vqueue = param1.Vqueue;\r\n        this.calculs_finis = false;\r\n        this.nbandes = 0;\r\n        this.done = false;\r\n        this.distance13 = 2;\r\n        this.first_bille_choquee = 0;\r\n        this.choc12 = false;\r\n        this.choc13 = false;\r\n        this.done = false;\r\n        this.deltaclef = this.resolution;\r\n        this.date = 0;\r\n        this.beta = this.beta + Math.PI;\r\n        this.Vinit = 1.4 * this.vqueue * Math.cos(this.alph / 1.2);\r\n        _loc_5 = -2 * this.Vinit / Math.cos(this.alph / 1.1) * this.er / this.R;\r\n        var _loc_8 = Math.PI / 20;\r\n        if (this.alph > _loc_8)\r\n        {\r\n            _loc_9 = Math.PI / 2 / (Math.PI / 2 - _loc_8) * (this.alph - _loc_8);\r\n        }\r\n        else\r\n        {\r\n            _loc_9 = 0;\r\n        }\r\n        _loc_6 = 4 * this.vqueue * Math.sin(_loc_9) * this.el / this.R;\r\n        this.Vx[0] = this.Vinit * Math.cos(this.beta);\r\n        this.Vx0 = this.Vx[0];\r\n        this.Vy[0] = this.Vinit * Math.sin(this.beta);\r\n        this.Vy0 = this.Vy[0];\r\n        var _loc_10 = _loc_5 * Math.sin(this.beta) + _loc_6 * Math.cos(this.beta);\r\n        this.Rp[0] = _loc_5 * Math.sin(this.beta) + _loc_6 * Math.cos(this.beta);\r\n        this.p0 = _loc_10;\r\n        var _loc_10 = (-_loc_5) * Math.cos(this.beta) + _loc_6 * Math.sin(this.beta);\r\n        this.Rq[0] = (-_loc_5) * Math.cos(this.beta) + _loc_6 * Math.sin(this.beta);\r\n        this.q0 = _loc_10;\r\n        var _loc_10 = 2 * this.el / this.R * this.Vinit;\r\n        this.Rr[0] = 2 * this.el / this.R * this.Vinit;\r\n        this.r0 = _loc_10;\r\n        this.VQx[0] = this.Vx[0] - this.Rq[0];\r\n        this.VQy[0] = this.Vy[0] + this.Rp[0];\r\n        this.etat[0] = this.QCQ;\r\n        this.time_empochee[0] = 1000;\r\n        this.immobile[0] = false;\r\n        this.date_arret[0] = 1000;\r\n        _loc_2 = 1;\r\n        while (_loc_2 < 16)\r\n        {\r\n            \r\n            this.Vx[_loc_2] = 0;\r\n            this.Vy[_loc_2] = 0;\r\n            this.VQx[_loc_2] = 0;\r\n            this.VQy[_loc_2] = 0;\r\n            this.Rp[_loc_2] = 0;\r\n            this.Rq[_loc_2] = 0;\r\n            this.Rr[_loc_2] = 0;\r\n            if (param1.empocheeInit[_loc_2])\r\n            {\r\n                this.etat[_loc_2] = this.EMPOCHEE;\r\n                this.time_empochee[_loc_2] = 0;\r\n            }\r\n            else\r\n            {\r\n                this.etat[_loc_2] = this.ARRET;\r\n                this.time_empochee[_loc_2] = 1000;\r\n                this.immobile[_loc_2] = true;\r\n                this.date_arret[_loc_2] = 1000;\r\n                this.add_clef(_loc_2);\r\n            }\r\n            _loc_2++;\r\n        }\r\n        this.evts_son[this.nb_sons] = new son();\r\n        this.evts_son[this.nb_sons].played = false;\r\n        this.evts_son[this.nb_sons].temps = 0;\r\n        this.evts_son[this.nb_sons].intensite = this.Vinit / 5.4;\r\n        if (this.alph > Math.PI / 4)\r\n        {\r\n            this.evts_son[this.nb_sons].type_choc = 0;\r\n        }\r\n        else\r\n        {\r\n            this.evts_son[this.nb_sons].type_choc = 1;\r\n        }\r\n        var _loc_10 = this;\r\n        var _loc_11 = this.nb_sons + 1;\r\n        _loc_10.nb_sons = _loc_11;\r\n        while (!this.fin_parcours())\r\n        {\r\n            \r\n            var _loc_10 = this;\r\n            var _loc_11 = this.date + 1;\r\n            _loc_10.date = _loc_11;\r\n            if (this.choc_billes(_loc_4))\r\n            {\r\n            }\r\n            _loc_2 = 0;\r\n            while (_loc_2 < 16)\r\n            {\r\n                \r\n                if (this.etat[_loc_2] != this.ARRET && this.etat[_loc_2] != this.EMPOCHEE)\r\n                {\r\n                    _loc_7 = this.traiter_poches(_loc_2);\r\n                    if (_loc_7 == 1)\r\n                    {\r\n                        if (this.choc_bande(_loc_2))\r\n                        {\r\n                            this.add_clef(_loc_2);\r\n                            this.evts_son[this.nb_sons] = new son();\r\n                            this.evts_son[this.nb_sons].played = false;\r\n                            this.evts_son[this.nb_sons].temps = this.date * this.pas;\r\n                            this.evts_son[this.nb_sons].intensite = this.intens;\r\n                            this.evts_son[this.nb_sons].type_choc = 3;\r\n                            var _loc_10 = this;\r\n                            var _loc_11 = this.nb_sons + 1;\r\n                            _loc_10.nb_sons = _loc_11;\r\n                        }\r\n                    }\r\n                    if (_loc_7 == 3)\r\n                    {\r\n                        this.add_clef(_loc_2);\r\n                    }\r\n                    if (_loc_7 == 4)\r\n                    {\r\n                        this.add_clef(_loc_2);\r\n                        this.evts_son[this.nb_sons] = new son();\r\n                        this.evts_son[this.nb_sons].played = false;\r\n                        this.evts_son[this.nb_sons].temps = this.date * this.pas;\r\n                        this.evts_son[this.nb_sons].intensite = 0.8;\r\n                        this.evts_son[this.nb_sons].type_choc = 4;\r\n                        var _loc_10 = this;\r\n                        var _loc_11 = this.nb_sons + 1;\r\n                        _loc_10.nb_sons = _loc_11;\r\n                    }\r\n                    if (this.mise_a_jour(_loc_2))\r\n                    {\r\n                        this.add_clef(_loc_2);\r\n                    }\r\n                }\r\n                if (Math.abs(this.X[_loc_2] - this.X0[_loc_2]) > this.deltaclef || Math.abs(this.Y[_loc_2] - this.Y0[_loc_2]) > this.deltaclef || Math.abs(this.RAp[_loc_2] - this.RAp0[_loc_2]) > this.deltaclefRot || Math.abs(this.RAq[_loc_2] - this.RAq0[_loc_2]) > this.deltaclefRot || Math.abs(this.RAr[_loc_2] - this.RAr0[_loc_2]) > this.deltaclefRot)\r\n                {\r\n                    this.add_clef(_loc_2);\r\n                }\r\n                _loc_2++;\r\n            }\r\n        }\r\n        if (this.fin_parcours())\r\n        {\r\n            this.calculs_finis = true;\r\n            _loc_2 = 0;\r\n            while (_loc_2 < 16)\r\n            {\r\n                \r\n                this.Xfin[_loc_2] = this.X[_loc_2];\r\n                this.Yfin[_loc_2] = this.Y[_loc_2];\r\n                this.RApfin[_loc_2] = this.RAp[_loc_2];\r\n                this.RAqfin[_loc_2] = this.RAq[_loc_2];\r\n                this.RArfin[_loc_2] = this.RAr[_loc_2];\r\n                this.empochee_fin[_loc_2] = this.etat[_loc_2] == this.EMPOCHEE;\r\n                this.add_clef(_loc_2);\r\n                _loc_2++;\r\n            }\r\n            this.duree = this.date * this.pas;\r\n        }\r\n        else\r\n        {\r\n            _loc_2 = 0;\r\n            while (_loc_2 < 16)\r\n            {\r\n                \r\n                this.add_clef(_loc_2);\r\n                _loc_2++;\r\n            }\r\n        }\r\n        return this.evts;\r\n    }// end function\r\n\r\n    traiter_poches(param1) {\r\n        var _loc_2 = 0;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = NaN;\r\n        var _loc_8 = NaN;\r\n        if (this.X[param1] > 0 && this.Y[param1] > 0)\r\n        {\r\n            _loc_2 = 1;\r\n        }\r\n        if (this.X[param1] < 0 && this.Y[param1] > 0)\r\n        {\r\n            _loc_2 = 2;\r\n        }\r\n        if (this.X[param1] < 0 && this.Y[param1] < 0)\r\n        {\r\n            _loc_2 = 3;\r\n        }\r\n        if (this.X[param1] > 0 && this.Y[param1] < 0)\r\n        {\r\n            _loc_2 = 4;\r\n        }\r\n        this.Symetrise_Params(param1, _loc_2);\r\n        var _loc_3 = 0;\r\n        if (Math.sqrt((this.X[param1] - this.XTROU) * (this.X[param1] - this.XTROU) + (this.Y[param1] - this.YTROU) * (this.Y[param1] - this.YTROU)) < this.RTROU)\r\n        {\r\n            this.etat[param1] = this.EMPOCHEE;\r\n            this.time_empochee[param1] = this.date * this.pas;\r\n            _loc_3 = 4;\r\n            this.Symetrise_Params(param1, _loc_2);\r\n            return _loc_3;\r\n        }\r\n        if (Math.sqrt((this.X[param1] - this.XTROU2) * (this.X[param1] - this.XTROU2) + (this.Y[param1] - this.YTROU2) * (this.Y[param1] - this.YTROU2)) < this.RTROU)\r\n        {\r\n            this.etat[param1] = this.EMPOCHEE;\r\n            this.time_empochee[param1] = this.date * this.pas;\r\n            _loc_3 = 4;\r\n            this.Symetrise_Params(param1, _loc_2);\r\n            return _loc_3;\r\n        }\r\n        if (this.X[param1] < this.XMIN)\r\n        {\r\n            if (this.Y[param1] < this.YA && this.Vx[param1] < 0)\r\n            {\r\n                _loc_3 = 1;\r\n            }\r\n            else\r\n            {\r\n                _loc_4 = Math.sqrt((this.X[param1] - this.XA) * (this.X[param1] - this.XA) + (this.Y[param1] - this.YA) * (this.Y[param1] - this.YA));\r\n                _loc_6 = 5 * Math.PI / 180;\r\n                if (_loc_4 < this.R)\r\n                {\r\n                    if (this.Vx[param1] * (this.X[param1] - this.XA) + this.Vy[param1] * (this.Y[param1] - this.YA) < 0)\r\n                    {\r\n                        _loc_5 = Math.acos((this.X[param1] - this.XA) / _loc_4);\r\n                        this.choc_poche(param1, _loc_5);\r\n                        _loc_3 = 3;\r\n                    }\r\n                }\r\n                else if (this.Y[param1] > this.YB && (this.Vy[param1] < 0 || Math.atan((-this.Vy[param1]) / this.Vx[param1]) < this.angle_poche_coin) && this.Y[param1] < this.a1 * this.X[param1] + this.b1)\r\n                {\r\n                    this.choc_poche(param1, Math.PI / 2 - this.angle_poche_coin);\r\n                    _loc_3 = 3;\r\n                }\r\n                else\r\n                {\r\n                    _loc_3 = 2;\r\n                }\r\n            }\r\n        }\r\n        if (this.Y[param1] > this.YMAX)\r\n        {\r\n            if (this.X[param1] > this.XC && this.X[param1] < this.XE && this.Vy[param1] > 0)\r\n            {\r\n                _loc_3 = 1;\r\n            }\r\n            else if (this.X[param1] < this.XC)\r\n            {\r\n                _loc_7 = Math.sqrt((this.X[param1] - this.XC) * (this.X[param1] - this.XC) + (this.Y[param1] - this.YC) * (this.Y[param1] - this.YC));\r\n                if (_loc_7 < this.R)\r\n                {\r\n                    if (this.Vx[param1] * (this.X[param1] - this.XC) + this.Vy[param1] * (this.Y[param1] - this.YC) < 0)\r\n                    {\r\n                        _loc_5 = Math.acos((this.XC - this.X[param1]) / _loc_7);\r\n                        this.choc_poche(param1, _loc_5);\r\n                        _loc_3 = 3;\r\n                    }\r\n                }\r\n                else if (this.Y[param1] > this.YD && (this.Vx[param1] > 0 || Math.atan((-this.Vy[param1]) / this.Vx[param1]) > Math.PI / 2 - this.angle_poche_coin) && this.Y[param1] > this.a2 * this.X[param1] + this.b2)\r\n                {\r\n                    this.choc_poche(param1, this.angle_poche_coin);\r\n                    _loc_3 = 3;\r\n                }\r\n            }\r\n            else if (this.X[param1] > this.XE)\r\n            {\r\n                _loc_8 = Math.sqrt((this.X[param1] - this.XE) * (this.X[param1] - this.XE) + (this.Y[param1] - this.YE) * (this.Y[param1] - this.YE));\r\n                if (_loc_8 < this.R && this.Y[param1] < this.YE)\r\n                {\r\n                    if (this.Vx[param1] * (this.X[param1] - this.XE) + this.Vy[param1] * (this.Y[param1] - this.YE) < 0)\r\n                    {\r\n                        _loc_5 = Math.PI / 2 + Math.acos((this.YE - this.Y[param1]) / _loc_8);\r\n                        this.choc_poche(param1, _loc_5);\r\n                        _loc_3 = 3;\r\n                    }\r\n                }\r\n                else if (this.Y[param1] > this.YE && this.Y[param1] > this.a3 * this.X[param1] + this.b3)\r\n                {\r\n                    this.choc_poche(param1, this.angle_poche_centrale);\r\n                    _loc_3 = 3;\r\n                }\r\n                else\r\n                {\r\n                    _loc_3 = 2;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                _loc_3 = 2;\r\n            }\r\n        }\r\n        this.Symetrise_Params(param1, _loc_2);\r\n        return _loc_3;\r\n    }\r\n}","import parametres from './parametres';\r\nimport simul from './simul';\r\n\r\nexport default class {\r\n    ampl_recul_max;\r\n    mode_jeu = 7;\r\n    temps_recul;\r\n    queue;\r\n    calculs_faits;\r\n    largeur;\r\n    trajets;\r\n    seq_origine;\r\n    jouer_poche0;\r\n    canal_bande0;\r\n    canal_bande1;\r\n    RAp0 = [];\r\n    alphamin;\r\n    tous_trajets;\r\n    type;\r\n    t0;\r\n    bitmap_Bandes_280;\r\n    new_seq;\r\n    dq0;\r\n    grille;\r\n    ymax;\r\n    son_queue_pique;\r\n    RAq0 = [];\r\n    Rb;\r\n    Ampl_queue;\r\n    son_poche;\r\n    seq;\r\n    R;\r\n    son_bille_bande;\r\n    muet;\r\n    cl = [];\r\n    Ech;\r\n    ctrl;\r\n    RAr0 = [];\r\n    son_queue_plat;\r\n    ind_last_clef = [];\r\n    taille_billard;\r\n    ombre = [];\r\n    jouer_bande0;\r\n    ralenti = 1;\r\n    canal_bille0;\r\n    bille_visee;\r\n    dq;\r\n    canal_bille1;\r\n    ecl = [];\r\n    trajet_bille_joueur;\r\n    Params;\r\n    longueur;\r\n    nb_sons_played;\r\n    bitmap_Billard_280;\r\n    Vqmax;\r\n    largeur_bandes = 0.26;\r\n    date;\r\n    trans;\r\n    jouer_bille0;\r\n    aff_trajets;\r\n    ligne_visee;\r\n    canal_queue;\r\n    son_bille_bille;\r\n    canal_poche0;\r\n    t_debut;\r\n    trajet_bille_visee;\r\n    cont_billard;\r\n    Simulateur;\r\n    canal_poche1;\r\n    xmax;\r\n    billes = [];\r\n    myTimer;\r\n\r\n    constructor(param1, param2, param3, param4)\r\n    {\r\n        var _loc_5 = 0;\r\n        this.cl = [];\r\n        this.Ech = param3;\r\n        this.R = 0.03;\r\n        this.Rb = 36;\r\n        this.type = 0;\r\n        this.taille(param1);\r\n        \r\n        this.Params = new parametres((this.xmax + this.R) * 2, (this.ymax + this.R) * 2);\r\n        _loc_5 = 0;\r\n        this.aff_trajets = false;\r\n        this.tous_trajets = true;\r\n        this.trajet_bille_joueur = false;\r\n        this.trajet_bille_visee = false;\r\n        this.cl[0] = 16777215;\r\n        this.cl[8] = 0;\r\n        this.cl[9] = 16777113;\r\n        this.cl[1] = 16776960;\r\n        this.cl[10] = 10092543;\r\n        this.cl[2] = 255;\r\n        this.cl[3] = 16711680;\r\n        this.cl[11] = 16751001;\r\n        this.cl[4] = 16711935;\r\n        this.cl[12] = 16751103;\r\n        this.cl[5] = 16750848;\r\n        this.cl[13] = 16750950;\r\n        this.cl[6] = 65280;\r\n        this.cl[14] = 10092441;\r\n        this.cl[7] = 6684723;\r\n        this.cl[15] = 10053120;\r\n        this.billes = [];\r\n        this.bille_visee = 1;\r\n        this.ecl = [];\r\n        _loc_5 = 0;\r\n        var _loc_27 = 0.25;\r\n        this.dq0 = 1.5 * this.R * this.Ech;\r\n        this.alphamin = true;\r\n        this.Vqmax = 4.2;\r\n        this.Simulateur = new simul(this.xmax, this.ymax);\r\n        this.ind_last_clef = [];\r\n        _loc_5 = 0;\r\n        while (_loc_5 < 16)\r\n        {\r\n            \r\n            this.ind_last_clef[_loc_5] = this.Simulateur.nb_max_clefs * _loc_5;\r\n            _loc_5++;\r\n        }\r\n        this.calculs_faits = false;\r\n        this.ampl_recul_max = 0.1;\r\n        this.RAp0 = [];\r\n        this.RAq0 = [];\r\n        this.RAr0 = [];\r\n        _loc_5 = 0;\r\n        while (_loc_5 < 16)\r\n        {\r\n            \r\n            this.RAp0[_loc_5] = 0;\r\n            this.RAq0[_loc_5] = 0;\r\n            this.RAr0[_loc_5] = 0;\r\n            _loc_5++;\r\n        }\r\n        if (this.new_seq)\r\n        {\r\n            this.seq.seq_id = \"\";\r\n            this.seq_origine.seq_id = \"\";\r\n        }\r\n        this.alphamin = false;\r\n        return;\r\n    }// end function\r\n\r\n    tracer_grille() {\r\n        var _loc_1 = 0;\r\n        this.grille.graphics.clear();\r\n        this.grille.graphics.lineStyle(1, 16776960, 0.2);\r\n        _loc_1 = -3;\r\n        while (_loc_1 < 4)\r\n        {\r\n            \r\n            this.grille.graphics.moveTo(this.ctrl.XC - this.Ech * (this.xmax + this.R), this.ctrl.YC + _loc_1 * this.Ech * (this.ymax + this.R) / 4);\r\n            this.grille.graphics.lineTo(this.ctrl.XC + this.Ech * (this.xmax + this.R), this.ctrl.YC + _loc_1 * this.Ech * (this.ymax + this.R) / 4);\r\n            _loc_1++;\r\n        }\r\n        _loc_1 = -7;\r\n        while (_loc_1 < 8)\r\n        {\r\n            \r\n            this.grille.graphics.moveTo(this.ctrl.XC + _loc_1 * this.Ech * (this.xmax + this.R) / 8, this.ctrl.YC + this.Ech * (this.ymax + this.R));\r\n            this.grille.graphics.lineTo(this.ctrl.XC + _loc_1 * this.Ech * (this.xmax + this.R) / 8, this.ctrl.YC - this.Ech * (this.ymax + this.R));\r\n            _loc_1++;\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    finir_init() {\r\n        this.tracer_ligne_visee();\r\n        this.afficher_billes();\r\n        this.placer_queue(this.dq0);\r\n        this.tracer_grille();\r\n        this.seq.titre = new String(this.ctrl.msg.msg[5]);\r\n        return;\r\n    }// end function\r\n\r\n    entier(param1) {\r\n        var _loc_2 = 10 * param1;\r\n        _loc_2 = _loc_2 / 10;\r\n        if (param1 - _loc_2 > 0.5)\r\n        {\r\n            return (_loc_2 + 1);\r\n        }\r\n        return _loc_2;\r\n    }// end function\r\n\r\n    remettre_bille(param1) {\r\n        var _loc_2 = false;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = 0;\r\n        if (this.mode_jeu == 9 && param1 > 9)\r\n        {\r\n            return;\r\n        }\r\n        if (this.mode_jeu == 10 && param1 > 10)\r\n        {\r\n            return;\r\n        }\r\n        do\r\n        {\r\n            \r\n            this.Params.Xinit[param1] = (Math.random() - 0.5) * 2 * this.xmax;\r\n            this.Params.Yinit[param1] = (Math.random() - 0.5) * 2 * this.ymax;\r\n            _loc_2 = true;\r\n            _loc_4 = 0;\r\n            while (_loc_4 < 16 && _loc_2)\r\n            {\r\n                \r\n                if (!this.Params.empocheeInit[_loc_4] && param1 != _loc_4)\r\n                {\r\n                    _loc_3 = (this.Params.Xinit[param1] - this.Params.Xinit[_loc_4]) * (this.Params.Xinit[param1] - this.Params.Xinit[_loc_4]) + (this.Params.Yinit[param1] - this.Params.Yinit[_loc_4]) * (this.Params.Yinit[param1] - this.Params.Yinit[_loc_4]);\r\n                    if (_loc_3 < 0.004)\r\n                    {\r\n                        _loc_2 = false;\r\n                    }\r\n                }\r\n                _loc_4++;\r\n            }\r\n        }while (!_loc_2)\r\n        this.Params.empocheeInit[param1] = false;\r\n        return;\r\n    }// end function\r\n\r\n    placer_queue(param1) {\r\n        var _loc_4 = NaN;\r\n        var _loc_2 = -this.Params.betaQ;\r\n        var _loc_3 = 4 + this.Ech * this.Params.el;\r\n        // this.queue.x = this.ctrl.XC + this.entier(this.Params.Xinit[0] * this.Ech + _loc_3 * Math.sin(_loc_2) + param1 * Math.cos(_loc_2));\r\n        // this.queue.y = this.ctrl.YC - this.entier(this.Params.Yinit[0] * this.Ech + _loc_3 * Math.cos(_loc_2) - param1 * Math.sin(_loc_2));\r\n        // _loc_4 = this.Params.AlphaQmin();\r\n        if (this.alphamin)\r\n        {\r\n            this.Params.alphaQ = _loc_4;\r\n        }\r\n        else if (this.Params.alphaQ < _loc_4)\r\n        {\r\n            this.Params.alphaQ = _loc_4;\r\n        }\r\n        this.queue.rotation = _loc_2 * 180 / Math.PI;\r\n        this.queue.scaleX = 0.25 * Math.cos(this.Params.alphaQ);\r\n        return;\r\n    }// end function\r\n\r\n    restore_seq() {\r\n        var _loc_1 = 0;\r\n        var _loc_2 = 0;\r\n        console.log(\"avant restore\", this.seq.nb_points, this.seq_origine.nb_points);\r\n        if (this.seq_origine.nb_points == 0)\r\n        {\r\n            return;\r\n        }\r\n        this.seq.nb_points = this.seq_origine.nb_points;\r\n        this.seq.pt_courant = 0;\r\n        this.seq.auteur = this.seq_origine.auteur;\r\n        this.seq.titre = this.seq_origine.titre;\r\n        this.seq.seq_auto = this.seq_origine.seq_auto;\r\n        this.ctrl.aff_auteur.text = this.seq.auteur;\r\n        this.ctrl.aff_auteur.setTextFormat(this.ctrl.myFormatJauneKozoomCentre);\r\n        this.ctrl.aff_titre.visible = true;\r\n        _loc_1 = 0;\r\n        while (_loc_1 < this.seq_origine.nb_points)\r\n        {\r\n            \r\n            this.seq.points_b[_loc_1].taille_billard = this.seq_origine.points_b[_loc_1].taille_billard;\r\n            this.seq.points_b[_loc_1].mode_jeu = this.seq_origine.points_b[_loc_1].mode_jeu;\r\n            _loc_2 = 0;\r\n            while (_loc_2 < 16)\r\n            {\r\n                \r\n                this.seq.points_b[_loc_1].Xinit[_loc_2] = this.seq_origine.points_b[_loc_1].Xinit[_loc_2];\r\n                this.seq.points_b[_loc_1].Yinit[_loc_2] = this.seq_origine.points_b[_loc_1].Yinit[_loc_2];\r\n                _loc_2++;\r\n            }\r\n            this.seq.points_b[_loc_1].Vqueue = this.seq_origine.points_b[_loc_1].Vqueue;\r\n            this.seq.points_b[_loc_1].alphaQ = this.seq_origine.points_b[_loc_1].alphaQ;\r\n            this.seq.points_b[_loc_1].betaQ = this.seq_origine.points_b[_loc_1].betaQ;\r\n            this.seq.points_b[_loc_1].el = this.seq_origine.points_b[_loc_1].el;\r\n            this.seq.points_b[_loc_1].er = this.seq_origine.points_b[_loc_1].er;\r\n            _loc_1++;\r\n        }\r\n        console.log(\"apres restore\", this.seq.nb_points, this.seq_origine.nb_points);\r\n        return;\r\n    }// end function\r\n\r\n    Placer_billes_hasard() {\r\n        var _loc_1 = false;\r\n        var _loc_2 = NaN;\r\n        var _loc_3 = 0;\r\n        var _loc_4 = 0;\r\n        _loc_3 = 0;\r\n        while (_loc_3 < 16)\r\n        {\r\n            \r\n            do\r\n            {\r\n                \r\n                this.Params.Xinit[_loc_3] = (Math.random() - 0.5) * 2 * this.xmax;\r\n                this.Params.Yinit[_loc_3] = (Math.random() - 0.5) * 2 * this.ymax;\r\n                _loc_1 = true;\r\n                _loc_4 = 0;\r\n                while (_loc_4 < _loc_3 && _loc_1)\r\n                {\r\n                    \r\n                    _loc_2 = (this.Params.Xinit[_loc_3] - this.Params.Xinit[_loc_4]) * (this.Params.Xinit[_loc_3] - this.Params.Xinit[_loc_4]) + (this.Params.Yinit[_loc_3] - this.Params.Yinit[_loc_4]) * (this.Params.Yinit[_loc_3] - this.Params.Yinit[_loc_4]);\r\n                    if (_loc_2 < 0.0016)\r\n                    {\r\n                        _loc_1 = false;\r\n                    }\r\n                    _loc_4++;\r\n                }\r\n            }while (!_loc_1)\r\n            _loc_3++;\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    charger_point(param1, param2) {\r\n        var _loc_3 = 0;\r\n        _loc_3 = 0;\r\n        while (_loc_3 < 16)\r\n        {\r\n            \r\n            this.Params.Xinit[_loc_3] = param1.Xinit[_loc_3];\r\n            this.Params.Yinit[_loc_3] = param1.Yinit[_loc_3];\r\n            this.Params.empocheeInit[_loc_3] = param1.empocheeInit[_loc_3];\r\n            _loc_3++;\r\n        }\r\n        this.Params.alphaQ = param1.alphaQ;\r\n        this.Params.betaQ = param1.betaQ;\r\n        this.Params.Vqueue = param1.Vqueue;\r\n        this.Params.el = param1.el;\r\n        this.Params.er = param1.er;\r\n        this.init_point();\r\n        if (param2)\r\n        {\r\n            this.Simulateur.Calcul(this.Params);\r\n            this.calculs_faits = true;\r\n            this.aff_trajets = true;\r\n            this.afficher_trajets();\r\n        }\r\n        this.ctrl.modif_pt_seq = false;\r\n        return;\r\n    }// end function\r\n\r\n    replacer() {\r\n        this.arret_son();\r\n        this.ctrl.simulation_en_cours = false;\r\n        this.myTimer.stop();\r\n        this.afficher_billes();\r\n        this.placer_queue(this.dq0);\r\n        this.queue.visible = true;\r\n        return;\r\n    }// end function\r\n\r\n    afficher_trajets() {\r\n        var _loc_1 = 0;\r\n        _loc_1 = 0;\r\n        while (_loc_1 < 16)\r\n        {\r\n            \r\n            var _loc_2 = !this.Params.empocheeInit[_loc_1];\r\n            this.ombre[_loc_1].visible = !this.Params.empocheeInit[_loc_1];\r\n            this.ecl[_loc_1].visible = _loc_2;\r\n            this.billes[_loc_1].cont_bille.visible = _loc_2;\r\n            _loc_1++;\r\n        }\r\n        this.ligne_visee.visible = true;\r\n        this.trajets.graphics.clear();\r\n        if (!this.tous_trajets && !this.trajet_bille_joueur && !this.trajet_bille_visee)\r\n        {\r\n            return;\r\n        }\r\n        if (!this.calculs_faits)\r\n        {\r\n            this.Simulateur.Calcul(this.Params);\r\n            this.calculs_faits = true;\r\n        }\r\n        if (this.tous_trajets)\r\n        {\r\n            _loc_1 = 0;\r\n            while (_loc_1 < 16)\r\n            {\r\n                \r\n                this.aff_trajet_bille(_loc_1);\r\n                _loc_1++;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if (this.trajet_bille_joueur)\r\n            {\r\n                this.aff_trajet_bille(0);\r\n            }\r\n            if (this.trajet_bille_visee && this.Params.noba)\r\n            {\r\n                this.aff_trajet_bille(this.bille_visee);\r\n            }\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    timerHandler(event) {\r\n        var _loc_2 = 0;\r\n        var _loc_3 = 0;\r\n        var _loc_4 = NaN;\r\n        var _loc_5 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_9 = NaN;\r\n        var _loc_10 = NaN;\r\n        // this.date = (getTimer() / 1000 - this.t0) * this.ralenti;\r\n        if (this.date < this.temps_recul)\r\n        {\r\n            this.queue.visible = true;\r\n            this.dq = this.dq0 + this.Ampl_queue * (1 - Math.cos(Math.PI * this.date / this.temps_recul));\r\n            this.placer_queue(this.dq);\r\n            return;\r\n        }\r\n        if (this.date < this.t_debut)\r\n        {\r\n            this.queue.visible = true;\r\n            this.dq = this.R * this.Ech + (2 * this.Ampl_queue + this.dq0 - this.R * this.Ech) * Math.cos(Math.PI / 2 * (this.date - this.temps_recul) / (this.t_debut - this.temps_recul));\r\n            this.placer_queue(this.dq);\r\n        }\r\n        if (this.date > (this.t_debut + 1))\r\n        {\r\n            this.queue.visible = false;\r\n        }\r\n        if (this.date < this.t_debut)\r\n        {\r\n            return;\r\n        }\r\n        if (!this.muet)\r\n        {\r\n            _loc_2 = this.nb_sons_played;\r\n            while (_loc_2 < this.Simulateur.nb_sons)\r\n            {\r\n                \r\n                if (!this.Simulateur.evts_son[_loc_2].played && this.Simulateur.evts_son[_loc_2].temps < this.date - this.t_debut)\r\n                {\r\n                    if (this.Simulateur.evts_son[_loc_2].type_choc == 0)\r\n                    {\r\n                        this.canal_queue = this.son_queue_plat.play(0, 1);\r\n                        this.trans = this.canal_queue.soundTransform;\r\n                        this.trans.volume = this.Simulateur.evts_son[_loc_2].intensite;\r\n                        this.canal_queue.soundTransform = this.trans;\r\n                    }\r\n                    else if (this.Simulateur.evts_son[_loc_2].type_choc == 1)\r\n                    {\r\n                        this.canal_queue = this.son_queue_pique.play(0, 1);\r\n                        this.trans = this.canal_queue.soundTransform;\r\n                        this.trans.volume = this.Simulateur.evts_son[_loc_2].intensite;\r\n                        this.canal_queue.soundTransform = this.trans;\r\n                    }\r\n                    else if (this.Simulateur.evts_son[_loc_2].type_choc == 2)\r\n                    {\r\n                        if (this.jouer_bille0)\r\n                        {\r\n                            this.canal_bille0 = this.son_bille_bille.play(0, 1);\r\n                            this.trans = this.canal_bille0.soundTransform;\r\n                            this.trans.volume = this.Simulateur.evts_son[_loc_2].intensite;\r\n                            this.canal_bille0.soundTransform = this.trans;\r\n                            if (this.canal_bille1 != null)\r\n                            {\r\n                                this.canal_bille1.stop();\r\n                            }\r\n                            this.jouer_bille0 = false;\r\n                        }\r\n                        else\r\n                        {\r\n                            this.canal_bille1 = this.son_bille_bille.play(0, 1);\r\n                            this.trans = this.canal_bille1.soundTransform;\r\n                            this.trans.volume = this.Simulateur.evts_son[_loc_2].intensite;\r\n                            this.canal_bille1.soundTransform = this.trans;\r\n                            if (this.canal_bille0 != null)\r\n                            {\r\n                                this.canal_bille0.stop();\r\n                            }\r\n                            this.jouer_bille0 = true;\r\n                        }\r\n                    }\r\n                    else if (this.Simulateur.evts_son[_loc_2].type_choc == 3)\r\n                    {\r\n                        if (this.jouer_bande0)\r\n                        {\r\n                            this.canal_bande0 = this.son_bille_bande.play(0, 1);\r\n                            this.trans = this.canal_bande0.soundTransform;\r\n                            this.trans.volume = this.Simulateur.evts_son[_loc_2].intensite;\r\n                            this.canal_bande0.soundTransform = this.trans;\r\n                            if (this.canal_bande1 != null)\r\n                            {\r\n                                this.canal_bande1.stop();\r\n                            }\r\n                            this.jouer_bande0 = false;\r\n                        }\r\n                        else\r\n                        {\r\n                            this.canal_bande1 = this.son_bille_bande.play(0, 1);\r\n                            this.trans = this.canal_bande1.soundTransform;\r\n                            this.trans.volume = this.Simulateur.evts_son[_loc_2].intensite;\r\n                            this.canal_bande1.soundTransform = this.trans;\r\n                            if (this.canal_bande0 != null)\r\n                            {\r\n                                this.canal_bande0.stop();\r\n                            }\r\n                            this.jouer_bande0 = true;\r\n                        }\r\n                    }\r\n                    else if (this.Simulateur.evts_son[_loc_2].type_choc == 4)\r\n                    {\r\n                        if (this.jouer_poche0)\r\n                        {\r\n                            this.canal_poche0 = this.son_poche.play(0, 1);\r\n                            this.trans = this.canal_poche0.soundTransform;\r\n                            this.trans.volume = this.Simulateur.evts_son[_loc_2].intensite;\r\n                            this.canal_poche0.soundTransform = this.trans;\r\n                            if (this.canal_poche1 != null)\r\n                            {\r\n                                this.canal_poche1.stop();\r\n                            }\r\n                            this.jouer_poche0 = false;\r\n                        }\r\n                        else\r\n                        {\r\n                            this.canal_poche1 = this.son_poche.play(0, 1);\r\n                            this.trans = this.canal_poche1.soundTransform;\r\n                            this.trans.volume = this.Simulateur.evts_son[_loc_2].intensite;\r\n                            this.canal_poche1.soundTransform = this.trans;\r\n                            if (this.canal_poche0 != null)\r\n                            {\r\n                                this.canal_poche0.stop();\r\n                            }\r\n                            this.jouer_poche0 = true;\r\n                        }\r\n                    }\r\n                    this.Simulateur.evts_son[_loc_2].played = true;\r\n                    var _loc_11 = this;\r\n                    var _loc_12 = this.nb_sons_played + 1;\r\n                    _loc_11.nb_sons_played = _loc_12;\r\n                }\r\n                _loc_2++;\r\n            }\r\n        }\r\n        _loc_2 = 0;\r\n        while (_loc_2 < 16)\r\n        {\r\n            \r\n            if (!this.Simulateur.immobile[_loc_2] && this.Simulateur.date_arret[_loc_2] > this.date - this.t_debut)\r\n            {\r\n                if (this.date - this.t_debut > this.Simulateur.time_empochee[_loc_2])\r\n                {\r\n                    var _loc_11 = false;\r\n                    this.ombre[_loc_2].visible = false;\r\n                    this.ecl[_loc_2].visible = _loc_11;\r\n                    this.billes[_loc_2].cont_bille.visible = _loc_11;\r\n                }\r\n                else\r\n                {\r\n                    _loc_3 = this.ind_last_clef[_loc_2];\r\n                    while (this.Simulateur.evts[(_loc_3 + 1)] != null && this.date - this.t_debut > this.Simulateur.evts[(_loc_3 + 1)].time)\r\n                    {\r\n                        \r\n                        _loc_3++;\r\n                    }\r\n                    this.ind_last_clef[_loc_2] = _loc_3;\r\n                    if (this.Simulateur.evts[(_loc_3 + 1)] != null)\r\n                    {\r\n                        _loc_10 = (this.date - this.t_debut - this.Simulateur.evts[_loc_3].time) / (this.Simulateur.evts[(_loc_3 + 1)].time - this.Simulateur.evts[_loc_3].time);\r\n                        this.billes[_loc_2].cont_bille.x = this.ctrl.XC + this.entier(this.Ech * (this.Simulateur.evts[_loc_3].X + (this.Simulateur.evts[(_loc_3 + 1)].X - this.Simulateur.evts[_loc_3].X) * _loc_10));\r\n                        this.billes[_loc_2].cont_bille.y = this.ctrl.YC - this.entier(this.Ech * (this.Simulateur.evts[_loc_3].Y + (this.Simulateur.evts[(_loc_3 + 1)].Y - this.Simulateur.evts[_loc_3].Y) * _loc_10));\r\n                        this.ecl[_loc_2].x = this.billes[_loc_2].cont_bille.x - this.Rb / 4;\r\n                        this.ecl[_loc_2].y = this.billes[_loc_2].cont_bille.y - this.Rb / 4;\r\n                        this.ombre[_loc_2].x = this.billes[_loc_2].cont_bille.x - this.Rb / 3;\r\n                        this.ombre[_loc_2].y = this.billes[_loc_2].cont_bille.y - this.Rb / 3;\r\n                        _loc_4 = this.Simulateur.evts[_loc_3].RAp + (this.Simulateur.evts[(_loc_3 + 1)].RAp - this.Simulateur.evts[_loc_3].RAp) * _loc_10;\r\n                        _loc_5 = this.Simulateur.evts[_loc_3].RAq + (this.Simulateur.evts[(_loc_3 + 1)].RAq - this.Simulateur.evts[_loc_3].RAq) * _loc_10;\r\n                        _loc_6 = this.Simulateur.evts[_loc_3].RAr + (this.Simulateur.evts[(_loc_3 + 1)].RAr - this.Simulateur.evts[_loc_3].RAr) * _loc_10;\r\n                        _loc_7 = (_loc_4 - this.RAp0[_loc_2]) / this.R;\r\n                        _loc_8 = (_loc_5 - this.RAq0[_loc_2]) / this.R;\r\n                        _loc_9 = (_loc_6 - this.RAr0[_loc_2]) / this.R;\r\n                        this.RAp0[_loc_2] = _loc_4;\r\n                        this.RAq0[_loc_2] = _loc_5;\r\n                        this.RAr0[_loc_2] = _loc_6;\r\n                        this.billes[_loc_2].tourner_bille(_loc_7, _loc_8, _loc_9);\r\n                    }\r\n                }\r\n            }\r\n            _loc_2++;\r\n        }\r\n        if (this.date - this.t_debut > this.Simulateur.duree)\r\n        {\r\n            this.myTimer.stop();\r\n            this.aff_trajets = true;\r\n            this.afficher_trajets();\r\n            this.arret_son();\r\n            if (this.ctrl.FS)\r\n            {\r\n                this.replacer();\r\n            }\r\n        }\r\n        event.updateAfterEvent();\r\n        return;\r\n    }// end function\r\n\r\n    afficher_billes() {\r\n        var _loc_1 = 0;\r\n        _loc_1 = 0;\r\n        while (_loc_1 < 16)\r\n        {\r\n            \r\n            this.afficher_une_bille(_loc_1);\r\n            _loc_1++;\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    replacer_rien() {\r\n        var _loc_1 = 0;\r\n        var _loc_2 = false;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = 0;\r\n        this.arret_son();\r\n        this.ctrl.simulation_en_cours = false;\r\n        this.myTimer.stop();\r\n        _loc_1 = 1;\r\n        while (_loc_1 < 16)\r\n        {\r\n            \r\n            this.Params.empocheeInit[_loc_1] = true;\r\n            _loc_1++;\r\n        }\r\n        this.init_point();\r\n        return;\r\n    }// end function\r\n\r\n    aff_trajet_bille(param1) {\r\n        var _loc_2 = 0;\r\n        _loc_2 = this.Simulateur.nb_max_clefs * param1;\r\n        this.trajets.graphics.lineStyle(2, this.billes[param1].couleur, 0.7);\r\n        this.trajets.graphics.moveTo(this.ctrl.XC + this.Ech * this.Simulateur.evts[_loc_2].X, this.ctrl.YC - this.Ech * this.Simulateur.evts[_loc_2].Y);\r\n        while (this.Simulateur.evts[(_loc_2 + 1)] != null)\r\n        {\r\n            \r\n            _loc_2 = _loc_2 + 1;\r\n            this.trajets.graphics.lineTo(this.ctrl.XC + this.Ech * this.Simulateur.evts[_loc_2].X, this.ctrl.YC - this.Ech * this.Simulateur.evts[_loc_2].Y);\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    suivant() {\r\n        var _loc_1 = 0;\r\n        var _loc_2 = false;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = 0;\r\n        this.arret_son();\r\n        this.ctrl.simulation_en_cours = false;\r\n        this.myTimer.stop();\r\n        if (!this.calculs_faits)\r\n        {\r\n            this.Simulateur.Calcul(this.Params);\r\n            this.calculs_faits = true;\r\n        }\r\n        _loc_1 = 0;\r\n        while (_loc_1 < 16)\r\n        {\r\n            \r\n            this.Params.Xinit[_loc_1] = this.Simulateur.Xfin[_loc_1];\r\n            this.Params.Yinit[_loc_1] = this.Simulateur.Yfin[_loc_1];\r\n            this.Params.RApInit[_loc_1] = 0;\r\n            this.Params.RAqInit[_loc_1] = 0;\r\n            this.Params.RArInit[_loc_1] = 0;\r\n            this.Params.empocheeInit[_loc_1] = this.Simulateur.empochee_fin[_loc_1];\r\n            _loc_1++;\r\n        }\r\n        if (this.Params.empocheeInit[0])\r\n        {\r\n            this.Params.empocheeInit[0] = false;\r\n            do\r\n            {\r\n                \r\n                this.Params.Xinit[0] = (Math.random() - 0.5) * 2 * this.xmax;\r\n                this.Params.Yinit[0] = (Math.random() - 0.5) * 2 * this.ymax;\r\n                _loc_2 = true;\r\n                _loc_4 = 1;\r\n                while (_loc_4 < 16 && _loc_2)\r\n                {\r\n                    \r\n                    if (!this.Params.empocheeInit[_loc_4])\r\n                    {\r\n                        _loc_3 = (this.Params.Xinit[0] - this.Params.Xinit[_loc_4]) * (this.Params.Xinit[0] - this.Params.Xinit[_loc_4]) + (this.Params.Yinit[0] - this.Params.Yinit[_loc_4]) * (this.Params.Yinit[0] - this.Params.Yinit[_loc_4]);\r\n                        if (_loc_3 < 0.004)\r\n                        {\r\n                            _loc_2 = false;\r\n                        }\r\n                    }\r\n                    _loc_4++;\r\n                }\r\n            }while (!_loc_2)\r\n        }\r\n        this.init_point();\r\n        return;\r\n    }// end function\r\n\r\n    tracer_ligne_visee() {\r\n        var _loc_1 = NaN;\r\n        var _loc_2 = NaN;\r\n        var _loc_6 = NaN;\r\n        var _loc_7 = NaN;\r\n        var _loc_8 = NaN;\r\n        var _loc_10 = NaN;\r\n        this.ligne_visee.graphics.clear();\r\n        this.Params.Quantite();\r\n        var _loc_3 = this.Params.betaQ + Math.PI;\r\n        var _loc_4 = this.Params.Xinit[0];\r\n        var _loc_5 = this.Params.Yinit[0];\r\n        var _loc_9 = Math.tan(_loc_3);\r\n        if (!this.Params.noba)\r\n        {\r\n            _loc_2 = this.largeur / 2 - 0.03;\r\n            if (Math.cos(_loc_3) > 0)\r\n            {\r\n                _loc_1 = this.longueur / 2 - 0.03;\r\n            }\r\n            else if (Math.cos(_loc_3) < 0)\r\n            {\r\n                _loc_1 = (-this.longueur) / 2 + 0.03;\r\n            }\r\n            if (Math.cos(_loc_3) == 0)\r\n            {\r\n                if (Math.sin(_loc_3) > 0)\r\n                {\r\n                    _loc_7 = 0;\r\n                    _loc_8 = _loc_2;\r\n                }\r\n                else\r\n                {\r\n                    _loc_7 = 0;\r\n                    _loc_8 = -_loc_2;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                _loc_6 = (_loc_1 - _loc_4) * _loc_9 + _loc_5;\r\n                if (_loc_6 > _loc_2)\r\n                {\r\n                    _loc_7 = _loc_4 + (_loc_2 - _loc_5) / _loc_9;\r\n                    _loc_8 = _loc_2;\r\n                }\r\n                else if (_loc_6 < -_loc_2)\r\n                {\r\n                    _loc_7 = _loc_4 - (_loc_2 + _loc_5) / _loc_9;\r\n                    _loc_8 = -_loc_2;\r\n                }\r\n                else\r\n                {\r\n                    _loc_7 = _loc_1;\r\n                    _loc_8 = (_loc_1 - _loc_4) * _loc_9 + _loc_5;\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            _loc_10 = Math.sqrt((this.Params.Xinit[this.Params.bille_visee] - _loc_4) * (this.Params.Xinit[this.Params.bille_visee] - _loc_4) + (this.Params.Yinit[this.Params.bille_visee] - _loc_5) * (this.Params.Yinit[this.Params.bille_visee] - _loc_5));\r\n            if (Math.cos(_loc_3) != 0)\r\n            {\r\n                _loc_7 = _loc_4 + _loc_10 * Math.cos(_loc_3);\r\n                _loc_8 = _loc_5 + _loc_10 * Math.sin(_loc_3);\r\n            }\r\n            else if (Math.sin(_loc_3) > 0)\r\n            {\r\n                _loc_7 = _loc_4;\r\n                _loc_8 = _loc_5 + _loc_10;\r\n            }\r\n            else\r\n            {\r\n                _loc_7 = _loc_4;\r\n                _loc_8 = _loc_5 - _loc_10;\r\n            }\r\n        }\r\n        this.ligne_visee.graphics.lineStyle(1, 16777215, 0.4);\r\n        this.ligne_visee.graphics.moveTo(this.ctrl.XC + this.Ech * _loc_4, this.ctrl.YC - this.Ech * _loc_5);\r\n        this.ligne_visee.graphics.lineTo(this.ctrl.XC + this.Ech * _loc_7, this.ctrl.YC - this.Ech * _loc_8);\r\n        return;\r\n    }// end function\r\n\r\n    save_seq() {\r\n        var _loc_1 = 0;\r\n        var _loc_2 = 0;\r\n        console.log(\"avant save_seq\", this.seq.nb_points, this.seq_origine.nb_points);\r\n        this.seq_origine.nb_points = this.seq.nb_points;\r\n        this.seq_origine.pt_courant = 0;\r\n        this.seq_origine.auteur = this.seq.auteur;\r\n        this.seq_origine.titre = this.seq.titre;\r\n        this.seq_origine.seq_auto = this.seq.seq_auto;\r\n        _loc_1 = 0;\r\n        while (_loc_1 < this.seq.nb_points)\r\n        {\r\n            \r\n            this.seq_origine.points_b[_loc_1].taille_billard = this.seq.points_b[_loc_1].taille_billard;\r\n            this.seq_origine.points_b[_loc_1].mode_jeu = this.seq.points_b[_loc_1].mode_jeu;\r\n            _loc_2 = 0;\r\n            while (_loc_2 < 16)\r\n            {\r\n                \r\n                this.seq_origine.points_b[_loc_1].Xinit[_loc_2] = this.seq.points_b[_loc_1].Xinit[_loc_2];\r\n                this.seq_origine.points_b[_loc_1].Yinit[_loc_2] = this.seq.points_b[_loc_1].Yinit[_loc_2];\r\n                _loc_2++;\r\n            }\r\n            this.seq_origine.points_b[_loc_1].Vqueue = this.seq.points_b[_loc_1].Vqueue;\r\n            this.seq_origine.points_b[_loc_1].alphaQ = this.seq.points_b[_loc_1].alphaQ;\r\n            this.seq_origine.points_b[_loc_1].betaQ = this.seq.points_b[_loc_1].betaQ;\r\n            this.seq_origine.points_b[_loc_1].el = this.seq.points_b[_loc_1].el;\r\n            this.seq_origine.points_b[_loc_1].er = this.seq.points_b[_loc_1].er;\r\n            _loc_1++;\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    arret_son() {\r\n        if (this.canal_bille0 != null)\r\n        {\r\n            this.canal_bille0.stop();\r\n        }\r\n        if (this.canal_bille1 != null)\r\n        {\r\n            this.canal_bille1.stop();\r\n        }\r\n        if (this.canal_bande0 != null)\r\n        {\r\n            this.canal_bande0.stop();\r\n        }\r\n        if (this.canal_bande1 != null)\r\n        {\r\n            this.canal_bande1.stop();\r\n        }\r\n        return;\r\n    }// end function\r\n\r\n    init_point(){\r\n        this.ctrl.simulation_en_cours = false;\r\n        this.arret_son();\r\n        this.myTimer.stop();\r\n        this.afficher_billes();\r\n        this.ctrl.aff_parametres();\r\n        this.placer_queue(this.dq0);\r\n        this.queue.visible = true;\r\n        this.calculs_faits = false;\r\n        this.aff_trajets = false;\r\n        this.trajets.graphics.clear();\r\n        this.tracer_ligne_visee();\r\n        this.ligne_visee.visible = true;\r\n        return;\r\n    }// end function\r\n\r\n    update_modejeu(param1) {\r\n        var _loc_2 = 0;\r\n        this.mode_jeu = param1;\r\n        this.ctrl.simulation_en_cours = false;\r\n        this.myTimer.stop();\r\n        if (param1 == 7)\r\n        {\r\n            _loc_2 = 10;\r\n            while (_loc_2 < 16)\r\n            {\r\n                \r\n                this.Params.empocheeInit[_loc_2] = false;\r\n                _loc_2++;\r\n            }\r\n        }\r\n        if (param1 == 8)\r\n        {\r\n            _loc_2 = 10;\r\n            while (_loc_2 < 16)\r\n            {\r\n                \r\n                this.Params.empocheeInit[_loc_2] = false;\r\n                _loc_2++;\r\n            }\r\n        }\r\n        if (param1 == 9)\r\n        {\r\n            _loc_2 = 10;\r\n            while (_loc_2 < 16)\r\n            {\r\n                \r\n                this.Params.empocheeInit[_loc_2] = true;\r\n                _loc_2++;\r\n            }\r\n        }\r\n        if (param1 == 10)\r\n        {\r\n            _loc_2 = 11;\r\n            while (_loc_2 < 16)\r\n            {\r\n                \r\n                this.Params.empocheeInit[_loc_2] = true;\r\n                _loc_2++;\r\n            }\r\n        }\r\n        this.afficher_billes();\r\n        return;\r\n    }// end function\r\n\r\n    replacer_tout() {\r\n        var _loc_1 = 0;\r\n        var _loc_2 = false;\r\n        var _loc_3 = NaN;\r\n        var _loc_4 = 0;\r\n        this.arret_son();\r\n        this.ctrl.simulation_en_cours = false;\r\n        this.myTimer.stop();\r\n        if (this.mode_jeu < 9)\r\n        {\r\n            _loc_4 = 16;\r\n        }\r\n        if (this.mode_jeu == 9)\r\n        {\r\n            _loc_4 = 10;\r\n        }\r\n        if (this.mode_jeu == 10)\r\n        {\r\n            _loc_4 = 11;\r\n        }\r\n        _loc_1 = 0;\r\n        while (_loc_1 < _loc_4)\r\n        {\r\n            \r\n            if (this.Params.empocheeInit[_loc_1])\r\n            {\r\n                this.remettre_bille(_loc_1);\r\n            }\r\n            _loc_1++;\r\n        }\r\n        this.init_point();\r\n        return;\r\n    }// end function\r\n\r\n    Simuler(param1, param2) {\r\n        console.log('simulate');\r\n        var _loc_2 = 0;\r\n        this.ralenti = param1;\r\n        this.Params = param2\r\n        // this.placer_queue(this.dq0);\r\n        // this.queue.visible = true;\r\n        // if (!this.calculs_faits)\r\n        // {\r\n            return this.Simulateur.Calcul(this.Params);\r\n        // }\r\n    }// end function\r\n\r\n    taille(param1) {\r\n        this.taille_billard = param1;\r\n        if (param1 == 280)\r\n        {\r\n            this.longueur = 2.8;\r\n        }\r\n        this.xmax = (this.longueur - this.largeur_bandes) / 2 - 0.03;\r\n        this.ymax = (this.longueur - this.largeur_bandes) / 4 - 0.03;\r\n        this.largeur = 2 * (this.ymax + 0.03) + this.largeur_bandes;\r\n        return;\r\n    }// end function\r\n\r\n    afficher_une_bille(param1) {\r\n        var _loc_2 = !this.Params.empocheeInit[param1];\r\n        this.ombre[param1].visible = !this.Params.empocheeInit[param1];\r\n        this.ecl[param1].visible = _loc_2;\r\n        this.billes[param1].cont_bille.visible = _loc_2;\r\n        this.billes[param1].cont_bille.x = this.ctrl.XC + this.entier(this.Params.Xinit[param1] * this.Ech);\r\n        this.billes[param1].cont_bille.y = this.ctrl.YC - this.entier(this.Params.Yinit[param1] * this.Ech);\r\n        this.ombre[param1].x = this.billes[param1].cont_bille.x - this.Rb / 3;\r\n        this.ombre[param1].y = this.billes[param1].cont_bille.y - this.Rb / 3;\r\n        this.ecl[param1].x = this.billes[param1].cont_bille.x - this.Rb / 4;\r\n        this.ecl[param1].y = this.billes[param1].cont_bille.y - this.Rb / 4;\r\n        this.billes[param1].positionner_texture();\r\n        return;\r\n    }\r\n}","import * as BABYLON from 'babylonjs';\r\nimport {\r\n    TABLE_LENGTH,\r\n    BALL_SIZE,\r\n\r\n    fileTableModel,\r\n    fileBatModel,\r\n\r\n} from '../constants';\r\n\r\nimport CBillard from './OriginSimulatorEngine/cBillard';\r\n\r\nexport default class SceneManager {\r\n    constructor (\r\n        size,\r\n        modelStorePath,\r\n        currentView,\r\n        ballPositions,\r\n        controlOptions\r\n    ) {\r\n        this.scene = undefined;\r\n        this.canvas = undefined;\r\n\r\n        this.size = size;\r\n\r\n        this.ballRadius = 400 * BALL_SIZE / (this.size * 100);\r\n\r\n        this.modelStorePath = modelStorePath;\r\n\r\n        this.initBallPosition = ballPositions;\r\n\r\n        this.ballPositions = [];\r\n        console.log('init ball positions',ballPositions)\r\n        \r\n        console.log(this.ballPositions)\r\n        this.currentView = currentView;\r\n\r\n        this.cameras = {\r\n            arcCam: undefined,\r\n            topCam: undefined\r\n        };\r\n\r\n        this.objects = {\r\n            table: undefined,\r\n            bat: undefined,\r\n            cueBallWhite: undefined,\r\n            balls: [],\r\n            batContactLine: undefined,\r\n            batLookatPoint: undefined,\r\n            directionLine: undefined,\r\n        };\r\n\r\n        this.controlOptions = controlOptions;\r\n\r\n        this.grids = [];\r\n\r\n        this.pathes = [];\r\n\r\n        this.billard = new CBillard(\r\n            280,\r\n            undefined,\r\n            300,\r\n        );\r\n        \r\n        this.timerCount = 0;\r\n\r\n        this.RAp0 = []\r\n        this.RAq0 = []\r\n        this.RAr0 = []\r\n\r\n        for(var i = 0; i < 16; i++){\r\n            this.RAp0.push(0);\r\n            this.RAq0.push(0);\r\n            this.RAr0.push(0);\r\n            this.ballPositions.push({\r\n                x: TABLE_LENGTH * ballPositions.Xinit[i] / size,\r\n                z: TABLE_LENGTH * ballPositions.Yinit[i] / size,\r\n                empocheeInit: ballPositions.empocheeInit[i]\r\n            })\r\n        }\r\n    }\r\n\r\n    drawBallPath = (value) => {\r\n        let res = this.pathData\r\n\r\n        if(!res || res.length == 0) return;\r\n        for(var line of this.pathes) {\r\n            if(line) line.dispose();\r\n        }\r\n        this.pathes = [];\r\n        if (value) {\r\n            for (var index = 0; index < 16; index++) {\r\n                var ballPoints = [];\r\n                for (var i = index * 10000; i < (index + 1) * 10000; i++) {\r\n                    if (res[i]) {\r\n                        ballPoints.push(new BABYLON.Vector3(\r\n                            TABLE_LENGTH * res[i].X / this.size,\r\n                            this.ballRadius / 2,\r\n                            TABLE_LENGTH * res[i].Y / this.size\r\n                        ))\r\n                    }\r\n                }\r\n                var obj = BABYLON.MeshBuilder.CreateLines(\r\n                    'lines',\r\n                    {\r\n                        points: ballPoints\r\n                    }, \r\n                    this.scene\r\n                );\r\n                this.pathes.push(obj)\r\n            }\r\n        }        \r\n    }\r\n\r\n    configCameras = () => {\r\n        const _self = this;\r\n        _self.cameras.arcCam = new BABYLON.ArcRotateCamera(\"Camera-Arc\", 4.44, 1.05, 300, BABYLON.Vector3.Zero(), _self.scene);\r\n        _self.cameras.arcCam.attachControl(_self.canvas);\r\n        _self.cameras.arcCam.upperBetaLimit = 1.5;\r\n        _self.cameras.arcCam.wheelPrecision = 0.2;\r\n        \r\n        _self.cameras.arcCam.upperRadiusLimit = 500;\r\n        _self.cameras.arcCam.lowerRadiusLimit = 100;\r\n        \r\n        _self.cameras.topCam = new BABYLON.ArcRotateCamera(\"Camera-Top\", -Math.PI/2, 0, 330, BABYLON.Vector3.Zero(), _self.scene);\r\n\r\n        _self.cameras.topCam.upperBetaLimit = 0;\r\n        _self.cameras.topCam.lowerBetaLimit = 0;\r\n\r\n        _self.cameras.topCam.upperAlphaLimit = -Math.PI/2;\r\n        _self.cameras.topCam.lowerAlphaLimit = -Math.PI/2;\r\n\r\n        _self.cameras.topCam.upperRadiusLimit = 330;\r\n        _self.cameras.topCam.lowerRadiusLimit = 330;\r\n\r\n        _self.cameras.topCam.mode = BABYLON.Camera.ORTHOGRAPHIC_CAMERA;\r\n        _self.cameras.topCam.orthoTop = 130;\r\n        _self.cameras.topCam.orthoBottom = -130;\r\n        _self.cameras.topCam.orthoLeft = -240;\r\n        _self.cameras.topCam.orthoRight = 240;\r\n\r\n        _self.changeView(_self.currentView);\r\n    }\r\n\r\n    loadModels = () => {\r\n        const _self = this;\r\n        const { modelStorePath } = this;\r\n\r\n        BABYLON.SceneLoader.ImportMesh(\"\", modelStorePath, fileBatModel, _self.scene, function (newMeshes) {\r\n            _self.objects.bat = newMeshes[0];\r\n            _self.objects.bat.position.y = 50;\r\n            _self.objects.bat.position.z = 90;\r\n\r\n            _self.objects.batLookatPoint = new BABYLON.MeshBuilder.CreateSphere(\r\n                'look-at',\r\n                {\r\n                    diameter: 4\r\n                },\r\n                _self.scene\r\n            )\r\n            \r\n            // _self.objects.batLookatPoint.parent = _self.objects.bat;\r\n            _self.objects.batLookatPoint.position.y = 30;\r\n            _self.objects.batLookatPoint.visibility = false;\r\n            \r\n            BABYLON.SceneLoader.ImportMesh(\"\", modelStorePath, fileTableModel, _self.scene, function (newMeshes) {\r\n                _self.objects.table = newMeshes;\r\n                for(var obj of newMeshes){\r\n                    // obj.visibility = false;\r\n                    if(obj.name === 'carpet'){\r\n                        // assign bump\r\n                        obj.material.bumpTexture = new BABYLON.Texture(modelStorePath+'carpet-bump.png', _self.scene);\r\n                        // end assign bump\r\n                    }\r\n                }\r\n                \r\n                _self.configCueBalls();\r\n                _self.updateBat(_self.controlOptions);\r\n            });\r\n        });\r\n    }\r\n\r\n    updateControlOptions = (data) => {\r\n        this.controlOptions = data;\r\n        this.updateBat(data);\r\n    }\r\n\r\n    updateBat = (data) => {\r\n        const {\r\n            cueLine,\r\n            cueAngle,\r\n            sideEnglish,\r\n            topSpin,\r\n        } = data;\r\n        const {size, ballRadius} = this;\r\n        const {bat, batLookatPoint, directionLine, cueBallWhite} = this.objects;\r\n\r\n        let deltaSideEnglish = TABLE_LENGTH * sideEnglish / size;\r\n        let deltaTopSpin = TABLE_LENGTH * topSpin / size;\r\n\r\n        bat.position.x = cueBallWhite.position.x\r\n                         - deltaSideEnglish * Math.sin(cueLine)\r\n                         - deltaTopSpin * Math.sin(cueAngle) * Math.cos(cueLine);\r\n        bat.position.z = cueBallWhite.position.z\r\n                         + deltaSideEnglish * Math.cos(cueLine)\r\n                         - deltaTopSpin * Math.sin(cueAngle) * Math.sin(cueLine);\r\n        bat.position.y = ballRadius/2\r\n                         + deltaTopSpin * Math.cos(cueAngle);\r\n        \r\n        bat.rotation = new BABYLON.Vector3(\r\n            0,\r\n            -cueLine,\r\n            Math.PI/2 + cueAngle\r\n        );\r\n\r\n        // update look at point\r\n        var lookAtPoint = Object.assign({}, bat.position);\r\n        lookAtPoint.y += 40 * Math.sin(cueAngle);\r\n        lookAtPoint.x += 40 * Math.cos(cueAngle) * Math.cos(cueLine);\r\n        lookAtPoint.z += 40 * Math.cos(cueAngle) * Math.sin(cueLine);\r\n        batLookatPoint.position = lookAtPoint;\r\n        batLookatPoint.lookAt(bat.position);\r\n        // end update look at point\r\n\r\n        // update direction line\r\n        directionLine.position.x = cueBallWhite.position.x;\r\n        directionLine.position.z = cueBallWhite.position.z;\r\n        directionLine.position.y = ballRadius/2;\r\n\r\n        directionLine.rotation.y = Math.PI - cueLine;\r\n        // end update direction line\r\n    }\r\n\r\n    generateReflectionMaterial = (root, others) => {\r\n        let {scene} = this;\r\n\t\t\r\n\t\tvar probe = new BABYLON.ReflectionProbe(\"satelliteProbe\" + root.name, 512, scene);\r\n\t\tfor (var index = 0; index < others.length; index++) {\r\n\t\t\tprobe.renderList.push(others[index]);\t\t\t\r\n\t\t}\r\n\t\t\r\n        root.material.reflectionTexture = probe.cubeTexture;\r\n        root.material.reflectivityColor = new BABYLON.Color3(0.2, 0.2, 0.2);\r\n\t\t\r\n\t\troot.material.reflectionFresnelParameters = new BABYLON.FresnelParameters();\r\n        root.material.reflectionFresnelParameters.bias = 0;\r\n\t\tprobe.attachToMesh(root);\r\n    }\r\n    \r\n    configCueBalls = () => {\r\n        const _self = this;\r\n        const {\r\n            modelStorePath,\r\n            ballRadius\r\n        } = this;\r\n\r\n        // const { table } = this.objects;\r\n        // const {arcCam} = this.cameras;\r\n        // let carpet, rail;\r\n        // for(var obj of table) {\r\n        //     if (obj.name === 'carpet') {\r\n        //         carpet = obj;\r\n        //     } else if (obj.name === 'carpet-side') {\r\n        //         rail = obj;\r\n        //     }\r\n        // }\r\n        let ballPositions = this.ballPositions;\r\n        console.log(ballRadius)\r\n        _self.objects.cueBallWhite = BABYLON.Mesh.CreateSphere(\"cue-ball-white\", 16, ballRadius, _self.scene);\r\n        _self.objects.cueBallWhite.position.y = ballRadius/2;\r\n        _self.objects.cueBallWhite.position.x = ballPositions[0].x;\r\n        _self.objects.cueBallWhite.position.z = ballPositions[0].z;\r\n\r\n        var matCueBallWhite = new BABYLON.StandardMaterial(\"redMat\", _self.scene);\r\n        matCueBallWhite.diffuseTexture = new BABYLON.Texture(modelStorePath + \"cueball-white.jpg\", _self.scene);\r\n        _self.objects.cueBallWhite.material = matCueBallWhite;\r\n\r\n        for (var i = 1; i < 16; i++){\r\n            var obj = BABYLON.Mesh.CreateSphere(\"cue-ball-white\", 16, ballRadius, _self.scene);\r\n            obj.position.y = ballRadius/2;\r\n            obj.position.x = ballPositions[i].x;\r\n            obj.position.z = ballPositions[i].z;\r\n\r\n            var mat = new BABYLON.StandardMaterial(\"redMat\", _self.scene);\r\n            mat.diffuseColor = new BABYLON.Color4(1, 0, 0, 1);\r\n            obj.material = mat;\r\n\r\n            if(ballPositions[i].empocheeInit == true) obj.visibility = false;\r\n            _self.objects.balls.push(obj);\r\n        }\r\n\r\n        // var matCueBallWhite = new BABYLON.StandardMaterial(\"redMat\", _self.scene);\r\n        // matCueBallWhite.diffuseTexture = new BABYLON.Texture(modelStorePath + \"cueball-white.jpg\", _self.scene);\r\n        // _self.objects.cueBallWhite.material = matCueBallWhite;\r\n\r\n        // //contact points\r\n        // _self.objects.ray = new BABYLON.Ray();\r\n        // _self.objects.rayHelper = new BABYLON.RayHelper(_self.objects.ray);\r\n        // var localMeshDirection = new BABYLON.Vector3(0, 0, 1);\r\n        // _self.cameras.arcCam.setTarget(_self.objects.batLookatPoint)\r\n        \r\n        // _self.objects.rayHelper.attachToMesh(_self.objects.batLookatPoint, localMeshDirection);\r\n        // _self.objects.rayHelper.show(_self.scene);\r\n    }\r\n\r\n    configGrids = () => {\r\n        const _self = this;\r\n        const grayRate = 0.7;\r\n        const color = [new BABYLON.Color4(grayRate,grayRate,grayRate,1), new BABYLON.Color4(grayRate,grayRate,grayRate,1)];\r\n        for (var i = 0; i < 15; i++) {\r\n            let gridPoints = [\r\n                new BABYLON.Vector3(-TABLE_LENGTH*7/16 + i * TABLE_LENGTH/16, 2, -TABLE_LENGTH/4),\r\n                new BABYLON.Vector3(-TABLE_LENGTH*7/16 + i * TABLE_LENGTH/16, 2, TABLE_LENGTH/4)\r\n            ];\r\n            _self.grids.push(BABYLON.MeshBuilder.CreateLines(\"lines\", {points: gridPoints, colors: color}, _self.scene));\r\n        }\r\n        for (i = 0; i < 7; i++) {\r\n            let gridPoints = [\r\n                new BABYLON.Vector3(-TABLE_LENGTH/2, 2, -TABLE_LENGTH*3/16 + i * TABLE_LENGTH/16),\r\n                new BABYLON.Vector3(TABLE_LENGTH/2, 2, -TABLE_LENGTH*3/16 + i * TABLE_LENGTH/16)\r\n            ];\r\n            _self.grids.push(BABYLON.MeshBuilder.CreateLines(\"lines\", {points: gridPoints, colors: color}, _self.scene));\r\n        }\r\n    }\r\n\r\n    toggleGrids = (visible) => {\r\n        const {grids} = this;\r\n        for (var i = 0; i < grids.length; i++) {\r\n            grids[i].visibility = visible;\r\n        }\r\n    }\r\n\r\n    initializeScene = (scene, canvas) => {\r\n        let _self = this;\r\n        _self.scene = scene;\r\n        _self.canvas = canvas;\r\n\r\n        _self.scene.clearColor = new BABYLON.Color3(0.05, 0.05, 0.05);\r\n        _self.objects.directionLine = new BABYLON.MeshBuilder.CreateLines(\r\n            'direction-line',\r\n            {\r\n                points: [\r\n                    new BABYLON.Vector3(0, 0, 0),\r\n                    new BABYLON.Vector3(600, 0, 0)\r\n                ],\r\n                colors: [\r\n                    new BABYLON.Color4(0, 0, 0.8, 1),\r\n                    new BABYLON.Color4(0, 0, 0.8, 1),\r\n                ]\r\n            }\r\n        )\r\n\r\n        // _self.objects.directionLine.visibility = false;\r\n\r\n        new BABYLON.HemisphericLight('light', BABYLON.Vector3.Up(), scene);\r\n\r\n        _self.configCameras();\r\n        _self.loadModels();\r\n        _self.configGrids();\r\n\r\n        _self.scene.getEngine().runRenderLoop(() => {\r\n            if (scene) {\r\n                scene.render();\r\n                _self.animateBalls();\r\n            }\r\n        });\r\n\r\n        canvas.addEventListener(\"pointerdown\", _self.onPointerDown, false);\r\n        canvas.addEventListener(\"pointerup\", _self.onPointerUp, false);\r\n        canvas.addEventListener(\"pointermove\", _self.onPointerMove, false);\r\n    }\r\n\r\n    getGroundPosition = () => {\r\n        let {scene} = this;\r\n        var pickinfo = scene.pick(scene.pointerX, scene.pointerY, function (mesh) { return mesh.name == 'carpet'; });\r\n        if (pickinfo.hit) {\r\n            return pickinfo.pickedPoint;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    onPointerDown = (evt) => {\r\n        let _self = this;\r\n        let {scene, canvas} = this;\r\n        if (evt.button !== 0) {\r\n            return;\r\n        }\r\n\r\n        // check if we are under a mesh\r\n        var pickInfo = scene.pick(scene.pointerX, scene.pointerY, function (mesh) {return (mesh.name === 'cue-ball-white' || mesh.name === 'cue-ball-yellow' || mesh.name === 'cue-ball-red')});\r\n        if (pickInfo.hit) {\r\n            _self.currentMesh = pickInfo.pickedMesh;\r\n            _self.startingPoint = _self.getGroundPosition(evt);\r\n\r\n            if (_self.startingPoint) {\r\n                setTimeout(function () {\r\n                    _self.cameras.arcCam.detachControl(canvas);\r\n                }, 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    onPointerUp = () => {\r\n        let _self = this;\r\n        let {startingPoint, canvas} = this;\r\n        if (startingPoint) {\r\n            _self.cameras.arcCam.attachControl(canvas, true);\r\n            _self.startingPoint = null;\r\n            _self.currentMesh = null;\r\n            return;\r\n        }\r\n    }\r\n\r\n    onPointerMove = (evt) => {\r\n        let _self = this;\r\n        let {startingPoint, currentMesh} = this;\r\n        if (!startingPoint) {\r\n            return;\r\n        }\r\n\r\n        var current = _self.getGroundPosition(evt);\r\n\r\n        if (!current) {\r\n            return;\r\n        }\r\n        \r\n        currentMesh.position = current;\r\n        currentMesh.position.y = _self.ballRadius/2\r\n\r\n        startingPoint = current;\r\n        _self.updateBat(_self.controlOptions);\r\n    }\r\n\r\n    changeView (view) {\r\n        const _self = this;\r\n        \r\n        if (view === '2d') {\r\n            _self.scene.activeCamera = _self.cameras.topCam;\r\n            _self.cameras.arcCam.detachControl(_self.canvas);\r\n            _self.cameras.topCam.attachControl(_self.canvas);\r\n        } else {\r\n            _self.scene.activeCamera = _self.cameras.arcCam;\r\n            _self.cameras.arcCam.attachControl(_self.canvas);\r\n            _self.cameras.topCam.detachControl(_self.canvas);\r\n        }\r\n    }\r\n\r\n    moveAndRotateBall = (obj, t, tmp ) => {\r\n        let range = 10000;\r\n        let index = -1;\r\n        let _self = this;\r\n        let i;\r\n        for(i = tmp * range ; i < (tmp + 1) * range; i++){\r\n            if(_self.pathData[i])\r\n            {\r\n                if(_self.pathData[i].time < (t - _self.t0)){\r\n                    index = i;\r\n                }\r\n            } else { break;}\r\n        }\r\n        if(index >= 0){\r\n            if (index == i-1) {\r\n                return false;\r\n            }\r\n            let data = _self.pathData[index];\r\n            obj.position.x = TABLE_LENGTH * data.X / _self.size;\r\n            obj.position.z = TABLE_LENGTH * data.Y / _self.size;\r\n\r\n            let RAp = _self.pathData[index].RAp;\r\n            let RAq = _self.pathData[index].RAq;\r\n            let RAr = _self.pathData[index].RAr;\r\n\r\n            const R = 0.03;\r\n            let Rx = (RAp - _self.RAp0[tmp]) / R\r\n            let Ry = (RAq - _self.RAq0[tmp]) / R\r\n            let Rz = (RAr - _self.RAr0[tmp]) / R\r\n\r\n            _self.RAp0[tmp] = RAp\r\n            _self.RAq0[tmp] = RAq\r\n            _self.RAr0[tmp] = RAr\r\n\r\n            obj.rotate(BABYLON.Axis.X, -Rx, BABYLON.Space.WORLD);\r\n            obj.rotate(BABYLON.Axis.Y, -Rz, BABYLON.Space.WORLD);\r\n            obj.rotate(BABYLON.Axis.Z, -Ry, BABYLON.Space.WORLD);\r\n            return true;\r\n        }\r\n    }\r\n    \r\n    animateBalls = () => {\r\n        let _self = this;\r\n        let { cueBallWhite, balls } = this.objects;\r\n        if(!_self.pathData || _self.pathData.length == 0) return;\r\n        if (_self.t0 == undefined) return;\r\n        let t = new Date().getTime() / 1000;\r\n\r\n        var res1 = this.moveAndRotateBall(cueBallWhite, t, 0);\r\n        let completed = 0;\r\n        for(var i = 0; i < 15; i++){\r\n            var res = this.moveAndRotateBall(balls[i], t, i+1);\r\n            if (res == false) completed ++;\r\n        }\r\n        console.log(res1, completed);\r\n        if (res1 == false && completed == 15) _self.pathData = [];\r\n    }\r\n\r\n    playSimulation = () => {\r\n        var _self = this;\r\n        const ballPositions = this.initBallPosition;\r\n        const {controlOptions} = this;\r\n        const {\r\n            cueBallWhite,\r\n            balls\r\n        } = this.objects;\r\n        let Xinit = [];\r\n        let Yinit = [];\r\n        let empocheeInit = [];\r\n\r\n        Xinit.push(\r\n            _self.size * cueBallWhite.position.x / TABLE_LENGTH,\r\n        )\r\n        Yinit.push(\r\n            _self.size * cueBallWhite.position.z / TABLE_LENGTH,\r\n        )\r\n        empocheeInit.push(false);\r\n\r\n        for(var item of balls) {\r\n            Xinit.push(\r\n                _self.size * item.position.x / TABLE_LENGTH,\r\n            )\r\n            Yinit.push(\r\n                _self.size * item.position.z / TABLE_LENGTH,\r\n            )\r\n            empocheeInit.push(!item.visibility);\r\n        }\r\n        var res = this.billard.Simuler(\r\n            1,\r\n            {\r\n                Xinit: Xinit,\r\n                Yinit: Yinit,\r\n                empocheeInit: empocheeInit,\r\n                RApInit: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n                RAqInit: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n                RArInit: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n                el: controlOptions.sideEnglish,\r\n                er: controlOptions.topSpin,\r\n                alphaQ: controlOptions.cueAngle,\r\n                betaQ: controlOptions.cueLine,\r\n                Vqueue:controlOptions.speed,\r\n            }\r\n        );\r\n        console.log(res)\r\n\r\n        if(!res || res.length == 0) return;\r\n        \r\n        this.pathData = res;\r\n        this.drawBallPath(true);\r\n\r\n        this.t0 = new Date().getTime() / 1000;\r\n    }\r\n}","import React from 'react';\r\n\r\nimport { Engine, Scene } from 'react-babylonjs';\r\n\r\nimport './styles.css';\r\n\r\nimport SceneManager from './sceneManager';\r\n\r\nclass SimulatorEngine extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            showPath: false,\r\n        }\r\n\r\n        this.board = new SceneManager(\r\n            this.props.size,\r\n            this.props.modelStorePath,\r\n            this.props.currentView,\r\n            this.props.points,\r\n            {\r\n                cueLine: this.props.cueLine,\r\n                cueAngle: this.props.cueAngle,\r\n                sideEnglish: this.props.sideEnglish,\r\n                topSpin: this.props.topSpin,\r\n                speed: this.props.speed,\r\n            }\r\n        );\r\n\r\n        this.simulatorDom = new React.createRef();\r\n    }\r\n\r\n    meshPicked = ( mesh ) => {\r\n        // console.log('mesh picked', mesh);\r\n    }\r\n\r\n    drawBallPath = (value) => {\r\n        this.board.drawBallPath(value);\r\n    }\r\n\r\n    onSceneMount = ( e ) => {\r\n        const { canvas, scene } = e;\r\n        this.board.initializeScene(scene, canvas);\r\n    }\r\n\r\n    changeView (option) {\r\n        this.board.changeView(option);\r\n    }\r\n\r\n    toggleGrids = (visible) => {\r\n        this.board.toggleGrids(visible);\r\n    }\r\n\r\n    playSimulation = () => {\r\n        this.board.playSimulation();\r\n    }\r\n\r\n    updateControlOptions = (data) => {\r\n        this.board.updateControlOptions(data);\r\n    }\r\n\r\n    componentDidMount = () => {\r\n    }\r\n    render () {\r\n        return (\r\n            // <div ref={this.simulatorDom} style={{height:'600px'}}></div>\r\n            <Engine canvasId=\"carom-simulator-canvas\">\r\n                <Scene\r\n                    onMeshPicked={this.meshPicked}\r\n                    onSceneMount={this.onSceneMount}\r\n                />\r\n            </Engine>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SimulatorEngine;","import React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faMinus, faPlus } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport './slider.css';\r\n\r\nexport default class InputSlider extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n            value: this.props.value?this.props.value:0\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps = (props) => {\r\n        const {value} = props;\r\n        this.setState({value:value});\r\n    }\r\n\r\n    updateValue = (value) => {\r\n        this.setState({value:value})\r\n        this.props.onUpdate(this.props.itemKey, value);\r\n    }\r\n\r\n    onChangeValue = (evt) => {\r\n        const value = evt.target.value;\r\n        this.updateValue(value);\r\n    }\r\n\r\n    onMinusPressed = () => {\r\n        var currentValue = this.state.value;\r\n        let { min, step } = this.props;\r\n        if (step === undefined) step = 0.1;\r\n        step *= 10;\r\n        currentValue = (currentValue*10 - step)/10;\r\n        if (currentValue <  min) currentValue = min;\r\n        this.updateValue(currentValue);\r\n    }\r\n\r\n    onPlusPressed = () => {\r\n        var currentValue = this.state.value;\r\n        let { max, step } = this.props;\r\n        if (step === undefined) step = 0.1;\r\n        step *= 10;\r\n        currentValue = (currentValue*10 + step)/10;\r\n        if (currentValue > max) currentValue = max;\r\n        this.updateValue(currentValue);\r\n    }\r\n\r\n    render () {\r\n        const {\r\n            value,\r\n        } = this.state;\r\n\r\n        let {\r\n            containerClass,\r\n            label,\r\n            min,\r\n            max,\r\n            unitDom,\r\n            step\r\n        } = this.props\r\n        if (step === undefined) step = 0.1;\r\n        return (\r\n            <div className={containerClass}>\r\n                <div style={{display:'flex'}}>\r\n                    <FontAwesomeIcon\r\n                        icon={faMinus}\r\n                        className=\"btn-change-value\"\r\n                        onClick={this.onMinusPressed}\r\n                    />\r\n                    <span style={{flex:1, textAlign:'center'}}>\r\n                        {label}\r\n                        <span> : {value}{unitDom}</span>\r\n                    </span>\r\n                    <FontAwesomeIcon\r\n                        icon={faPlus}\r\n                        className=\"btn-change-value\"\r\n                        onClick={this.onPlusPressed}\r\n                    />\r\n                </div>\r\n                <input\r\n                    type=\"range\"\r\n                    min={min}\r\n                    max={max}\r\n                    value={value}\r\n                    className=\"slider\"\r\n                    step={step}\r\n                    onChange={this.onChangeValue}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {\r\n    faTh,\r\n    faCrosshairs,\r\n    faVolumeMute,\r\n    faBackward,\r\n    faForward,\r\n    faStop,\r\n    faPlay\r\n} from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport InputSlider from './slider';\r\nimport './style.css';\r\n\r\nexport default class ControllerCollection extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n            cueLine: Math.round(1800 * this.props.cueLine / Math.PI) / 10,\r\n            cueAngle: Math.round(1800 * this.props.cueAngle / Math.PI) / 10,\r\n            sideEnglish: Math.round(this.props.sideEnglish * 10000) / 10,\r\n            topSpin: Math.round(this.props.topSpin * 10000) / 10,\r\n            speed: Math.round(this.props.speed * 100)\r\n        }\r\n    }\r\n\r\n    onInputSliderUpdated = (key, value) => {\r\n        let tmp = Object.assign({}, this.state);\r\n        tmp[key] = parseFloat(value);\r\n        this.setState(tmp);\r\n        let eventValues = Object.assign({}, tmp);\r\n\r\n        eventValues.cueLine = Math.PI * tmp.cueLine / 180;\r\n        eventValues.cueAngle = Math.PI * tmp.cueAngle / 180;\r\n        eventValues.sideEnglish /= 1000;\r\n        eventValues.topSpin /= 1000;\r\n        eventValues.speed /= 100;\r\n        this.props.onControlOptionsUpdated(eventValues);\r\n    }\r\n\r\n    render () {\r\n        const {cueLine, cueAngle, sideEnglish, topSpin, speed} = this.state;\r\n        const {showGrid, showPath} = this.props;\r\n        var btnGridClass = \"toggle-btn\";\r\n        var btnShowPathClass = \"toggle-btn\";\r\n        var btnMuteClass = \"toggle-btn\";\r\n\r\n        if (showGrid === true) btnGridClass += \" active\";\r\n        if (showPath === true) btnShowPathClass += \" active\";\r\n        return (\r\n            <div>\r\n                <div className=\"common-controller-container\">\r\n                    <FontAwesomeIcon\r\n                        className={btnGridClass}\r\n                        icon={faTh}\r\n                        onClick={() => {this.props.onToggleShowGrid(!showGrid)}}\r\n                    />\r\n\r\n                    <FontAwesomeIcon\r\n                        className={btnShowPathClass}\r\n                        icon={faCrosshairs}\r\n                        onClick={() => {this.props.onToggleShowPath(!showPath)}}\r\n                    />\r\n\r\n                    <FontAwesomeIcon\r\n                        className={btnMuteClass}\r\n                        icon={faVolumeMute}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <InputSlider\r\n                        label=\"Cue Line\"\r\n                        containerClass=\"slider-container\"\r\n                        min={0}\r\n                        max={360}\r\n                        value={cueLine}\r\n                        unitDom={<sup>o</sup>}\r\n                        itemKey=\"cueLine\"\r\n                        onUpdate={this.onInputSliderUpdated}\r\n                    />\r\n                    <InputSlider\r\n                        label=\"Cue Angle\"\r\n                        containerClass=\"slider-container\"\r\n                        min={2}\r\n                        max={89}\r\n                        value={cueAngle}\r\n                        unitDom={<sup>o</sup>}\r\n                        itemKey=\"cueAngle\"\r\n                        onUpdate={this.onInputSliderUpdated}\r\n                    />\r\n                    <br/>\r\n                    <InputSlider\r\n                        label=\"Side English\"\r\n                        containerClass=\"slider-container\"\r\n                        min={-15.1}\r\n                        max={15.1}\r\n                        value={sideEnglish}\r\n                        unitDom={<span>mm</span>}\r\n                        itemKey=\"sideEnglish\"\r\n                        onUpdate={this.onInputSliderUpdated}\r\n                    />\r\n                    <InputSlider\r\n                        label=\"Top Spin\"\r\n                        containerClass=\"slider-container\"\r\n                        min={-15.1}\r\n                        max={15.1}\r\n                        value={topSpin}\r\n                        unitDom={<span>mm</span>}\r\n                        itemKey=\"topSpin\"\r\n                        onUpdate={this.onInputSliderUpdated}\r\n                    />\r\n                    <InputSlider\r\n                        label=\"Speed\"\r\n                        containerClass=\"slider-container\"\r\n                        min={0}\r\n                        max={450}\r\n                        value={speed}\r\n                        step={1}\r\n                        unitDom={<span>cm/s</span>}\r\n                        itemKey=\"speed\"\r\n                        onUpdate={this.onInputSliderUpdated}\r\n                    />\r\n                </div>\r\n                <div className=\"play-controller-container\">\r\n                    <FontAwesomeIcon\r\n                        className=\"play-controller\"\r\n                        icon={faBackward}\r\n                    />\r\n                    <FontAwesomeIcon\r\n                        className=\"play-controller\"\r\n                        icon={faStop}\r\n                    />\r\n                    <FontAwesomeIcon\r\n                        className=\"play-controller\"\r\n                        icon={faPlay}\r\n                        onClick={this.props.onPlayPressed}\r\n                    />\r\n                    <FontAwesomeIcon\r\n                        className=\"play-controller\"\r\n                        icon={faForward}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nimport ViewSelector from './viewSelector';\r\nimport SimulatorEngine from './simulatorEngine';\r\nimport ControllerCollection from './controller';\r\n\r\nimport './styles.css';\r\n\r\nimport {} from './constants';\r\n\r\nclass PoolSimulator extends React.Component {\r\n    constructor () {\r\n        super();\r\n\r\n        this.state = {\r\n            currentView : '2d',\r\n            showGrid : true,\r\n            showPath: false,\r\n            size: 310,\r\n            cueLine: 30/180*Math.PI,\r\n            cueAngle: 5/180*Math.PI,\r\n            sideEnglish: -0.0087,\r\n            topSpin: 0.0075,\r\n            speed: 3.80,\r\n            points: {\r\n                Xinit: [],\r\n                Yinit: [],\r\n                empocheeInit: []\r\n            }\r\n        }\r\n        this.simulator = React.createRef();\r\n    }\r\n    componentWillMount = () => {\r\n        this.updateSimulateInfo();\r\n    }\r\n    updateSimulateInfo = () => {\r\n        var info = [\r\n            'Stephan COHEN',\r\n            '...',\r\n            '0',\r\n            '280',\r\n            '9',\r\n            '1',\r\n            '0.09016666666666652',\r\n            '-0.15416666666666667',\r\n            '0',\r\n            '-0.7000000000000001',\r\n            '0',\r\n            '1',\r\n            '-0.6000000000000001',\r\n            '0',\r\n            '1',\r\n            '-0.5',\r\n            '0',\r\n            '1',\r\n            '-0.4',\r\n            '0',\r\n            '1',\r\n            '-0.30000000000000004',\r\n            '0',\r\n            '1',\r\n            '1.1278562236304084',\r\n            '0.5949669539121291',\r\n            '0',\r\n            '-0.7158538054923216',\r\n            '0.28840047307995464',\r\n            '0',\r\n            '0.09842832940320168',\r\n            '-0.3689576159836725',\r\n            '0',\r\n            '0.6413658575465282',\r\n            '-0.03231798897590485',\r\n            '0',\r\n            '0.2',\r\n            '0',\r\n            '1',\r\n            '0.30000000000000004',\r\n            '0',\r\n            '1',\r\n            '0.4',\r\n            '0',\r\n            '1',\r\n            '0.5',\r\n            '0',\r\n            '1',\r\n            '0.6000000000000001',\r\n            '0',\r\n            '1',\r\n            '0.7000000000000001',\r\n            '0',\r\n            '1',\r\n            '1.8639999999999999',\r\n            '0.03490658503988659',\r\n            '-2.4890317318711697',\r\n            '0.014000000000000002',\r\n            '0.004999999999999999',\r\n        ];\r\n        let tmp = {\r\n            size: 2.54,\r\n            points: {\r\n                Xinit: [],\r\n                Yinit: [],\r\n                empocheeInit: []\r\n            }\r\n        }\r\n\r\n        // var nb_points = info[5];\r\n        var _loc_6 = 6;\r\n\r\n        var _loc_3 = 0;\r\n        while (_loc_3 < 16)\r\n        {\r\n            tmp.points.Xinit[_loc_3] = info[_loc_6];\r\n            _loc_6++;\r\n            tmp.points.Yinit[_loc_3] = info[_loc_6];\r\n            _loc_6++;\r\n            if (info[_loc_6] == 0)\r\n            {\r\n                tmp.points.empocheeInit[_loc_3] = false;\r\n            }\r\n            else\r\n            {\r\n                tmp.points.empocheeInit[_loc_3] = true;\r\n            }\r\n            _loc_6++;\r\n            _loc_3++;\r\n        }\r\n        tmp.speed = parseFloat(info[_loc_6]);\r\n        _loc_6++;\r\n        tmp.cueAngle = parseFloat(info[_loc_6]);\r\n        _loc_6++;\r\n        tmp.cueLine = parseFloat(info[_loc_6]);\r\n        if (tmp.cueLine < 0) tmp.cueLine += Math.PI * 2\r\n        _loc_6++;\r\n        tmp.sideEnglish = parseFloat(info[_loc_6]);\r\n        _loc_6++;\r\n        tmp.topSpin = parseFloat(info[_loc_6]);\r\n        console.log(tmp)\r\n        this.setState(tmp)\r\n    }\r\n\r\n    viewSelectorItemClicked = (item) => {\r\n        this.setState({currentView: item});\r\n        this.simulator.current.changeView(item);\r\n    }\r\n\r\n    onToggleShowGrid = (value) => {\r\n        this.setState({showGrid: value})\r\n        this.simulator.current.toggleGrids(value);\r\n    }\r\n\r\n    onToggleShowPath = (value) => {\r\n        this.setState({showPath: value})\r\n        this.simulator.current.drawBallPath(value);\r\n    }\r\n\r\n    onPlayPressed = () => {\r\n        this.simulator.current.playSimulation();\r\n    }\r\n\r\n    onControlOptionsUpdated = (data) => {\r\n        this.simulator.current.updateControlOptions(data);\r\n    }\r\n\r\n    componentDidMount = () => {\r\n    }\r\n\r\n    render () {\r\n        const {\r\n            currentView,\r\n\r\n            showGrid,\r\n            showPath,\r\n\r\n            size,\r\n            cueLine,\r\n            cueAngle,\r\n            sideEnglish,\r\n            topSpin,\r\n            speed,\r\n\r\n            points\r\n        } = this.state;\r\n        return (\r\n            <div className=\"simulator-container\">\r\n                <ViewSelector\r\n                    currentView={currentView}\r\n                    viewSelectorItemClicked={this.viewSelectorItemClicked}\r\n                />\r\n                <SimulatorEngine\r\n                    modelStorePath={this.props.modelStorePath}\r\n                    ref={this.simulator}\r\n\r\n                    size={size}\r\n                    currentView={currentView}\r\n                    cueLine = {cueLine}\r\n                    cueAngle = {cueAngle}\r\n                    sideEnglish = {sideEnglish}\r\n                    topSpin = {topSpin}\r\n                    speed = {speed}\r\n\r\n                    points = {points}\r\n                />\r\n                <ControllerCollection\r\n                    showGrid={showGrid}\r\n                    showPath={showPath}\r\n                    cueLine = {cueLine}\r\n                    cueAngle = {cueAngle}\r\n                    sideEnglish = {sideEnglish}\r\n                    topSpin = {topSpin}\r\n                    speed = {speed}\r\n\r\n                    onControlOptionsUpdated={this.onControlOptionsUpdated}\r\n\r\n                    onToggleShowGrid={this.onToggleShowGrid}\r\n                    onToggleShowPath = {this.onToggleShowPath}\r\n                    onPlayPressed = {this.onPlayPressed}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PoolSimulator;","import React from 'react';\nimport './App.css';\n\nimport { CaromSimulator, PoolSimulator } from './lib/kozoom-3d-simulator';\n\nfunction App() {\n  return (\n    <div className=\"simulator-container\">\n      {/* <CaromSimulator\n        modelStorePath=\"./models/\"\n      /> */}\n      <PoolSimulator\n        modelStorePath = \"./models/\"\n      />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}